<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Blackbaud Internet Solutions | Developer Guide | Advanced Donation Form</title> <link rel="icon" href="/bbis/assets/img/favicon.ico" type="image/ico"> <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"> <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"> <link rel="stylesheet" href="/bbis/assets/css/combine.site.css?v=2018-08-01-03:46:17"> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-2418840-40', 'auto'); ga('send', 'pageview'); </script> </head> <body class="layout-compress section-guide subsection-advanced-donation-form"> <nav class="navbar" role="navigation" id="top"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bb-navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a href="/bbis/" class="navbar-brand"> <img src="/bbis/assets/img/logo-bbis.png" alt="Blackbaud Internet Solutions" class="img-responsive" /> </a> </div> <!-- navbar-header --> <div class="collapse navbar-collapse" id="bb-navbar"> <ul class="nav navbar-nav navbar-right"> <li > <a href="/bbis/start/"> Getting Started </a> </li> <li class="active"> <a href="/bbis/guide/"> Developer Guide </a> </li> <li > <a href="/bbis/reference/"> Technical Reference </a> </li> <li class=""> <a href="/bbis/code/"> Code Samples </a> </li> <li > <a href="/bbis/help/"> <i class="fa fa-fw fa-question-circle hidden-xs"></i> <span class="visible-xs-inline">Help</span> </a> </li> </ul> </div> <!-- .navbar-collapse --> </div> <!-- .container --> </nav> <!-- .navbar.navbar-inverse --> <div class="content"> <div class="container"> <div class="row"> <div class="col-md-3 hidden-xs hidden-sm"> <div class="sidebar"> <ul class="nav nav-pills nav-stacked nav-sidebar"> <!-- Ridiculous Bootstrap Scrollspy bug that required this nested linkage to function properly --> <li class="hidden"> <a href="#top">Top</a> <ul class="nav"> <li> <a href="#top">Top</a> </li> </ul> </li> <li class="back-to back-to-section"> <a href="/bbis/guide/"> Developer Guide </a> </li> <li class=" active scrollspy-start "> <a href="/bbis/guide/advanced-donation-form/">Advanced Donation Form</a> <ul class="nav"> <li> <a href="#setup">Setup</a> </li> <li> <a href="#example-barebones">Example - Barebones</a> </li> <li> <a href="#example-payment-2-0">Example - Payment 2.0</a> </li> <li> <a href="#example-pledge-installments">Example - Pledge Installments</a> </li> <li> <a href="#example-country-and-state">Example - Country and State</a> </li> <li> <a href="#example-recurrence">Example - Recurrence</a> </li> <li> <a href="#example-tribute">Example - Tribute</a> </li> <li> <a href="#example-consent">Example - Consent</a> </li> <li> <a href="#example-secure-payments">Example - Blackbaud Secure Payments</a> </li> <li> <a href="#example-complete">Example - Complete</a> </li> <li> <a href="#adf-generator">ADF Generator</a> </li> </ul> </li> <li class=""> <a href="/bbis/guide/blackbaud-secure-payments/">Blackbaud Secure Payments</a> </li> <li class=""> <a href="/bbis/guide/custom-content-parts/">Custom Content Parts</a> </li> <li class=""> <a href="/bbis/guide/custom-framework-parts/">Custom Framework Parts</a> </li> <li class=""> <a href="/bbis/guide/custom-handlers/">Custom Handlers</a> </li> <li class=""> <a href="/bbis/guide/user-imports/">User Imports</a> </li> <li class=""> <a href="/bbis/guide/responsive-design/">Responsive Design</a> </li> <li class="back-to back-to-top"> <a href="#top" class=""> <i class="fa fa-caret-square-o-up"></i> </a> </li> </ul> </div> </div> <!-- .col-md-3 --> <div class="col-md-9 readability"> <h2 id="setup">Advanced Donation Form</h2> <p>The Advanced Donation Form Part and accompanying REST APIs were released in version 3.0 of BBIS. They allow completely custom interfaces to be created for the donation experience, relaying the necessary information to the backend via the REST API or JavaScript SDK. For a complete list of possible options, be sure to visit the <a href="/bbis/reference/rest/#donationapi">technical reference</a> for more information.</p> <p>All the examples below expect a page with a configured instance of the Advanced Donation Form Part on it. It's also important the examples below are meant to be as simple and straight-forward as possible. In a real-world scenario, we highly suggestion following standard web practices for form design, including labels for accessibility, and client-side data validation.</p> <p>For all the Advanced Donation Form examples, I've split the grouped the content by language - HTML, CSS, or JS; however, when using the code in the Advanced Donation Form Part, the code is combined into a single textarea. Please be certain to wrap the content with appropriate <code>&lt;script&gt;</code> or <code>&lt;style&gt;</code> tag.</p> <h3 id="example-barebones">Barebones Example</h3> <p>In our first example, we'll create a very barebones example of a donation form, supplying only the required fields. For this example we've included no styling or error handling, other than displaying a message in the console. I've also hard-coded the designation and amount fields.</p> <p class="alert alert-warning"><span class="label label-warning">Important</span> The DonationService constructor requires the Advanced Donation Form Part ID. In the examples below, we dynamically find this ID. You could hard-code this value if you prefer. The technique below assumes there's only one Advanced Donation Form Part per page.</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-barebones-html" data-toggle="tab">HTML</a></li> <li><a href="#example-barebones-js" data-toggle="tab">JS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-barebones-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"first-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"last-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"email"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">"address"</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"city"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"state"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"zip"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"country"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">"btn-donate"</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-barebones-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Let's make sure the DOM is ready</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)</span>
    <span class="p">);</span>

    <span class="c1">// Create the donation object we'll send</span>
    <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
    <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
      <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">Designations</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="na">Amount</span><span class="p">:</span> <span class="mf">5.00</span><span class="p">,</span>
            <span class="na">DesignationId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="c1">// Create our success handler</span>
    <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="c1">// Create our error handler</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 

      <span class="c1">// Add the information our user has typed</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#first-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#last-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#address'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">City</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#city'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">State</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#state'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#zip'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">Country</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="c1">// Submit our donation</span>
      <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-payment-2-0">Using the Payment 2.0 Part</h3> <p>When using the Payment 2.0 Part, the information required is reduced. For example, Donor information is should no longer be provided. Again, we're not including any styling or error handling, but I have introduced the ability to select a donation amount and designation.</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-payment-2-0-html" data-toggle="tab">HTML</a></li> <li><a href="#example-payment-2-0-js" data-toggle="tab">JS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-payment-2-0-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Amount<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"amount"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>5<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"10"</span><span class="nt">&gt;</span>10<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"20"</span><span class="nt">&gt;</span>20<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Designation<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"designation"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="nt">&gt;</span>Example Designation 1<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="nt">&gt;</span>Example Designation 2<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>
      
<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">"btn-donate"</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-payment-2-0-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="c1">// Let's make sure the DOM is ready</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)</span>
    <span class="p">);</span>
    
    <span class="c1">// Create the donation object we'll send</span>
    <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
    <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">Designations</span><span class="p">:</span> <span class="p">[]</span>
      <span class="p">}</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our success handler</span>
    <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our error handler</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 
      
      <span class="c1">// Add the information our user has typed</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Designations</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="na">Amount</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#amount'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">DesignationId</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#designation'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">});</span>
      
      <span class="c1">// Submit our donation</span>
      <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>
    
  <span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <p class="alert alert-info"><span class="label label-info">Note</span> The <a href="/bbis/reference/javascript/#donationservice">DonationService</a> attempts to redirect to the BBSPCheckoutUri or PaymentPageUri if either of them exist (in that order) after a successful callback from the <a href="/bbis/reference/javascript/#donationservice-createdonation">createDonation</a> method.</p> <h3 id="example-pledge-installments">Pledge Installments Example</h3> <p>Pledge installments are the payment donor makes for a pledge according to a defiend time schedule. The example includes the HTML required to display input fields to capture required parameters for pledge installment endpoints.</p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-pledge-installments-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-pledge-installments-js" data-toggle="tab">JS</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-pledge-installments-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">"donationInformation"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;legend&gt;</span>
		<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"BBListingHeading DonationListingHeading"</span><span class="nt">&gt;</span>Gift Information<span class="nt">&lt;/span&gt;</span>
	<span class="nt">&lt;/legend&gt;</span>
	<span class="nt">&lt;div&gt;</span>
		<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"isPaymentTwo"</span><span class="nt">/&gt;</span> Check this box if you are using a Payment 2.0 part with this ADF
		<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"giftAmount"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"required"</span><span class="nt">&gt;</span>Select Gift Amount:<span class="nt">&lt;/label&gt;</span>
			<span class="nt">&lt;ul&gt;</span>
				<span class="nt">&lt;li&gt;</span>
					<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt1000"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"1000"</span> <span class="nt">/&gt;</span>
					<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt1000"</span><span class="nt">&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Platinum<span class="nt">&lt;/span&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$1,000<span class="nt">&lt;/span&gt;</span>
					<span class="nt">&lt;/label&gt;</span>
				<span class="nt">&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;</span>
					<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt500"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"500"</span> <span class="nt">/&gt;</span>
					<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt500"</span><span class="nt">&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Gold<span class="nt">&lt;/span&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$500<span class="nt">&lt;/span&gt;</span>
					<span class="nt">&lt;/label&gt;</span>
				<span class="nt">&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;</span>
					<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt100"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"100"</span> <span class="nt">/&gt;</span>
					<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt100"</span><span class="nt">&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Silver<span class="nt">&lt;/span&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$100<span class="nt">&lt;/span&gt;</span>
					<span class="nt">&lt;/label&gt;</span>
				<span class="nt">&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;</span>
					<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt25"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"25"</span> <span class="nt">/&gt;</span>
					<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt25"</span><span class="nt">&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Bronze<span class="nt">&lt;/span&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$25<span class="nt">&lt;/span&gt;</span>
					<span class="nt">&lt;/label&gt;</span>
				<span class="nt">&lt;/li&gt;</span>
				<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"other"</span><span class="nt">&gt;</span>
					<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amtOther"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"-1"</span> <span class="na">checked=</span><span class="s">"checked"</span> <span class="nt">/&gt;</span>
					<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amtOther"</span><span class="nt">&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Enter an amount<span class="nt">&lt;/span&gt;</span>
					<span class="nt">&lt;/label&gt;</span>
					<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"txtAmount"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">placeholder=</span><span class="s">"$"</span> <span class="na">class=</span><span class="s">"BBFormTextbox"</span><span class="nt">&gt;</span>
				<span class="nt">&lt;/li&gt;</span>
			<span class="nt">&lt;/ul&gt;</span>
		<span class="nt">&lt;/div&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/fieldset&gt;</span>
        
<span class="c">&lt;!-- PLEDGE INSTALLMENT START--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"pledgeInstallments"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"required"</span><span class="nt">&gt;</span>Pledge Installment:<span class="nt">&lt;/label&gt;</span>
	<span class="nt">&lt;ul&gt;</span>
		<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"other"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"numberOfInstallments"</span><span class="nt">&gt;</span>
				Number of Installments:
			<span class="nt">&lt;/label&gt;</span>
			<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"numberOfInstallments"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">placeholder=</span><span class="s">"$"</span> <span class="na">class=</span><span class="s">"BBFormTextbox"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;/li&gt;</span>
		<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"other"</span><span class="nt">&gt;</span>
			Installment Amount:
			<span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"installmentAmount"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;/li&gt;</span>
		<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"other"</span><span class="nt">&gt;</span>
			Installment End Date:
			<span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"installmentEndDate"</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;/li&gt;</span>
	<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span>
	<span class="c">&lt;!-- PLEDGE INSTALLMENT END--&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-pledge-installments-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="c1">// Let's make sure the DOM is ready</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)</span>
    <span class="p">);</span>
    
    <span class="c1">// Create the donation object we'll send</span>
    <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
    <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
      <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">Designations</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
		  <span class="c1">//Amount has been hardcoded to 500. Replace the value with a value entered by user.</span>
            <span class="na">Amount</span><span class="p">:</span> <span class="mf">500.00</span><span class="p">,</span>
            <span class="na">DesignationId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our success handler</span>
    <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our error handler</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
	  
      <span class="c1">//if payment 2.0 is checked, No need to capture the donor information</span>
       <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">isPaymentTwo</span><span class="p">){</span>
		  <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
			<span class="na">Title</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#title"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			<span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#firstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			<span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#lastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			<span class="na">EmailAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#emailAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			<span class="na">Phone</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#phone"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			<span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
			  <span class="na">Country</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			  <span class="na">State</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			  <span class="na">City</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#city"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			  <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#streetAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			  <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#postalCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
			<span class="p">},</span>
			<span class="na">OrganizationName</span><span class="p">:</span> <span class="nx">organizationName</span>
		  <span class="p">};</span>
	  <span class="p">}</span>
	  
	   <span class="c1">// PLEDGE INSTALLMENT BEGIN ********************************************************************************************************************************************************************************************************************************************************</span>
	  <span class="kd">var</span> <span class="nx">numberOfInstallments</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#numberOfInstallments'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
	  <span class="k">if</span> <span class="p">(</span><span class="nx">numberOfInstallments</span><span class="p">)</span> <span class="p">{</span>
	      <span class="c1">//Amount has been hardcoded to 500. Replace the value with a value entered by user.</span>
		  <span class="kd">var</span> <span class="nx">installmentAmount</span> <span class="o">=</span> <span class="nx">ds</span><span class="p">.</span><span class="nx">getRecurringGiftInstallmentAmount</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="nx">numberOfInstallments</span><span class="p">);</span>
		  <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">PledgeInstallment</span> <span class="o">=</span> <span class="p">{</span>
			  <span class="na">NumberOfInstallments</span><span class="p">:</span> <span class="nx">numberOfInstallments</span><span class="p">,</span>
			  <span class="na">InstallmentAmount</span><span class="p">:</span> <span class="nx">installmentAmount</span>
		  <span class="p">}</span>
	  <span class="p">}</span>
      <span class="c1">// PLEDGE INSTALLMENT END ********************************************************************************************************************************************************************************************************************************************************</span>
        
      <span class="c1">// Submit our donation</span>
      <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>
    
  <span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-country-and-state">Displaying Available Countries and States</h3> <p>Using the <a href="/bbis/reference/rest/#countryapi">Country and State endpoints</a>, you can quickliy populate the available countries and their corresponding states. The first example uses jQuery to make an AJAX request. We also wrap this functionality in the <a href="/bbis/reference/javascript/#countryservice">Country and State JavaScript Service</a>, which is shown in the second example.</p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-country-and-state-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-country-and-state-js" data-toggle="tab">JS</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-country-and-state-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;select</span> <span class="na">id=</span><span class="s">"country"</span><span class="nt">&gt;&lt;/select&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;select</span> <span class="na">id=</span><span class="s">"state"</span><span class="nt">&gt;&lt;/select&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-country-and-state-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

<span class="c1">// Let's make sure the DOM is ready</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">selectCountry</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">selectState</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#state'</span><span class="p">);</span>
  
  <span class="c1">// Load Countries</span>
  <span class="nx">$</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">pageInformation</span><span class="p">.</span><span class="nx">rootPath</span> <span class="o">+</span> <span class="s1">'/webapi/country'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">countries</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">countries</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">selectCountry</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'&lt;option value="'</span> <span class="o">+</span> <span class="nx">countries</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Id</span> <span class="o">+</span> <span class="s1">'"&gt;'</span> <span class="o">+</span> <span class="nx">countries</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Description</span> <span class="o">+</span> <span class="s1">'&lt;/option&gt;'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
  
  <span class="c1">// Watch Country Change</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'change'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  
    <span class="c1">// Load States</span>
    <span class="nx">$</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">pageInformation</span><span class="p">.</span><span class="nx">rootPath</span> <span class="o">+</span> <span class="s1">'/webapi/country/'</span> <span class="o">+</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/state'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">states</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">selectState</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">states</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">selectState</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'&lt;option value="'</span> <span class="o">+</span> <span class="nx">states</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Id</span> <span class="o">+</span> <span class="s1">'"&gt;'</span> <span class="o">+</span> <span class="nx">states</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Description</span> <span class="o">+</span> <span class="s1">'&lt;/option&gt;'</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>

<span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <p>The following example uses the <a href="/bbis/reference/javascript/#countryservice">Country and State JavaScript Service</a> instead of making an AJAX call directly to the endpoints.</p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-country-and-state-service-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-country-and-state-service-js" data-toggle="tab">JS</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-country-and-state-service-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;select</span> <span class="na">id=</span><span class="s">"country"</span><span class="nt">&gt;&lt;/select&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;select</span> <span class="na">id=</span><span class="s">"state"</span><span class="nt">&gt;&lt;/select&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-country-and-state-service-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

<span class="c1">// Let's make sure the DOM is ready</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">selectCountry</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">selectState</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#state'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">service</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
  
  <span class="c1">// Load Countries</span>
  <span class="nx">service</span><span class="p">.</span><span class="nx">getCountries</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">countries</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">countries</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">selectCountry</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'&lt;option value="'</span> <span class="o">+</span> <span class="nx">countries</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Id</span> <span class="o">+</span> <span class="s1">'"&gt;'</span> <span class="o">+</span> <span class="nx">countries</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Description</span> <span class="o">+</span> <span class="s1">'&lt;/option&gt;'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
  
  <span class="c1">// Watch Countries Change</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'.countries'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'change'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  
    <span class="c1">// Load States</span>
    <span class="nx">service</span><span class="p">.</span><span class="nx">getStates</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">states</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">selectState</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">states</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">selectState</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'&lt;option value="'</span> <span class="o">+</span> <span class="nx">states</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Id</span> <span class="o">+</span> <span class="s1">'"&gt;'</span> <span class="o">+</span> <span class="nx">states</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Description</span> <span class="o">+</span> <span class="s1">'&lt;/option&gt;'</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>

<span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-recurrence">Recurrence Example</h3> <p>In this example, we're back to "proceeding directly to payment," as opposed to using the Payment 2.0 Part. This means we'll need to collect the donor information.</p> <p>Using recurrence with the Advanced Donation Form can be a little tricky, in that the fields which are required, differs depending on the frequency of the recurrence. For example, the Month field is only valid and required if the Frequency field is set to Annually (4).</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-recurrence-html" data-toggle="tab">HTML</a></li> <li><a href="#example-recurrence-js" data-toggle="tab">JS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-recurrence-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;h3&gt;</span>Donor Information<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"first-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"last-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"email"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">"address"</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"city"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"state"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"zip"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"country"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;h2&gt;</span>Recurrence<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Frequency<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"frequency"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Weekly<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>Monthly<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Quarterly<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>Annually<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Start Date<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"start-date"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Day of Week<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"day-of-week"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"0"</span><span class="nt">&gt;</span>Sunday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Monday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>Tuesday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Wednesday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>Thursday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>Friday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6"</span><span class="nt">&gt;</span>Saturday<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Day of Month<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"day-of-month"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option&gt;</span>1<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>2<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>3<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>4<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>5<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>6<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>7<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>8<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>9<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>10<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>11<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>12<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>13<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>14<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>15<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>16<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>17<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>18<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>19<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>20<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>21<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>22<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>23<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>24<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>25<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>26<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>27<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>28<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>29<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>30<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>31<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">"btn-donate"</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-recurrence-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="c1">// Let's make sure the DOM is ready</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)</span>
    <span class="p">);</span>
    
    <span class="c1">// Create the donation object we'll send</span>
    <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
    <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
      <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">Designations</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="na">Amount</span><span class="p">:</span> <span class="mf">5.00</span><span class="p">,</span>
            <span class="na">DesignationId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our success handler</span>
    <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our error handler</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 
      
      <span class="c1">// Add the information our user has typed</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#first-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#last-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#address'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">City</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#city'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">State</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#state'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#zip'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">Country</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="p">}</span>
      <span class="p">};</span>
      
      <span class="c1">// The following fields are always required</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">Frequency</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#frequency'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">StartDate</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#start-date'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">};</span>
      
      <span class="c1">// The remaining required values are different depending on what frequency the user selects</span>
      <span class="kd">var</span> <span class="nx">frequency</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#frequency'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="k">switch</span> <span class="p">(</span><span class="nx">frequency</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
          <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">DayOfWeek</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#day-of-week'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
          <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">DayOfMonth</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#day-of-month'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
          <span class="c1">// Purposefully letting selection fall through (no "break")</span>
        <span class="k">case</span> <span class="mi">4</span><span class="p">:</span>
          <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">Month</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#month'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">};</span>
        
      <span class="c1">// Submit our donation</span>
      <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>
    
  <span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-tribute">Tribute Example</h3> <p>In this example, we're back to "proceeding directly to payment," as opposed to using the Payment 2.0 Part. This means we'll need to collect the donor information. I've also introduced the ability to add a tribute.</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-tribute-html" data-toggle="tab">HTML</a></li> <li><a href="#example-tribute-js" data-toggle="tab">JS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-tribute-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;h3&gt;</span>Donor Information<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"first-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"last-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"email"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">"address"</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"city"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"state"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"zip"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"country"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;h3&gt;</span>Tribute Information<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"tribute-first-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"tribute-last-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Description<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">"tribute-description"</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>
      
<span class="nt">&lt;h3&gt;</span>Acknowledgee Information<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"acknowledgee-first-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"acknowledgee-last-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"acknowledgee-email"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">"acknowledgee-address"</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"acknowledgee-city"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"acknowledgee-state"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"acknowledgee-zip"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"acknowledgee-country"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>
      
<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">"btn-donate"</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-tribute-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="c1">// Let's make sure the DOM is ready</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)</span>
    <span class="p">);</span>
    
    <span class="c1">// Create the donation object we'll send</span>
    <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
    <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
      <span class="na">Tribute</span><span class="p">:</span> <span class="p">{},</span>
      <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">Designations</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="na">Amount</span><span class="p">:</span> <span class="mf">5.00</span><span class="p">,</span>
            <span class="na">DesignationId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our success handler</span>
    <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our error handler</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 
      
      <span class="c1">// Add the information our user has typed</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#first-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#last-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#address'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">City</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#city'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">State</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#state'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#zip'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">Country</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="c1">// Add our tribute information</span>
      <span class="c1">// See REST api tech reference for more information on the Type field</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Tribute</span><span class="p">.</span><span class="nx">TributeDefintion</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">Type</span><span class="p">:</span> <span class="s1">'Tribute'</span><span class="p">,</span>      
        <span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#tribute-first-name'</span><span class="p">),</span>
        <span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#tribute-last-name'</span><span class="p">),</span>
        <span class="na">Description</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'tribute-description'</span><span class="p">)</span>
      <span class="p">};</span>
      
      <span class="c1">// Add our acknowledgee information</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Tribute</span><span class="p">.</span><span class="nx">Acknowledgee</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#acknowledgee-first-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#acknowledgee-last-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#acknowledgee-address'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">City</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#acknowledgee-city'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">State</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#acknowledgee-state'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#acknowledgee-zip'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">Country</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#acknowledgee-country'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="p">}</span>
      <span class="p">};</span>
      
      <span class="c1">// Submit our donation</span>
      <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>
    
  <span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-consent">Consent Information Example</h3> <p>Using the <a href="/bbis/reference/rest/#consentapi">Consent endpoints</a>, you can quickly populate the available consents. This example uses jQuery to make an AJAX request. We also wrap this functionality in the <a href="/bbis/reference/javascript/#consentservice">Consent JavaScript Service</a>, which is shown in this example.</p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-consent-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-consent-js" data-toggle="tab">JS</a> </li> <li> <a href="#example-consent-css" data-toggle="tab">CSS</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-consent-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"myModal"</span> <span class="na">class=</span><span class="s">"modal-content"</span> <span class="na">style=</span><span class="s">"display:none"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;fieldset</span> <span class="na">style=</span><span class="s">"border:none;"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;legend</span> <span class="na">style=</span><span class="s">"width:535px"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"consentTitle"</span><span class="nt">&gt;</span>Consent Start<span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;hr</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"consentStatement"</span><span class="nt">&gt;&lt;/label&gt;</span>
        <span class="nt">&lt;/legend&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">value=</span><span class="s">""</span> <span class="na">id=</span><span class="s">"hdnCRMSolicitCode"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentTable"</span> <span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentTableBody"</span> <span class="na">id=</span><span class="s">"consentOption"</span> <span class="na">style=</span><span class="s">'border-spacing:0px;'</span><span class="nt">&gt;</span> 
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentTableRow"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentTableHead consentTableHeader"</span><span class="nt">&gt;</span>Communication Type<span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentTableHead consentTableHeader"</span><span class="nt">&gt;</span>Opt-in<span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentTableHead consentTableHeader"</span><span class="nt">&gt;</span>Opt-out<span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;legend&gt;</span>
           <span class="nt">&lt;p&gt;&lt;a</span> <span class="na">id=</span><span class="s">"privacylink"</span><span class="nt">&gt;</span>View Privacy Policy<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
            <span class="nt">&lt;button</span> <span class="na">style=</span><span class="s">"display:none"</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span> <span class="na">type=</span><span class="s">"button"</span><span class="nt">&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
        <span class="nt">&lt;/legend&gt;</span>
    <span class="nt">&lt;/fieldset&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-consent-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

 <span class="c1">// Let's make sure the DOM is ready</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

  <span class="c1">// Create an instance of the DonationService</span>
  <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">));</span>
     
  <span class="c1">//Id of a consent part</span>
  <span class="kd">var</span> <span class="nx">consentPartId</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">cnstType</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'cnsttype'</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"True"</span><span class="p">);</span><span class="c1">//True means overlay</span>

   <span class="c1">//Create the donation object we'll send</span>
  <span class="c1">//In order to simplify our examples, some of this information is hard-coded.</span>
  <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
  <span class="na">BBSPReturnUri</span><span class="p">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span>
  <span class="na">BBSPTemplateSitePageId</span><span class="p">:</span> <span class="mi">000</span><span class="p">,</span>
  <span class="p">};</span>

  <span class="c1">// Create our success handler</span>
  <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
  <span class="p">};</span>   

  <span class="c1">// Create our error handler</span>
  <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
  <span class="p">};</span>
  
  <span class="c1">//Bind Consent Options</span>
  <span class="kd">function</span> <span class="nx">bindConsentOptions</span><span class="p">(</span><span class="nx">solicitCodes</span><span class="p">){</span>
  
   <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">solicitCodes</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>	  
    <span class="c1">//Add Separator</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableRow'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell' style='text-align:left; font-weight:bold;'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">)));</span>	 
    <span class="p">}</span>
	
    <span class="k">else</span> <span class="p">{</span>
    <span class="c1">//Add Consent Solicit Code</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableRow'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"1"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">1</span><span class="p">))));</span>                            
    <span class="p">}</span>
	<span class="c1">//Add Advanced Consent Solicit Code</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableRow'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"1"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">1</span><span class="p">))));</span>                            
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Add Solicit Code</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableRow'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"checkbox"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">)));</span>
     <span class="p">}}});</span>
  <span class="p">}</span>
  

  <span class="c1">//Bind Consent </span>
  <span class="kd">function</span> <span class="nx">bindConsent</span><span class="p">()</span> <span class="p">{</span>

     <span class="nx">consentOptionService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">ConsentOptionService</span><span class="p">();</span>
     <span class="nx">consentOptionService</span><span class="p">.</span><span class="nx">getConsentOptions</span><span class="p">(</span><span class="nx">consentPartId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>

     <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">cnstType</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">SolicitCodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span> <span class="p">}</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentTitle"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">"&lt;b&gt;&lt;/b&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"Title"</span><span class="p">]);</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMSolicitCode"</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#hdnCRMSolicitCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMSolicitCode"</span><span class="p">]);</span> <span class="p">}</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentStatement"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"ConsentStatement"</span><span class="p">]);</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"PrivacyPolicy"</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#privacylink"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"onclick"</span><span class="p">,</span> <span class="s2">"javascript:window.open('"</span> <span class="o">+</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"PrivacyPolicy"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"', '_blank' ,height=600, width=800, resizable='yes', scrollbars='yes' )"</span><span class="p">);</span>
     <span class="p">}</span> 
     <span class="k">else</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#privacylink"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span> <span class="p">}</span>
 
     <span class="c1">//bind consent options</span>
     <span class="nx">bindConsentOptions</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">SolicitCodes</span><span class="p">);</span>
           
     <span class="c1">//add asterisk mark on required consent</span>
     <span class="kd">var</span> <span class="nx">requiredRows</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption div[IsRequired]"</span><span class="p">);</span>
     <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">requiredRows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="nx">requiredRows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"true"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption div[id="</span> <span class="o">+</span> <span class="nx">requiredRows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">"id"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">)</span>
	 <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"div:first"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">"&lt;span style='color:red;'&gt;*&lt;/span&gt;"</span><span class="p">);</span> <span class="p">}</span> <span class="p">}</span>

     <span class="p">});</span>
  <span class="p">}</span>

  <span class="c1">//submit the donation</span>
  <span class="kd">function</span> <span class="nx">sendData</span><span class="p">()</span> <span class="p">{</span>
     
     <span class="kd">var</span> <span class="nx">consentOptions</span> <span class="o">=</span> <span class="p">[];</span>
     <span class="kd">var</span> <span class="nx">solicitCodeCount</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"div[id='consentOption'] div[isRequired]"</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">solicitCodeCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;=</span> <span class="nx">solicitCodeCount</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">consentOptions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
      <span class="na">SolicitCodeID</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"div[id='consentOption'] div[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">id</span><span class="p">,</span>
      <span class="na">IsRequired</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"div[id='consentOption'] div[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">isrequired</span><span class="p">,</span>
      <span class="na">ConsentPreferenceCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"div[id='consentOption'] div[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">find</span><span class="p">(</span><span class="s1">':checked'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
     <span class="p">});</span>
     <span class="p">}}</span>
  
     <span class="c1">// Add the consent information our user has typed</span>
     <span class="nx">donation</span><span class="p">.</span><span class="nx">ContactConsents</span> <span class="o">=</span> <span class="p">{</span> <span class="na">ConsentPartId</span><span class="p">:</span> <span class="nx">consentPartId</span><span class="p">,</span> <span class="na">SolicitCodes</span><span class="p">:</span> <span class="nx">consentOptions</span> <span class="p">};</span>
     <span class="c1">// Submitting the donation</span>
     <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
     <span class="p">}</span>   

  <span class="c1">// when consent type is overlay</span>
  <span class="kd">function</span> <span class="nx">openDialog</span><span class="p">()</span> <span class="p">{</span>
     <span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">dialog</span><span class="p">({</span>
     <span class="na">dialogClass</span><span class="p">:</span> <span class="s2">"no-close"</span><span class="p">,</span>
     <span class="na">modal</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
     <span class="na">autoOpen</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
     <span class="na">maxHeight</span><span class="p">:</span> <span class="mi">393</span><span class="p">,</span>
     <span class="na">maxWidth</span><span class="p">:</span> <span class="mi">474</span>
     <span class="p">});</span>

     <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">dialog</span><span class="p">(</span><span class="s1">'open'</span><span class="p">);</span>
	 <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">"modal"</span><span class="p">);</span>
     <span class="nx">$</span><span class="p">(</span><span class="s1">'.ui-widget-overlay'</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">"overlay"</span><span class="p">);</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"width"</span><span class="p">,</span> <span class="s2">"100%"</span><span class="p">);</span>
     <span class="p">});</span>
     <span class="p">}</span>

  <span class="c1">//call on donate button click</span>
  <span class="kd">function</span> <span class="nx">onSubmitClick</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"div[id='consentOption'] div[isRequired]"</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">//if consent type is overlay</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">cnstType</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'cnstFilled'</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"0"</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">openDialog</span><span class="p">();</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal button"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal button"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"cnstFilled"</span><span class="p">,</span> <span class="s2">"1"</span><span class="p">);</span>
     <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">dialog</span><span class="p">(</span><span class="s1">'close'</span><span class="p">);</span>
      <span class="nx">sendData</span><span class="p">();</span>
     <span class="p">});</span>
     <span class="p">}</span>
     <span class="c1">//if consent data is already submitted or consent type is inline</span>
     <span class="k">else</span> <span class="p">{</span>
     <span class="nx">sendData</span><span class="p">();</span>
     <span class="p">}</span>
     <span class="p">}</span>
     <span class="c1">//if no consent</span>
     <span class="k">else</span> <span class="p">{</span>
     <span class="nx">sendData</span><span class="p">();</span>
     <span class="p">}</span>
     <span class="p">}</span>

     <span class="c1">//bind consent on form</span>
     <span class="nx">bindConsent</span><span class="p">();</span>
     <span class="c1">// Attach our event listener to the donate button</span>
     <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
     <span class="nx">onSubmitClick</span><span class="p">();</span>
     <span class="p">});</span>

  <span class="p">});</span>
 <span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> <div class="tab-pane" id="example-consent-css"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* css other than bootstrap */</span>
 
<span class="nc">.consentTable</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">table</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">535px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.consentTableRow</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">table-row</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.consentTableHeading</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">table-header-group</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span><span class="m">800px</span><span class="p">;</span>
  <span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.consentTableCell</span><span class="o">,</span> <span class="nc">.consentTableHead</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">table-cell</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">3px</span> <span class="m">10px</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span><span class="m">100px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.consentTableHeader</span><span class="p">{</span>
 <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="no">black</span><span class="p">;</span>
 <span class="nl">border-color</span><span class="p">:</span> <span class="m">#efefef</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.consentTableFoot</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">table-footer-group</span><span class="p">;</span>
  <span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.consentTableBody</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">table-row-group</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="nc">.consentTableRow</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">odd</span><span class="o">)</span> <span class="p">{</span> 
  <span class="nl">background</span><span class="p">:</span> <span class="m">#efefef</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#privacylink</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>
  <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">underline</span>
<span class="p">}</span>
<span class="nf">#privacylink</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
<span class="p">}</span>       
<span class="nc">.no-close</span> <span class="nc">.ui-dialog-titlebar</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.modal</span><span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">fixed</span><span class="p">;</span>
  <span class="nl">top</span><span class="p">:</span> <span class="m">25%</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span> 
  <span class="nl">overflow</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">max-height</span><span class="p">:</span> <span class="m">393px</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">565px</span><span class="p">;</span>
  <span class="nl">z-index</span><span class="p">:</span> <span class="m">101</span> <span class="p">;</span>
<span class="p">}</span>
<span class="nc">.overlay</span><span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">fixed</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="no">gray</span><span class="p">;</span>
  <span class="nl">opacity</span><span class="p">:</span> <span class="m">0.6</span><span class="p">;</span>
  <span class="nl">top</span><span class="p">:</span> <span class="m">0%</span><span class="p">;</span>
  <span class="nl">left</span><span class="p">:</span> <span class="m">0%</span><span class="p">;</span>
<span class="p">}</span></code></pre></div> </div> <h3 id="example-secure-payments">Using Blackbaud Secure Payments</h3> <p>Integration with the Blackbaud Secure Payments service has been updated in the Advanced Donation Form.</p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-secure-payments-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-secure-payments-js" data-toggle="tab">JS</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-secure-payments-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"first-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"last-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"email"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">"address"</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"city"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"state"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"zip"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"country"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">"btn-donate"</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-secure-payments-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

<span class="c1">// Let's make sure the DOM is ready</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)</span>
    <span class="p">);</span>

  <span class="c1">// Create the donation object we'll send</span>
  <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
  <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
    <span class="na">BBSPReturnUri</span><span class="p">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span>
    <span class="na">BBSPTemplateSitePageId</span><span class="p">:</span> <span class="mi">000</span><span class="p">,</span>
    <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="na">Designations</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="na">Amount</span><span class="p">:</span> <span class="mf">5.00</span><span class="p">,</span>
          <span class="na">DesignationId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// Create our success handler</span>
  <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Create our error handler</span>
  <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Attach our event listener to the donate button</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Stop the button from submitting the form</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 

    <span class="c1">// Add the information our user has typed</span>
    <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#first-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#last-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#address'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">City</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#city'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">State</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#state'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#zip'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">Country</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="c1">// Submit our donation</span>
    <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-complete">Styling + Error Handling + API Integration</h3> <p>This last example is meant to show a more realistic real-world example of the Advanced Donation Form API, including all the necessary error handling and styling. This example also incorporates the use of the <a href="/bbis/reference/javascript/#countryservice">CountryService</a>, which is the javascript wrapper for the <a href="/bbis/reference/rest/#countryapi">Country REST API endpoint</a>.</p> <p>Whereas all the other examples are designed to be inserted into an Advanced Donation Form Part, the complete example is designed to be completely standalone - even on a different server than the one serving your BBIS website.</p> <p>Please note you'll need to update the references in the example below to your BBIS installation.</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-complete-html" data-toggle="tab">HTML</a></li> <li><a href="#example-complete-js" data-toggle="tab">JS</a></li> <li><a href="#example-complete-css" data-toggle="tab">CSS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-complete-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span> <span class="na">ng-app=</span><span class="s">"bbADF"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
  
  <span class="nt">&lt;title&gt;</span>ADF - Complete Example<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="nt">&gt;</span>
  
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"example-complete.css"</span><span class="nt">&gt;</span>
    
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  
  <span class="nt">&lt;form</span> <span class="na">class=</span><span class="s">"form-horizontal"</span> <span class="na">ng-controller=</span><span class="s">"DonationController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;h1&gt;</span>Advanced Donation Form <span class="nt">&lt;small&gt;</span>Complete Example<span class="nt">&lt;/small&gt;&lt;/h1&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
          
          <span class="nt">&lt;h3&gt;</span>Donor Information<span class="nt">&lt;/h3&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Donor.Firstname"</span> <span class="na">placeholder=</span><span class="s">"Firstname"</span> <span class="na">required</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Donor.Lastname"</span> <span class="na">placeholder=</span><span class="s">"Lastname"</span> <span class="na">required</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>

          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Address"</span> <span class="na">ng-model=</span><span class="s">"Donor.Address.StreetAddress"</span><span class="nt">&gt;&lt;/textarea&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Donor.Address.Country"</span> <span class="na">ng-change=</span><span class="s">"getStates()"</span> <span class="na">ng-options=</span><span class="s">"c.Description for c in countries track by c.Id"</span> <span class="na">ng-change=</span><span class="s">"getStates()"</span> <span class="na">required</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Country<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Donor.Address.State"</span> <span class="na">ng-options=</span><span class="s">"s.Description for s in states track by s.Id"</span> <span class="na">required</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>State<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>

          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-9"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"City"</span> <span class="na">ng-model=</span><span class="s">"Donor.Address.City"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Zip"</span> <span class="na">ng-model=</span><span class="s">"Donor.Address.PostalCode"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>

          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-8"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Email"</span> <span class="na">ng-model=</span><span class="s">"Donor.EmailAddress"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Phone"</span> <span class="na">ng-model=</span><span class="s">"Donor.Phone"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-model=</span><span class="s">"Gift.IsCorporate"</span> <span class="na">btn-checkbox</span><span class="nt">&gt;</span>
                <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-fw"</span> <span class="na">ng-class=</span><span class="s">"{ 'fa-square-o': !Gift.IsCorporate, 'fa-check-square-o': Gift.IsCorporate }"</span><span class="nt">&gt;&lt;/i&gt;</span> Corporate?
              <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-8"</span> <span class="na">ng-show=</span><span class="s">"Gift.IsCorporate"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Donor.OrganizationName"</span> <span class="na">placeholder=</span><span class="s">"Organization Name"</span> <span class="na">required</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-model=</span><span class="s">"Gift.isAnonymous"</span> <span class="na">btn-checkbox</span><span class="nt">&gt;</span>
                <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-fw"</span> <span class="na">ng-class=</span><span class="s">"{ 'fa-square-o': !Gift.isAnonymous, 'fa-check-square-o': Gift.isAnonymous }"</span><span class="nt">&gt;&lt;/i&gt;</span> Anonymous?
              <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
        
          <span class="nt">&lt;h3&gt;</span>Gift Information<span class="nt">&lt;/h3&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"btn-group"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-repeat=</span><span class="s">"option in amounts"</span> <span class="na">ng-model=</span><span class="s">"defaults.amount"</span> <span class="na">btn-radio=</span><span class="s">"option.amount"</span> <span class="na">required</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">ng-bind=</span><span class="s">"option.label"</span><span class="nt">&gt;&lt;/span&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"btn-group"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-repeat=</span><span class="s">"option in payments"</span> <span class="na">ng-model=</span><span class="s">"defaults.payments"</span> <span class="na">btn-radio=</span><span class="s">"option.id"</span> <span class="na">required</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">ng-bind=</span><span class="s">"option.label"</span><span class="nt">&gt;&lt;/span&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span> <span class="na">ng-show=</span><span class="s">"defaults.amount == 'other'"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group-addon"</span><span class="nt">&gt;</span>$<span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Amount"</span> <span class="na">placeholder=</span><span class="s">"Other Amount"</span> <span class="na">ng-required=</span><span class="s">"Gift.SelectedAmount == 'other'"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Comments"</span> <span class="na">placeholder=</span><span class="s">"Comments"</span><span class="nt">&gt;&lt;/textarea&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"defaults.designation"</span> <span class="na">ng-options=</span><span class="s">"designation.label for designation in designations track by designation.id"</span> <span class="na">required</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Designation<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"btn-group"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-repeat=</span><span class="s">"option in types"</span> <span class="na">ng-model=</span><span class="s">"defaults.type"</span> <span class="na">btn-radio=</span><span class="s">"option.id"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">ng-bind=</span><span class="s">"option.label"</span><span class="nt">&gt;&lt;/span&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">ng-show=</span><span class="s">"defaults.type == 'recurring'"</span><span class="nt">&gt;</span>

            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Recurrence.StartDate"</span> <span class="na">datepicker-popup=</span><span class="s">"MMMM dd, yyyy"</span> <span class="na">is-open=</span><span class="s">"openedStartDate"</span> <span class="na">show-button-bar=</span><span class="s">"false"</span> <span class="na">min-date=</span><span class="s">"minDate"</span> <span class="na">placeholder=</span><span class="s">"Start Date"</span> <span class="na">required</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"input-group-btn"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-click=</span><span class="s">"open($event, 'openedStartDate')"</span><span class="nt">&gt;</span>
                      <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-calendar"</span><span class="nt">&gt;&lt;/i&gt;</span>
                    <span class="nt">&lt;/button&gt;</span>
                  <span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Recurrence.EndDate"</span> <span class="na">datepicker-popup=</span><span class="s">"MMMM dd, yyyy"</span> <span class="na">is-open=</span><span class="s">"openedEndDate"</span> <span class="na">show-button-bar=</span><span class="s">"false"</span> <span class="na">min-date=</span><span class="s">"minDate"</span> <span class="na">placeholder=</span><span class="s">"End Date"</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"input-group-btn"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-click=</span><span class="s">"open($event, 'openedEndDate')"</span><span class="nt">&gt;</span>
                      <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-calendar"</span><span class="nt">&gt;&lt;/i&gt;</span>
                    <span class="nt">&lt;/button&gt;</span>
                  <span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Recurrence.Frequency"</span> <span class="na">required</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Frequency<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Weekly<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>Monthly<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Quarterly<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>Annually<span class="nt">&lt;/option&gt;</span>
                <span class="nt">&lt;/select&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">ng-show=</span><span class="s">"Gift.Recurrence.Frequency"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span> <span class="na">ng-show=</span><span class="s">"Gift.Recurrence.Frequency == 1"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Recurrence.Month"</span> <span class="na">required</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Month<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>January<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>February<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>March<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>April<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>May<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6"</span><span class="nt">&gt;</span>June<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7"</span><span class="nt">&gt;</span>July<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"8"</span><span class="nt">&gt;</span>August<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"9"</span><span class="nt">&gt;</span>September<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"10"</span><span class="nt">&gt;</span>October<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"11"</span><span class="nt">&gt;</span>November<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"12"</span><span class="nt">&gt;</span>December<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;/select&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span> <span class="na">ng-show=</span><span class="s">"Gift.Recurrence.Frequency == 1"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Recurrence.DayOfWeek"</span> <span class="na">required</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Day of Week<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"0"</span><span class="nt">&gt;</span>Sunday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Monday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>Tuesday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Wednesday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>Thursday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>Friday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6"</span><span class="nt">&gt;</span>Saturday<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;/select&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span> <span class="na">ng-show=</span><span class="s">"Gift.Recurrence.Frequency != 1"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Reccurence.DayOfMonth"</span> <span class="na">required</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Day of Month<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>3<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>4<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>5<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6"</span><span class="nt">&gt;</span>6<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7"</span><span class="nt">&gt;</span>7<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"8"</span><span class="nt">&gt;</span>8<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"9"</span><span class="nt">&gt;</span>9<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"10"</span><span class="nt">&gt;</span>10<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"11"</span><span class="nt">&gt;</span>11<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"12"</span><span class="nt">&gt;</span>12<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"13"</span><span class="nt">&gt;</span>13<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"14"</span><span class="nt">&gt;</span>14<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"15"</span><span class="nt">&gt;</span>15<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"16"</span><span class="nt">&gt;</span>16<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"17"</span><span class="nt">&gt;</span>17<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"18"</span><span class="nt">&gt;</span>18<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"19"</span><span class="nt">&gt;</span>19<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"20"</span><span class="nt">&gt;</span>20<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"21"</span><span class="nt">&gt;</span>21<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"22"</span><span class="nt">&gt;</span>22<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"23"</span><span class="nt">&gt;</span>23<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"24"</span><span class="nt">&gt;</span>24<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"25"</span><span class="nt">&gt;</span>25<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"26"</span><span class="nt">&gt;</span>26<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"27"</span><span class="nt">&gt;</span>27<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"28"</span><span class="nt">&gt;</span>28<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"29"</span><span class="nt">&gt;</span>29<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"30"</span><span class="nt">&gt;</span>30<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"31"</span><span class="nt">&gt;</span>31<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;/select&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>

          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>

          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
              
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
          
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;p&gt;</span>
            <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-lg btn-primary btn-donate"</span> <span class="na">ng-click=</span><span class="s">"log()"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-lock"</span><span class="nt">&gt;&lt;/i&gt;</span> Donate
            <span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  
  <span class="nt">&lt;/form&gt;</span>
  
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.11.2/ui-bootstrap-tpls.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//code.jquery.com/jquery-1.11.1.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>  
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//chs6bobbyear02.blackbaud.global/Client/Scripts/easyXDM/easyXDM.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//chs6bobbyear02.blackbaud.global/Client/Scripts/API/BBAPI-min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"example-complete.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-complete-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="s1">'use strict'</span><span class="p">;</span>

<span class="c1">// Create our Angular application</span>
<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'bbADF'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ui.bootstrap'</span><span class="p">])</span>
<span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'DonationController'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">CountryService</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Controls the available donor types</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">defaults</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="c1">// single | recurring</span>
    <span class="na">payments</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="c1">// credit | later</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mi">0</span> <span class="c1">// dollar amount | other</span>
  <span class="p">};</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">types</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="s1">'single'</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'Single Gift'</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="s1">'recurring'</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'Recurring Gift'</span>
    <span class="p">}</span>
  <span class="p">];</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">payments</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="s1">'credit'</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'Credit Card'</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="s1">'later'</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'Bill Me Later'</span>
    <span class="p">}</span>
  <span class="p">];</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">amounts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">amount</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'$5'</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">amount</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'$10'</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">amount</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'$25'</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">amount</span><span class="p">:</span> <span class="s1">'other'</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'Other'</span>
    <span class="p">}</span>
  <span class="p">];</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">designations</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="s1">'0001'</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'Designation 1'</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="s1">'0002'</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'Designation 2'</span>
    <span class="p">}</span>
  <span class="p">];</span>

  <span class="c1">// Calendar manipulation</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">minDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">open</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$event</span><span class="p">,</span> <span class="nx">opened</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="nx">$event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
    <span class="nx">$scope</span><span class="p">[</span><span class="nx">opened</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="c1">// Temporarily debugging</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">};</span>
  
  <span class="c1">// Request the states for a particular country</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">getStates</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">CountryService</span><span class="p">.</span><span class="nx">getStates</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">Donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">Country</span><span class="p">.</span><span class="nx">Id</span><span class="p">).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">states</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">}).</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s1">'Error loading states.'</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">CountryService</span><span class="p">.</span><span class="nx">getCountries</span><span class="p">().</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">countries</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
  <span class="p">}).</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">'Error loading countries.'</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">})</span>
<span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">'CountryService'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="c1">// Baseurl when using the Advanced Donation Form API</span>
  <span class="kd">var</span> <span class="nx">baseurl</span> <span class="o">=</span> <span class="s1">'http://chs6bobbyear02.blackbaud.global/Webapi/'</span><span class="p">;</span>

  <span class="c1">// Request countries</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">getCountries</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">$http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">baseurl</span> <span class="o">+</span> <span class="s1">'Country'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// Request states when a country is selected</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">getStates</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">$http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">baseurl</span> <span class="o">+</span> <span class="s1">'Country/'</span> <span class="o">+</span> <span class="nx">id</span> <span class="o">+</span> <span class="s1">'/State'</span><span class="p">);</span>
  <span class="p">};</span>

<span class="p">});</span></code></pre></div> </div> <div class="tab-pane" id="example-complete-css"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* Currently only using Bootstrap styles */</span></code></pre></div> </div> </div> <h3 id="adf-generator">Advanced Donation Form Generator</h3> <h4>Overview:</h4> <p>The ADF form generator is a custom content part to be used as an internal tool to generate a barebones ADF template HTML document that developers can use as a starting point for their ADF work. The workflow for using the generator is outlined below.</p> <ol> <li>Create a new custom content part using the Administration menu in BBIS.</li> <li>Copy and paste the "Editor" and "Web page display" HTML code available on <a href=https://github.com/blackbaud-community/BBIS-Advanced-Donation-Form/tree/master/example-adf-generator>Github</a>.</li> <li>In the initialize javascript function field, put "init_form" as the function name.</li> <li>Fill out the name and description to your liking.</li> <li>Save the content part.</li> <li>Create a new page from Site Explorer. It should be hidden from the public facing site, as it will only be used to host the generator tool for internal access.</li> <li>On the newly created internal page, insert the custom content part created above. Use the edit feature to fill in the options you would like your form to have/not have. Remember to populat your designations list.</li> <li>Select save and the form will be updated with your selections</li> <li>Select "View This Page" in the top left corner of the BBIS site, and then click the "Get HTML" button on the donation form. A modal will appear from which you can copy the code for your own ADF.</li> <li>Paste the code into your favorite text editor. There are some "TODO" tags throughout the code that you must act on prior to the ADF going live. Most just require you to delete leftover code from the generator. Use your editor's "find" feature (Ctrl + F) to find all strings matching "TODO" to make sure you see them all.</li> <li>Uncomment and fill out the data in the first javascript function. Follow the example format to ensure it works correctly. GUID's can be found using the special selectors or querying the appropriate database tables.</li> <li>Copy and paste the completed code to an ADF part. You now have a basic, fully functioning, donation form up and running.</li> </ol> <h4>Known Issues:</h4> <ul> <li>Tributes need tribute definition details / types in order for them to work correctly. This was not implemented in the wizard. In order for tributes to function correctly, you will need to populate the relevant properties yourself. See the <a href="/bbis/reference/rest/#partiddonationcreate">ADF "Create Donation" API</a> for more information.</li> <li>Inputted details such as merchant account ID and BBSPReturnUri do not carry over to the form options. Instead, manually enter the information as outlined in step 11.</li> </ul> <p>The entirety of this code is publicly available on Github. Community input and pull requests are welcome and appreciated.</p> </div> <!-- .col-md-9 --> </div> <!-- .row --> </div> <!-- .container --> </div> <!-- .content --> <div class="footer"> <div class="container"> <div class="row"> <div class="col-xs-6 col-sm-4"> <p> <a href="/bbis"> <img src="/bbis/assets/img/logo-lonely.png" alt="Blackbaud Internet Solutions" class="img-responsive" /> </a> </p> <ul class="list-unstyled"> <li> <a href="/bbis/start/">Getting Started</a> </li> <li> <a href="/bbis/guide/">Developer Guide</a> </li> <li> <a href="/bbis/reference/">Technical Reference</a> </li> <li> <a href="/bbis/code/">Code Samples</a> </li> <li> <a href="/bbis/help/">Help</a> </li> </ul> <!-- .list-unstyled --> </div> <!-- .col-sm-4 --> <div class="col-xs-6 col-sm-4"> <p> <a href="http://www.bbdevnetwork.com" target="_blank"> <img src="/bbis/assets/img/logo-developer-small.png" alt="Blackbaud Developer Network" class="img-responsive" /> </a> </p> <ul class="list-unstyled"> <li> <a href="https://www.blackbaud.com/nonprofit-resources/sdk-resources.aspx" target="_blank"> Blackbaud Infinity SDK </a> </li> <li> <a href="http://open.convio.com/" target="_blank"> Blackbaud Luminate </a> </li> <li> <a href="https://www.blackbaud.com/files/support/netcommunity-developer/netcommunity-developer.htm" target="_blank"> Blackbaud NetCommunity </a> </li> <li> <a href="https://www.blackbaud.com/files/support/guides/re7ent/api.pdf" target="_blank"> Blackbaud Raiser's Edge </a> </li> <li> <a href="http://developer.everydayhero.com" target="_blank"> Everyday Hero </a> </li> </ul> <!-- .list-unstyled --> </div> <!-- .col-sm-4 --> <div class="col-sm-4"> <div class="row"> <div class="col-sm-12"> <ul class="list-inline bb-love"> <li> <a href="http://www.blackbaud.com" target="_blank"> <img src="/bbis/assets/img/logo-bb-white.png" alt="Blackbaud" class="img-responsive" /> </a> </li> <li> <i class="fa fa-lg fa-plus"></i> </li> <li> <a href="http://www.github.com/blackbaud-community" target="_blank"> <img src="/bbis/assets/img/logo-github.png" alt="GitHub" class="img-responsive" /> </a> </li> </ul> <!-- .list-inline --> </div> <!-- .col-sm-12 --> </div> <!-- .row --> <div class="row"> <div class="col-sm-12"> <ul class="list-inline social-icons"> <li> <a href="https://github.com/blackbaud-community" target="_blank"> <i class="fa fa-github"></i> </a> </li> <li> <a href="https://plus.google.com/113382459921828617974" target="_blank"> <i class="fa fa-google-plus"></i> </a> </li> <li> <a href="http://twitter.com/blackbaud" target="_blank"> <i class="fa fa-twitter"></i> </a> </li> <li> <a href="https://www.facebook.com/blackbaud" target="_blank"> <i class="fa fa-facebook"></i> </a> </li> <li> <a href="http://www.youtube.com/user/blackbaudinc" target="_blank"> <i class="fa fa-youtube"></i> </a> </li> </ul> <!-- .list-inline --> </div> <!-- .col-sm-12 --> </div> <!-- .row --> </div> <!-- .col-sm-4 --> </div> <!-- .row --> </div> <!-- .container --> </div> <!-- .footer --> <div class="copyright"> <div class="container"> <div class="row"> <div class="col-sm-6"> <p>&copy; 2014 Blackbaud, Inc. All rights reserved.</p> </div> <div class="col-sm-6"> <p class="feedback-link"> <a href="/bbis/help/">Provide Feedback</a> </p> </div> </div> </div> </div> <!-- .copyright --> <div id="omnibar"> &nbsp; </div> <script src="//code.jquery.com/jquery-1.11.1.min.js"></script> <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script> <script src="/bbis/assets/js/combine.site.js?v=2018-08-01-03:46:17"></script> </body> </html>