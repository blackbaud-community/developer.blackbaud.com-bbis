<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Blackbaud Internet Solutions | Developer Guide | Advanced Donation Form</title> <link rel="icon" href="/bbis/assets/img/favicon.ico" type="image/ico"> <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"> <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"> <link rel="stylesheet" href="/bbis/assets/css/combine.site.css?v=2020-09-02-23:04:16"> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-2418840-40', 'auto'); ga('send', 'pageview'); </script> </head> <body class="layout-compress section-guide subsection-advanced-donation-form"> <nav class="navbar" role="navigation" id="top"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bb-navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a href="/bbis/" class="navbar-brand"> <img src="/bbis/assets/img/logo-bbis.png" alt="Blackbaud Internet Solutions" class="img-responsive" /> </a> </div> <!-- navbar-header --> <div class="collapse navbar-collapse" id="bb-navbar"> <ul class="nav navbar-nav navbar-right"> <li > <a href="/bbis/start/"> Getting Started </a> </li> <li class="active"> <a href="/bbis/guide/"> Developer Guide </a> </li> <li > <a href="/bbis/reference/"> Technical Reference </a> </li> <li class=""> <a href="/bbis/code/"> Code Samples </a> </li> <li > <a href="/bbis/help/"> <i class="fa fa-fw fa-question-circle hidden-xs"></i> <span class="visible-xs-inline">Help</span> </a> </li> </ul> </div> <!-- .navbar-collapse --> </div> <!-- .container --> </nav> <!-- .navbar.navbar-inverse --> <div class="content"> <div class="container"> <div class="row"> <div class="col-md-3 hidden-xs hidden-sm"> <div class="sidebar"> <ul class="nav nav-pills nav-stacked nav-sidebar"> <!-- Ridiculous Bootstrap Scrollspy bug that required this nested linkage to function properly --> <li class="hidden"> <a href="#top">Top</a> <ul class="nav"> <li> <a href="#top">Top</a> </li> </ul> </li> <li class="back-to back-to-section"> <a href="/bbis/guide/"> Developer Guide </a> </li> <li class=" active scrollspy-start "> <a href="/bbis/guide/advanced-donation-form/">Advanced Donation Form</a> <ul class="nav"> <li> <a href="#setup">Setup</a> </li> <li> <a href="#example-barebones">Example - Barebones</a> </li> <li> <a href="#example-payment-2-0">Example - Payment 2.0</a> </li> <li> <a href="#example-blackbaud-checkout-SP25">Example - Blackbaud Checkout (New)</a> </li> <li> <a href="#example-blackbaud-checkout">Example - Blackbaud Checkout (Legacy)</a> </li> <li> <a href="#example-pledge-installments">Example - Pledge Installments</a> </li> <li> <a href="#example-country-and-state">Example - Country and State</a> </li> <li> <a href="#example-designation">Example - Designation</a> </li> <li> <a href="#example-recurrence">Example - Recurrence</a> </li> <li> <a href="#example-tribute">Example - Tribute</a> </li> <li> <a href="#example-consent">Example - Consent</a> </li> <li> <a href="#example-direct-debit">Example - Direct Debit</a> </li> <li> <a href="#example-secure-payments">Example - Blackbaud Secure Payments</a> </li> <li> <a href="#example-complete-SP25">Example - Complete (New)</a> </li> <li> <a href="#example-complete-legacy">Example - Complete (Legacy)</a> </li> <li> <a href="#example-complete-payment2-0">Example - Complete (Payment 2.0)</a> </li> <li> <a href="#example-complete">Example - Complete</a> </li> <li> <a href="#adf-generator">ADF Generator</a> </li> </ul> </li> <li class=""> <a href="/bbis/guide/blackbaud-secure-payments/">Blackbaud Secure Payments</a> </li> <li class=""> <a href="/bbis/guide/custom-content-parts/">Custom Content Parts</a> </li> <li class=""> <a href="/bbis/guide/custom-framework-parts/">Custom Framework Parts</a> </li> <li class=""> <a href="/bbis/guide/custom-handlers/">Custom Handlers</a> </li> <li class=""> <a href="/bbis/guide/user-imports/">User Imports</a> </li> <li class=""> <a href="/bbis/guide/responsive-design/">Responsive Design</a> </li> <li class="back-to back-to-top"> <a href="#top" class=""> <i class="fa fa-caret-square-o-up"></i> </a> </li> </ul> </div> </div> <!-- .col-md-3 --> <div class="col-md-9 readability"> <h2 id="setup">Advanced Donation Form</h2> <p>The Advanced Donation Form Part and accompanying REST APIs were released in version 3.0 of BBIS. They allow completely custom interfaces to be created for the donation experience, relaying the necessary information to the backend via the REST API or JavaScript SDK. For a complete list of possible options, be sure to visit the <a href="/bbis/reference/rest/#donationapi">technical reference</a> for more information.</p> <p>All the examples below expect a page with a configured instance of the Advanced Donation Form Part on it. It's also important the examples below are meant to be as simple and straight-forward as possible. In a real-world scenario, we highly suggestion following standard web practices for form design, including labels for accessibility, and client-side data validation.</p> <p>For all the Advanced Donation Form examples, I've split the grouped the content by language - HTML, CSS, or JS; however, when using the code in the Advanced Donation Form Part, the code is combined into a single textarea. Please be certain to wrap the content with appropriate <code>&lt;script&gt;</code> or <code>&lt;style&gt;</code> tag.</p> <h3 id="example-barebones">Barebones Example</h3> <p>In our first example, we'll create a very barebones example of a donation form, supplying only the required fields. For this example we've included no styling or error handling, other than displaying a message in the console. I've also hard-coded the designation and amount fields.</p> <p class="alert alert-warning"><span class="label label-warning">Important</span> The DonationService constructor requires the Advanced Donation Form Part ID. In the examples below, we dynamically find this ID. You could hard-code this value if you prefer. The technique below assumes there's only one Advanced Donation Form Part per page.</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-barebones-html" data-toggle="tab">HTML</a></li> <li><a href="#example-barebones-js" data-toggle="tab">JS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-barebones-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"first-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"last-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"email"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">"address"</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"city"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"state"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"zip"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"country"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">"btn-donate"</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-barebones-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Let's make sure the DOM is ready</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)</span>
    <span class="p">);</span>

    <span class="c1">// Create the donation object we'll send</span>
    <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
    <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
      <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">Designations</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="na">Amount</span><span class="p">:</span> <span class="mf">5.00</span><span class="p">,</span>
            <span class="na">DesignationId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="c1">// Create our success handler</span>
    <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="c1">// Create our error handler</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 

      <span class="c1">// Add the information our user has typed</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#first-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#last-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#address'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">City</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#city'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">State</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#state'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#zip'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">Country</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="c1">// Submit our donation</span>
      <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-payment-2-0">Using the Payment 2.0 Part</h3> <p>When using the Payment 2.0 Part, the information required is reduced. For example, Donor information is should no longer be provided. Again, we're not including any styling or error handling, but I have introduced the ability to select a donation amount and designation.</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-payment-2-0-html" data-toggle="tab">HTML</a></li> <li><a href="#example-payment-2-0-js" data-toggle="tab">JS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-payment-2-0-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Amount<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"amount"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>5<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"10"</span><span class="nt">&gt;</span>10<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"20"</span><span class="nt">&gt;</span>20<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Designation<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"designation"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="nt">&gt;</span>Example Designation 1<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"00000000-0000-0000-0000-000000000000"</span><span class="nt">&gt;</span>Example Designation 2<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>
      
<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">"btn-donate"</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-payment-2-0-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="c1">// Let's make sure the DOM is ready</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)</span>
    <span class="p">);</span>
    
    <span class="c1">// Create the donation object we'll send</span>
    <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
    <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">Designations</span><span class="p">:</span> <span class="p">[]</span>
      <span class="p">}</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our success handler</span>
    <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our error handler</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 
      
      <span class="c1">// Add the information our user has typed</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Designations</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="na">Amount</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#amount'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">DesignationId</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#designation'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">});</span>
      
      <span class="c1">// Submit our donation</span>
      <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>
    
  <span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <p class="alert alert-info"><span class="label label-info">Note</span> The <a href="/bbis/reference/javascript/#donationservice">DonationService</a> attempts to redirect to the BBSPCheckoutUri or PaymentPageUri if either of them exist (in that order) after a successful callback from the <a href="/bbis/reference/javascript/#donationservice-createdonation">createDonation</a> method.</p> ï»¿<h3 id="example-blackbaud-checkout-SP25">Blackbaud Checkout Example (New)</h3> <p>This example will take advantage of the transaction workflow optimization code included in our Service Pack 25 release.</p> <p>This feature can be used to configure the payment checkout pop up on ADF by using the payment's <a href="/bbis/reference/rest/#checkoutapi">Checkout endpoints</a>. This functionality is wrapped under <a href="/bbis/reference/javascript/#checkoutservice">Checkout Service</a>, as shown in the example. This will enhance the end user experience and provide better troubleshooting around the missing transactions. </p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-blackbaud-checkout-SP25-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-blackbaud-checkout-SP25-js" data-toggle="tab">JS</a> </li> <li> <a href="#example-blackbaud-checkout-SP25-css" data-toggle="tab">CSS</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-blackbaud-checkout-SP25-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- This div is for showing the layover after the payment completion and before the confirmation page(use when payment checkout pop up is configured)--&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-blackbaud-checkout-SP25-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>


 <span class="c1">// Create an instance of the DonationService</span>
  <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)),</span>
         <span class="nx">CheckoutModel</span><span class="o">=</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">checkoutData</span><span class="p">),</span>
         <span class="nx">serverMonth</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"serverMonth"</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
         <span class="nx">serverDay</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"serverDay"</span><span class="p">),</span>
         <span class="nx">serverYear</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"serverYear"</span><span class="p">),</span>
         <span class="nx">ServerDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">serverYear</span><span class="p">,</span> <span class="nx">serverMonth</span><span class="p">,</span> <span class="nx">serverDay</span><span class="p">);</span>
		 
		 <span class="nx">InitializeBBCheckout</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">donationAmount</span> <span class="o">=</span> <span class="nx">getDonationAmount</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">numberOfInstallments</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#number-of-installments"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">installmentAmount</span> <span class="o">=</span> <span class="nx">ds</span><span class="p">.</span><span class="nx">getRecurringGiftInstallmentAmount</span><span class="p">(</span><span class="nx">donationAmount</span><span class="p">,</span> <span class="nx">numberOfInstallments</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">installmentAmt</span> <span class="o">=</span> <span class="nx">installmentAmount</span><span class="p">;</span>

  <span class="c1">//Create the donation object we'll send</span>
  <span class="c1">//In order to simplify our examples, some of this information is hard-coded.</span>
  <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
  <span class="na">BBSPReturnUri</span><span class="p">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span>
  <span class="na">BBSPTemplateSitePageId</span><span class="p">:</span> <span class="mi">000</span><span class="p">,</span>
  <span class="na">PartId</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">),</span>
  <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">Designations</span><span class="p">:</span> <span class="p">[]</span>
      <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// Create our success handler</span>
  <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
  <span class="p">};</span>   

  <span class="c1">// Create our error handler</span>
  <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
  <span class="p">};</span>
 
<span class="c1">//Checkout Payment popup is loaded in this form.</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'form[data-formtype="bbCheckout"]'</span><span class="p">).</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="s1">'&lt;form method=</span><span class="se">\'</span><span class="s1">get</span><span class="se">\'</span><span class="s1"> id=</span><span class="err">\</span><span class="s1">"paymentForm</span><span class="err">\</span><span class="s1">" data-formtype=</span><span class="se">\'</span><span class="s1">bbCheckout</span><span class="se">\'</span><span class="s1"> data-disable-submit=</span><span class="se">\'</span><span class="s1">false</span><span class="se">\'</span><span class="s1"> novalidate&gt;&lt;</span><span class="err">\</span><span class="s1">/form&gt;'</span><span class="p">;</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">'body'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">form</span><span class="p">);</span>
    <span class="p">}</span>


    <span class="nx">$</span><span class="p">(</span><span class="s2">"#paymentForm"</span><span class="p">).</span><span class="nx">submit</span><span class="p">(</span><span class="kd">function</span> <span class="nx">paymentComplete</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// prevent form from refreshing and show the transaction token</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="p">});</span>

	
	 <span class="kd">var</span>  <span class="nx">SrtDt</span><span class="p">,</span> <span class="nx">donationData</span><span class="p">,</span> <span class="nx">ServerDate</span><span class="p">,</span>
        <span class="nx">checkoutGenericError</span> <span class="o">=</span> <span class="s2">"There was an error while performing the operation.The page will be refreshed"</span><span class="p">;</span>
		
	<span class="c1">//return the donation amount	</span>
	<span class="kd">function</span> <span class="nx">getDonationAmount</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#amtOther"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
         <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#txtAmount"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[name='radioAmount']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
	
	 

    <span class="c1">//#region CCCheckoutPayment</span>

	<span class="c1">//return which payment method is selected on the page</span>
    <span class="kd">function</span> <span class="nx">GetPaymentType</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">paymentMethod</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[name='paymentMethod']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">paymentMethod</span><span class="p">;</span>
    <span class="p">}</span>

	
    <span class="kd">function</span> <span class="nx">getUrlVars</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">vars</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">hash</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">hashes</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">'?'</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">'&amp;'</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">hashes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">hash</span> <span class="o">=</span> <span class="nx">hashes</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">'='</span><span class="p">);</span>
            <span class="nx">vars</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">hash</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
            <span class="nx">vars</span><span class="p">[</span><span class="nx">hash</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">hash</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">vars</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="c1">//this is the function that calls the payment api to open the checkout pop up with all the parameters</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">makePayment</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">donor</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Donor</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">selectedCountry</span><span class="o">=</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#country :selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">);</span>
		<span class="kd">var</span> <span class="nx">selectedState</span><span class="o">=</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#state :selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">);</span>
		
		<span class="k">if</span><span class="p">(</span><span class="nx">selectedCountry</span> <span class="o">&amp;&amp;</span> <span class="nx">selectedCountry</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"gb"</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="nx">selectedCountry</span><span class="o">=</span><span class="s2">"UK"</span><span class="p">;</span>
		<span class="p">}</span>
        
		<span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">Amount</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">?</span> <span class="nx">installmentAmt</span> <span class="p">:</span> <span class="nx">getDonationAmount</span><span class="p">();</span>            
		<span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressCity</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">City</span><span class="p">;</span>
		<span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressCountry</span> <span class="o">=</span> <span class="nx">selectedCountry</span><span class="p">;</span>
		<span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressLine</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">StreetAddress</span><span class="p">;</span>
		<span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressPostCode</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">PostalCode</span><span class="p">;</span>
		<span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressState</span> <span class="o">=</span> <span class="nx">selectedState</span><span class="p">;</span>
		<span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressEmail</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">EmailAddress</span><span class="p">;</span>
		<span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressFirstName</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">FirstName</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="p">(</span><span class="nx">donor</span><span class="p">.</span><span class="nx">MiddleName</span> <span class="p">?</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">MiddleName</span><span class="p">:</span><span class="s2">""</span><span class="p">);</span>
		<span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressLastName</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">LastName</span><span class="p">;</span>
		<span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">Cardholder</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">FirstName</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">LastName</span><span class="p">;</span>
		<span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">UseVisaCheckout</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">);</span>
		<span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">UseMasterpass</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">);</span>
		<span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">UseApplePay</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">);</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TransactionType</span> <span class="o">=</span> <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">TransactionType</span><span class="p">.</span><span class="nx">Card_Not_Present</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">CardToken</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		
        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">ProcessNow</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">CardToken</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">DataKey</span><span class="p">;</span>
            <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TransactionType</span> <span class="o">=</span> <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">TransactionType</span><span class="p">.</span><span class="nx">Store_Card</span><span class="p">;</span> <span class="c1">//Store card transactions</span>
        <span class="p">}</span> 
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span> <span class="p">)</span> <span class="p">{</span>      <span class="c1">//Set CardToken value only in case of recurring gifts.</span>
            <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">CardToken</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">DataKey</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">//Set Donor Info so that it will be passed to finish the transaction at the end.</span>
		<span class="nx">data</span><span class="p">.</span><span class="nx">DonationSource</span> <span class="o">=</span> <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">DonationSource</span><span class="p">.</span><span class="nx">ADF</span><span class="p">;</span>
		<span class="nx">data</span><span class="p">.</span><span class="nx">Type</span><span class="o">=</span><span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TranType</span><span class="p">.</span><span class="nx">Donation</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">DonorInfo</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">openCheckout</span><span class="p">();</span>
    <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">InitializeBBCheckout</span><span class="p">()</span> 
   <span class="p">{</span>
	   
	   <span class="nx">bbcheckout</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BBCheckoutProcessor</span><span class="p">(</span><span class="nx">checkoutFunctions</span><span class="p">(),</span><span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">APIControllerName</span><span class="p">,</span><span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">TokenId</span><span class="p">,</span><span class="s1">'[class*="donationForm"]'</span><span class="p">);</span>
	   <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">Key</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">PublicKey</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TransactionType</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">TransactionType</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">ClientAppName</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">ClientAppName</span><span class="p">;</span>        
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">MerchantAccountId</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">MerchantAccountId</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">IsEmailRequired</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">IsEmailRequired</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">IsNameVisible</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">IsNameVisible</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">PrimaryColor</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">PrimaryColor</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">SecondaryColor</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">SecondaryColor</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">FontFamily</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">FontFamily</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">UseCaptcha</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">UseCaptcha</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">WorkflowType</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">WorkFlowType</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">HandleBrowserClosing</span> <span class="o">=</span> <span class="p">(</span><span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">HandleBrowserClosing</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">?</span> <span class="s2">"True"</span> <span class="p">:</span> <span class="s2">"False"</span><span class="p">);</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">APITokenID</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">TokenId</span><span class="p">;</span>
	   <span class="c1">// You can add your own message to display on screen, after checkout pop-up close</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TempConfirmationHtml</span> <span class="o">=</span> <span class="s2">"Thank you for your contribution, please wait while we process your transaction."</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">intializeCheckout</span><span class="p">();</span>
   <span class="p">}</span>

<span class="kd">function</span> <span class="nx">checkoutFunctions</span><span class="p">()</span>
   <span class="p">{</span>
    <span class="c1">//  If you don't have anything to do then you don't add any events from below mentioned checkoutEvents </span>
	<span class="nx">checkoutEvents</span><span class="o">=</span><span class="p">{</span>
	<span class="na">checkoutComplete</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//Place any code if you want to do anything on checkout complete.</span>

        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">postCheckoutFinish</span><span class="p">();</span>
    <span class="p">},</span>

    <span class="na">checkoutError</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//Place any code if you want to do anything on error.</span>
    <span class="p">},</span>

    <span class="na">checkoutExpired</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">//Place any code if you want to do anything on Checkout expired.</span>
    <span class="p">},</span>

    <span class="na">checkoutReady</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">//Place any code if you want to do anything on Checkout Ready.</span>
    <span class="p">},</span>

    <span class="na">browserClose</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">//Place any code if you want to do anything on Checkout Browser closing.</span>

    <span class="p">},</span>

    <span class="na">checkoutCancel</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">//Place any code if you want to do anything on Checkout cancel.</span>
    <span class="p">},</span>

    <span class="na">checkoutLoaded</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">//Place any code if you want to do anything on Checkout loaded.</span>
    <span class="p">}</span>

		  
	<span class="p">}</span>
    <span class="k">return</span> <span class="nx">checkoutEvents</span><span class="p">;</span>	  
   <span class="p">}</span>



	<span class="c1">//to check for recurring gift that is to be processed today or not (this is check for call stored card payment api)</span>
    <span class="kd">function</span> <span class="nx">isProcessNow</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">recStartDate</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#start-date"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">frequency</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">dayOfMonth</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#day-of-month'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">dayOfWeek</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#day-of-week"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">month</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#month'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>

        <span class="kd">var</span> <span class="nx">startDateIsTodayDate</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">recurrrentStartDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">recStartDate</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">serverDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">ServerDate</span><span class="p">);</span>


        <span class="k">if</span> <span class="p">(</span>
            <span class="nx">recurrrentStartDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">===</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
            <span class="nx">recurrrentStartDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">===</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
            <span class="nx">recurrrentStartDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">===</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span>
        <span class="p">)</span> <span class="p">{</span>
            <span class="nx">startDateIsTodayDate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>

            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">//Weekly Frequency</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="nx">startDateIsTodayDate</span> <span class="o">&amp;&amp;</span> <span class="nx">dayOfWeek</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDay</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="c1">//Mothly and Quarterly frequency</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">||</span> <span class="nx">frequency</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="nx">startDateIsTodayDate</span> <span class="o">&amp;&amp;</span> <span class="nx">dayOfMonth</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="c1">//Annually frequency</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">isProcessedNow</span> <span class="o">=</span>
                <span class="nx">startDateIsTodayDate</span>
                <span class="o">&amp;&amp;</span> <span class="nx">dayOfMonth</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span>
                <span class="o">&amp;&amp;</span> <span class="nx">month</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">//Every 4 weeks</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="nx">startDateIsTodayDate</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">isProcessedNow</span><span class="p">;</span>


    <span class="p">};</span>

	<span class="c1">//this function call when we click on donate button</span>
	<span class="kd">function</span> <span class="nx">sendData</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">CheckoutModel</span> <span class="o">&amp;&amp;</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">MACheckoutSupported</span> <span class="o">&amp;&amp;</span> <span class="nx">GetPaymentType</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">ProcessCCPayment</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
	
	 <span class="c1">//use this method for credit card payment through popup</span>
    <span class="kd">function</span> <span class="nx">ProcessCCPayment</span><span class="p">()</span> <span class="p">{</span>
        
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">donation</span><span class="p">;</span>

            <span class="nx">onValidationSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
			
			<span class="nx">makePayment</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="nx">onValidationFailed</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
        <span class="p">};</span>

        <span class="nx">ds</span><span class="p">.</span><span class="nx">validateDonationRequest</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">onValidationSuccess</span><span class="p">,</span> <span class="nx">onValidationFailed</span><span class="p">);</span>

    <span class="p">}</span>
		
		
	<span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 
	  <span class="nx">sendData</span><span class="p">();</span>
	  <span class="p">});</span>
		
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> <div class="tab-pane" id="example-blackbaud-checkout-SP25-css"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* css other than bootstrap */</span></code></pre></div> </div> </div> ï»¿<h3 id="example-blackbaud-checkout">Blackbaud Checkout Example (Legacy)</h3> <p> This example will continue to work with Service Pack 25 release, however, it will not utilize the transaction workflow optimization code included as part of that release. Please refer to <a href="/bbis/guide/advanced-donation-form/#example-blackbaud-checkout-SP25">Example - Blackbaud Checkout (New)</a> for updated sample that incorporates the optimized Blackbaud Checkout Code. </p> <p>This feature can be used to configure the payment checkout pop up on ADF by using the payment's <a href="/bbis/reference/rest/#checkoutapi">Checkout endpoints</a>. This functionality is wrapped under <a href="/bbis/reference/javascript/#checkoutservice">Checkout Service</a>, as shown in the example. This will enhance the end user experience and provide better troubleshooting around the missing transactions. </p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-blackbaud-checkout-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-blackbaud-checkout-js" data-toggle="tab">JS</a> </li> <li> <a href="#example-blackbaud-checkout-css" data-toggle="tab">CSS</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-blackbaud-checkout-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- This div is for showing the layover after the payment completion and before the confirmation page(use when payment checkout pop up is configured)--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"bbspLoadingOverlay"</span> <span class="na">class=</span><span class="s">"bbspLoadingOverlay"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-blackbaud-checkout-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>


 <span class="c1">// Create an instance of the DonationService</span>
  <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)),</span>
         <span class="nx">serverMonth</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"serverMonth"</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
         <span class="nx">serverDay</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"serverDay"</span><span class="p">),</span>
         <span class="nx">serverYear</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"serverYear"</span><span class="p">),</span>
         <span class="nx">ServerDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">serverYear</span><span class="p">,</span> <span class="nx">serverMonth</span><span class="p">,</span> <span class="nx">serverDay</span><span class="p">);</span>
		 
  <span class="kd">var</span> <span class="nx">donationAmount</span> <span class="o">=</span> <span class="nx">getDonationAmount</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">numberOfInstallments</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#number-of-installments"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">installmentAmount</span> <span class="o">=</span> <span class="nx">ds</span><span class="p">.</span><span class="nx">getRecurringGiftInstallmentAmount</span><span class="p">(</span><span class="nx">donationAmount</span><span class="p">,</span> <span class="nx">numberOfInstallments</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">installmentAmt</span> <span class="o">=</span> <span class="nx">installmentAmount</span><span class="p">;</span>

  <span class="c1">//Create the donation object we'll send</span>
  <span class="c1">//In order to simplify our examples, some of this information is hard-coded.</span>
  <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
  <span class="na">BBSPReturnUri</span><span class="p">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span>
  <span class="na">BBSPTemplateSitePageId</span><span class="p">:</span> <span class="mi">000</span><span class="p">,</span>
  <span class="na">PartId</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">),</span>
  <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">Designations</span><span class="p">:</span> <span class="p">[]</span>
      <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// Create our success handler</span>
  <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
  <span class="p">};</span>   

  <span class="c1">// Create our error handler</span>
  <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
  <span class="p">};</span>
 
<span class="c1">//Checkout Payment popup is loaded in this form.</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'form[data-formtype="bbCheckout"]'</span><span class="p">).</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="s1">'&lt;form method=</span><span class="se">\'</span><span class="s1">get</span><span class="se">\'</span><span class="s1"> id=</span><span class="err">\</span><span class="s1">"paymentForm</span><span class="err">\</span><span class="s1">" data-formtype=</span><span class="se">\'</span><span class="s1">bbCheckout</span><span class="se">\'</span><span class="s1"> data-disable-submit=</span><span class="se">\'</span><span class="s1">false</span><span class="se">\'</span><span class="s1"> novalidate&gt;&lt;</span><span class="err">\</span><span class="s1">/form&gt;'</span><span class="p">;</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">'body'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">form</span><span class="p">);</span>
    <span class="p">}</span>


    <span class="nx">$</span><span class="p">(</span><span class="s2">"#paymentForm"</span><span class="p">).</span><span class="nx">submit</span><span class="p">(</span><span class="kd">function</span> <span class="nx">paymentComplete</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// prevent form from refreshing and show the transaction token</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="p">});</span>

	
	 <span class="kd">var</span>  <span class="nx">SrtDt</span><span class="p">,</span> <span class="nx">publicKey</span><span class="p">,</span> <span class="nx">donationData</span><span class="p">,</span> <span class="nx">EditorContent</span><span class="p">,</span> <span class="nx">ServerDate</span><span class="p">,</span>
        <span class="nx">checkoutGenericError</span> <span class="o">=</span> <span class="s2">"There was an error while performing the operation.The page will be refreshed"</span><span class="p">;</span>
		
	<span class="c1">//return the donation amount	</span>
	<span class="kd">function</span> <span class="nx">getDonationAmount</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#amtOther"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
         <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#txtAmount"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[name='radioAmount']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
	
	 <span class="c1">//Handle Generic error </span>
    <span class="kd">function</span> <span class="nx">handleError</span><span class="p">(</span><span class="nx">errorMessage</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">"#bbspLoadingOverlay"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">checkoutGenericError</span><span class="p">);</span>
        <span class="nx">location</span><span class="p">.</span><span class="nx">reload</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">//#region CCCheckoutPayment</span>

	<span class="c1">//return which payment method is selected on the page</span>
    <span class="kd">function</span> <span class="nx">GetPaymentType</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">paymentMethod</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[name='paymentMethod']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">paymentMethod</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="c1">//set the public key by using public key service that is used to open the checkout pop up</span>
    <span class="kd">function</span> <span class="nx">GetPublicKey</span><span class="p">()</span> <span class="p">{</span>
     
    <span class="nx">onPublicKeySuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">reply</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">publicKey</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">reply</span><span class="p">.</span><span class="nx">Data</span><span class="p">).</span><span class="nx">PublicKey</span><span class="p">;</span>
    <span class="p">};</span>
    
	<span class="nx">onPublicKeyFailure</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">};</span>
    
	<span class="nx">ds</span><span class="p">.</span><span class="nx">getCheckoutPublicKey</span><span class="p">(</span><span class="nx">onPublicKeySuccess</span><span class="p">,</span> <span class="nx">onPublicKeyFailure</span><span class="p">);</span>

    <span class="p">}</span>


	<span class="c1">//get all the information that is configured on the editor used to open the checkout pop up</span>
    <span class="kd">function</span> <span class="nx">GetEditorInformation</span><span class="p">(</span><span class="nx">partId</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">onEditorContentSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">onSuccess</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">donation</span><span class="p">.</span><span class="nx">MerchantAccountId</span> <span class="o">=</span> <span class="nx">content</span><span class="p">.</span><span class="nx">MerchantAccountID</span><span class="p">;</span>
            <span class="nx">EditorContent</span> <span class="o">=</span> <span class="nx">content</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="nx">onEditorContentFailure</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">onFail</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">};</span>

        <span class="nx">ds</span><span class="p">.</span><span class="nx">getADFEditorContentInformation</span><span class="p">(</span><span class="nx">partId</span><span class="p">,</span> <span class="nx">onEditorContentSuccess</span><span class="p">,</span> <span class="nx">onEditorContentFailure</span><span class="p">);</span>

    <span class="p">}</span>


    <span class="kd">function</span> <span class="nx">getUrlVars</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">vars</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">hash</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">hashes</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">'?'</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">'&amp;'</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">hashes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">hash</span> <span class="o">=</span> <span class="nx">hashes</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">'='</span><span class="p">);</span>
            <span class="nx">vars</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">hash</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
            <span class="nx">vars</span><span class="p">[</span><span class="nx">hash</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">hash</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">vars</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="c1">//this is the function that calls the payment api to open the checkout pop up with all the parameters</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">makePayment</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">opened</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">checkout</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SecureCheckout</span><span class="p">(</span><span class="nx">handleCheckoutComplete</span><span class="p">,</span> <span class="nx">handleCheckoutError</span><span class="p">,</span> <span class="nx">handleCheckoutCancelled</span><span class="p">,</span> <span class="nx">handleCheckoutLoaded</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">donor</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Donor</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">selectedCountry</span><span class="o">=</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#country :selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">);</span>
		<span class="kd">var</span> <span class="nx">selectedState</span><span class="o">=</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#state :selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">);</span>
		
		<span class="k">if</span><span class="p">(</span><span class="nx">selectedCountry</span> <span class="o">&amp;&amp;</span> <span class="nx">selectedCountry</span><span class="o">==</span><span class="s2">"GB"</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="nx">selectedCountry</span><span class="o">=</span><span class="s2">"UK"</span><span class="p">;</span>
		<span class="p">}</span>
        <span class="nx">donationData</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"key"</span><span class="p">:</span> <span class="nx">publicKey</span><span class="p">,</span>
            <span class="s1">'Amount'</span><span class="p">:</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">?</span> <span class="nx">installmentAmt</span> <span class="p">:</span> <span class="nx">getDonationAmount</span><span class="p">(),</span>
            <span class="s1">'UseCaptcha'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">RecaptchRequired</span><span class="p">,</span>
            <span class="s1">'BillingAddressCity'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">City</span><span class="p">,</span>
            <span class="s1">'BillingAddressCountry'</span><span class="p">:</span> <span class="nx">selectedCountry</span><span class="p">,</span>
            <span class="s1">'BillingAddressLine'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">StreetAddress</span><span class="p">,</span>
            <span class="s1">'BillingAddressPostCode'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">PostalCode</span><span class="p">,</span>
            <span class="s1">'BillingAddressState'</span><span class="p">:</span> <span class="nx">selectedState</span><span class="p">,</span>
            <span class="s1">'BillingAddressEmail'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">EmailAddress</span><span class="p">,</span>
            <span class="s1">'BillingAddressFirstName'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">FirstName</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span><span class="nx">donor</span><span class="p">.</span><span class="nx">MiddleName</span><span class="p">,</span>
            <span class="s1">'BillingAddressLastName'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">LastName</span><span class="p">,</span>
            <span class="s1">'Cardholder'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">FirstName</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">LastName</span><span class="p">,</span>
            <span class="s1">'ClientAppName'</span><span class="p">:</span> <span class="s1">'BBIS'</span><span class="p">,</span>
            <span class="s1">'MerchantAccountId'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">MerchantAccountID</span><span class="p">,</span>
            <span class="s1">'IsEmailRequired'</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'PrimaryColor'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">PrimaryFontColor</span><span class="p">,</span>
            <span class="s1">'SecondaryColor'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">SecondaryFontColor</span><span class="p">,</span>
            <span class="s1">'FontFamily'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">FontType</span><span class="p">,</span>
            <span class="s1">'IsNameVisible'</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="s1">'UseVisaCheckout'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">UseVisaPass</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">),</span>
          <span class="s1">'UseMasterpass'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">UseMasterPass</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">),</span>
          <span class="s1">'UseApplePay'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">UseApplePay</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">)</span>
        <span class="p">};</span>
       <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span> <span class="p">)</span>
		<span class="p">{</span>
			<span class="nx">donationData</span><span class="p">.</span><span class="nx">CardToken</span> <span class="o">=</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">DataKey</span><span class="p">;</span>
		<span class="p">}</span>

        <span class="c1">//check server date and start date here -- if same then make transaction today</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">ProcessNow</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">checkout</span><span class="p">.</span><span class="nx">processStoredCard</span><span class="p">(</span><span class="nx">donationData</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>

            <span class="k">return</span> <span class="nx">checkout</span><span class="p">.</span><span class="nx">processCardNotPresent</span><span class="p">(</span><span class="nx">donationData</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

	<span class="c1">//to check for recurring gift that is to be processed today or not (this is check for call stored card payment api)</span>
    <span class="kd">function</span> <span class="nx">isProcessNow</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">recStartDate</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#start-date"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">frequency</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">dayOfMonth</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#day-of-month'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">dayOfWeek</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#day-of-week"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">month</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#month'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>

        <span class="kd">var</span> <span class="nx">startDateIsTodayDate</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">recurrrentStartDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">recStartDate</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">serverDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">ServerDate</span><span class="p">);</span>


        <span class="k">if</span> <span class="p">(</span>
            <span class="nx">recurrrentStartDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">===</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
            <span class="nx">recurrrentStartDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">===</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
            <span class="nx">recurrrentStartDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">===</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span>
        <span class="p">)</span> <span class="p">{</span>
            <span class="nx">startDateIsTodayDate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>

            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">//Weekly Frequency</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="nx">startDateIsTodayDate</span> <span class="o">&amp;&amp;</span> <span class="nx">dayOfWeek</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDay</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="c1">//Mothly and Quarterly frequency</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">||</span> <span class="nx">frequency</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="nx">startDateIsTodayDate</span> <span class="o">&amp;&amp;</span> <span class="nx">dayOfMonth</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="c1">//Annually frequency</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">isProcessedNow</span> <span class="o">=</span>
                <span class="nx">startDateIsTodayDate</span>
                <span class="o">&amp;&amp;</span> <span class="nx">dayOfMonth</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span>
                <span class="o">&amp;&amp;</span> <span class="nx">month</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">//Every 4 weeks</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="nx">startDateIsTodayDate</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">isProcessedNow</span><span class="p">;</span>


    <span class="p">};</span>

	<span class="c1">//when checkout popup is successfully loaded</span>
    <span class="nx">handleDonationCreated</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">orderID</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Data</span><span class="p">).</span><span class="nx">OrderId</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="c1">//when checkout popup is fail to load</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleDonationCreateFailed</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">handleError</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span>

	<span class="c1">//when the payment is successfully completed and we have to show the confirnmation screen</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handlePaymentComplete</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">"#bbspLoadingOverlay"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
        <span class="c1">//confirmation message show here</span>
		<span class="c1">//donationform</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">".form"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
		<span class="c1">//confirmation div</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>

       <span class="nx">$</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Data</span><span class="p">).</span><span class="nx">confirmationHTML</span><span class="p">);</span>
    <span class="p">}</span>

	<span class="c1">//this function called when the checkout popup is loaded on a page</span>
    <span class="kd">function</span> <span class="nx">handleCheckoutLoaded</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">opened</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">opened</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#bbCheckoutPaymentIframe"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s1">'src'</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">tid</span> <span class="o">=</span> <span class="nx">getUrlVars</span><span class="p">(</span><span class="nx">url</span><span class="p">)[</span><span class="s2">"t"</span><span class="p">];</span>

            <span class="c1">//save transaction id in global variable. Will be used throughout the transaction</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">transactionIDl</span> <span class="o">=</span> <span class="nx">tid</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">tid</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">data</span><span class="p">.</span><span class="nx">TokenId</span> <span class="o">=</span> <span class="nx">tid</span><span class="p">;</span>
                <span class="nx">ds</span><span class="p">.</span><span class="nx">checkoutDonationCreate</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">handleDonationCreated</span><span class="p">,</span> <span class="nx">handleDonationCreateFailed</span><span class="p">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="c1">//when we cancel the payment pop up then unbind all the binded events on checkout popup</span>
    <span class="kd">function</span> <span class="nx">UnBindPaymentCheckoutEvents</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">"checkoutComplete"</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">"checkoutLoaded"</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">"checkoutError"</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">"checkoutCancel"</span><span class="p">);</span>
    <span class="p">}</span>

	<span class="c1">//this is called when the payment is completed</span>
    <span class="kd">function</span> <span class="nx">handleCheckoutComplete</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">tranToken</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">"#bbspLoadingOverlay"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>

		<span class="kd">var</span> <span class="nx">Id</span><span class="o">=</span><span class="nx">tranToken</span> <span class="p">?</span> <span class="nx">tranToken</span> <span class="p">:(</span><span class="nx">event</span><span class="p">?(</span><span class="nx">event</span><span class="p">.</span><span class="nx">detail</span><span class="p">?(</span><span class="nx">event</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">transactionToken</span><span class="p">?</span><span class="nx">event</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">transactionToken</span><span class="p">:</span><span class="kc">null</span><span class="p">):</span><span class="kc">null</span><span class="p">):</span><span class="kc">null</span><span class="p">);</span>
		
        <span class="k">if</span> <span class="p">(</span><span class="nx">Id</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span><span class="p">.</span><span class="nx">TokenId</span> <span class="o">=</span> <span class="nx">Id</span><span class="p">;</span>
            <span class="nx">ds</span><span class="p">.</span><span class="nx">checkoutDonationComplete</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">handlePaymentComplete</span><span class="p">,</span> <span class="nx">handleDonationCreateFailed</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">handleError</span><span class="p">();</span>
        <span class="p">}</span>
		<span class="nx">UnBindPaymentCheckoutEvents</span><span class="p">();</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="c1">//call when there is any error while doing the payment on checkout pop up</span>
    <span class="nx">handleCheckoutError</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">errorMsg</span><span class="p">,</span> <span class="nx">errorCode</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">handleError</span><span class="p">(</span><span class="nx">errorMsg</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">//Cancel Donation if user close checkout popup</span>
    <span class="kd">function</span> <span class="nx">handleCheckoutCancelled</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="nx">ds</span><span class="p">.</span><span class="nx">checkoutDonationCancel</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFail</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//do not store this error. Already stored from server side</span>
        <span class="p">}</span>
        <span class="nx">UnBindPaymentCheckoutEvents</span><span class="p">();</span>
    <span class="p">}</span>

	<span class="c1">//this function call when we click on donate button</span>
	<span class="kd">function</span> <span class="nx">sendData</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">EditorContent</span> <span class="o">&amp;&amp;</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">MACheckoutSupported</span> <span class="o">&amp;&amp;</span> <span class="nx">GetPaymentType</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">ProcessCCPayment</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
	
	 <span class="c1">//use this method for credit card payment through popup</span>
    <span class="kd">function</span> <span class="nx">ProcessCCPayment</span><span class="p">()</span> <span class="p">{</span>
        
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">donation</span><span class="p">;</span>

            <span class="nx">onValidationSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">makePayment</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="nx">onValidationFailed</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
        <span class="p">};</span>

        <span class="nx">ds</span><span class="p">.</span><span class="nx">validateDonationRequest</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">onValidationSuccess</span><span class="p">,</span> <span class="nx">onValidationFailed</span><span class="p">);</span>

    <span class="p">}</span>
	
	<span class="c1">//Call some functions       </span>
        <span class="nx">GetEditorInformation</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">));</span>
        <span class="nx">GetPublicKey</span><span class="p">();</span>
		
		
	<span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 
	  <span class="nx">sendData</span><span class="p">();</span>
	  <span class="p">});</span>
		
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> <div class="tab-pane" id="example-blackbaud-checkout-css"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* css other than bootstrap */</span>
<span class="nc">.bbspLoadingOverlay</span> <span class="p">{</span>
<span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="nl">left</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="nl">top</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="nl">position</span><span class="p">:</span> <span class="nb">fixed</span><span class="p">;</span>
<span class="nl">z-index</span><span class="p">:</span> <span class="m">9999999</span><span class="p">;</span>
<span class="nl">background-color</span><span class="p">:</span> <span class="n">grey</span><span class="p">;</span>
<span class="nl">opacity</span><span class="p">:</span> <span class="m">0.8</span><span class="p">;</span>
<span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span></code></pre></div> </div> </div> <h3 id="example-pledge-installments">Pledge Installments Example</h3> <p>Pledge installments are the payment donor makes for a pledge according to a defiend time schedule. The example includes the HTML required to display input fields to capture required parameters for pledge installment endpoints.</p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-pledge-installments-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-pledge-installments-js" data-toggle="tab">JS</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-pledge-installments-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">"donationInformation"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;legend&gt;</span>
		<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"BBListingHeading DonationListingHeading"</span><span class="nt">&gt;</span>Gift Information<span class="nt">&lt;/span&gt;</span>
	<span class="nt">&lt;/legend&gt;</span>
	<span class="nt">&lt;div&gt;</span>
		<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"isPaymentTwo"</span><span class="nt">/&gt;</span> Check this box if you are using a Payment 2.0 part with this ADF
		<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"giftAmount"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"required"</span><span class="nt">&gt;</span>Select Gift Amount:<span class="nt">&lt;/label&gt;</span>
			<span class="nt">&lt;ul&gt;</span>
				<span class="nt">&lt;li&gt;</span>
					<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt1000"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"1000"</span> <span class="nt">/&gt;</span>
					<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt1000"</span><span class="nt">&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Platinum<span class="nt">&lt;/span&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$1,000<span class="nt">&lt;/span&gt;</span>
					<span class="nt">&lt;/label&gt;</span>
				<span class="nt">&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;</span>
					<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt500"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"500"</span> <span class="nt">/&gt;</span>
					<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt500"</span><span class="nt">&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Gold<span class="nt">&lt;/span&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$500<span class="nt">&lt;/span&gt;</span>
					<span class="nt">&lt;/label&gt;</span>
				<span class="nt">&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;</span>
					<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt100"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"100"</span> <span class="nt">/&gt;</span>
					<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt100"</span><span class="nt">&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Silver<span class="nt">&lt;/span&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$100<span class="nt">&lt;/span&gt;</span>
					<span class="nt">&lt;/label&gt;</span>
				<span class="nt">&lt;/li&gt;</span>
				<span class="nt">&lt;li&gt;</span>
					<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt25"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"25"</span> <span class="nt">/&gt;</span>
					<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt25"</span><span class="nt">&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Bronze<span class="nt">&lt;/span&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$25<span class="nt">&lt;/span&gt;</span>
					<span class="nt">&lt;/label&gt;</span>
				<span class="nt">&lt;/li&gt;</span>
				<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"other"</span><span class="nt">&gt;</span>
					<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amtOther"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"-1"</span> <span class="na">checked=</span><span class="s">"checked"</span> <span class="nt">/&gt;</span>
					<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amtOther"</span><span class="nt">&gt;</span>
						<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Enter an amount<span class="nt">&lt;/span&gt;</span>
					<span class="nt">&lt;/label&gt;</span>
					<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"txtAmount"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">placeholder=</span><span class="s">"$"</span> <span class="na">class=</span><span class="s">"BBFormTextbox"</span><span class="nt">&gt;</span>
				<span class="nt">&lt;/li&gt;</span>
			<span class="nt">&lt;/ul&gt;</span>
		<span class="nt">&lt;/div&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/fieldset&gt;</span>
        
<span class="c">&lt;!-- PLEDGE INSTALLMENT START--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"pledgeInstallments"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"required"</span><span class="nt">&gt;</span>Pledge Installment:<span class="nt">&lt;/label&gt;</span>
	<span class="nt">&lt;ul&gt;</span>
		<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"other"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"numberOfInstallments"</span><span class="nt">&gt;</span>
				Number of Installments:
			<span class="nt">&lt;/label&gt;</span>
			<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"numberOfInstallments"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">placeholder=</span><span class="s">"$"</span> <span class="na">class=</span><span class="s">"BBFormTextbox"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;/li&gt;</span>
		<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"other"</span><span class="nt">&gt;</span>
			Installment Amount:
			<span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"installmentAmount"</span><span class="nt">/&gt;</span>
		<span class="nt">&lt;/li&gt;</span>
		<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"other"</span><span class="nt">&gt;</span>
			Installment End Date:
			<span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"installmentEndDate"</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;/li&gt;</span>
	<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span>
	<span class="c">&lt;!-- PLEDGE INSTALLMENT END--&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-pledge-installments-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="c1">// Let's make sure the DOM is ready</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)</span>
    <span class="p">);</span>
    
    <span class="c1">// Create the donation object we'll send</span>
    <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
    <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
      <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">Designations</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
		  <span class="c1">//Amount has been hardcoded to 500. Replace the value with a value entered by user.</span>
            <span class="na">Amount</span><span class="p">:</span> <span class="mf">500.00</span><span class="p">,</span>
            <span class="na">DesignationId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our success handler</span>
    <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our error handler</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
	  
      <span class="c1">//if payment 2.0 is checked, No need to capture the donor information</span>
       <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">isPaymentTwo</span><span class="p">){</span>
		  <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
			<span class="na">Title</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#title"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			<span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#firstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			<span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#lastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			<span class="na">EmailAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#emailAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			<span class="na">Phone</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#phone"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			<span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
			  <span class="na">Country</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			  <span class="na">State</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			  <span class="na">City</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#city"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			  <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#streetAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
			  <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#postalCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
			<span class="p">},</span>
			<span class="na">OrganizationName</span><span class="p">:</span> <span class="nx">organizationName</span>
		  <span class="p">};</span>
	  <span class="p">}</span>
	  
	   <span class="c1">// PLEDGE INSTALLMENT BEGIN ********************************************************************************************************************************************************************************************************************************************************</span>
	  <span class="kd">var</span> <span class="nx">numberOfInstallments</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#numberOfInstallments'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
	  <span class="k">if</span> <span class="p">(</span><span class="nx">numberOfInstallments</span><span class="p">)</span> <span class="p">{</span>
	      <span class="c1">//Amount has been hardcoded to 500. Replace the value with a value entered by user.</span>
		  <span class="kd">var</span> <span class="nx">installmentAmount</span> <span class="o">=</span> <span class="nx">ds</span><span class="p">.</span><span class="nx">getRecurringGiftInstallmentAmount</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="nx">numberOfInstallments</span><span class="p">);</span>
		  <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">PledgeInstallment</span> <span class="o">=</span> <span class="p">{</span>
			  <span class="na">NumberOfInstallments</span><span class="p">:</span> <span class="nx">numberOfInstallments</span><span class="p">,</span>
			  <span class="na">InstallmentAmount</span><span class="p">:</span> <span class="nx">installmentAmount</span>
		  <span class="p">}</span>
	  <span class="p">}</span>
      <span class="c1">// PLEDGE INSTALLMENT END ********************************************************************************************************************************************************************************************************************************************************</span>
        
      <span class="c1">// Submit our donation</span>
      <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>
    
  <span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-country-and-state">Displaying Available Countries and States</h3> <p>Using the <a href="/bbis/reference/rest/#countryapi">Country and State endpoints</a>, you can quickly populate the available countries and their corresponding states. The first example uses jQuery to make an AJAX request. We also wrap this functionality in the <a href="/bbis/reference/javascript/#countryservice">Country and State JavaScript Service</a>, which is shown in the second example.</p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-country-and-state-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-country-and-state-js" data-toggle="tab">JS</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-country-and-state-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;select</span> <span class="na">id=</span><span class="s">"country"</span><span class="nt">&gt;&lt;/select&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;select</span> <span class="na">id=</span><span class="s">"state"</span><span class="nt">&gt;&lt;/select&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-country-and-state-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

<span class="c1">// Let's make sure the DOM is ready</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">selectCountry</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">selectState</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#state'</span><span class="p">);</span>
  
  <span class="c1">// Load Countries</span>
  <span class="nx">$</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">pageInformation</span><span class="p">.</span><span class="nx">rootPath</span> <span class="o">+</span> <span class="s1">'/webapi/country'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">countries</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">countries</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">selectCountry</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'&lt;option value="'</span> <span class="o">+</span> <span class="nx">countries</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Id</span> <span class="o">+</span> <span class="s1">'" iso="'</span><span class="o">+</span><span class="nx">countries</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">ISO</span><span class="o">+</span><span class="s1">'"&gt;'</span> <span class="o">+</span> <span class="nx">countries</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Description</span> <span class="o">+</span> <span class="s1">'&lt;/option&gt;'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
  
  <span class="c1">// Watch Country Change</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'change'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  
    <span class="c1">// Load States</span>
    <span class="nx">$</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">pageInformation</span><span class="p">.</span><span class="nx">rootPath</span> <span class="o">+</span> <span class="s1">'/webapi/country/'</span> <span class="o">+</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/state'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">states</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">selectState</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">states</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">selectState</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'&lt;option value="'</span> <span class="o">+</span> <span class="nx">states</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Id</span> <span class="o">+</span> <span class="s1">'" iso="'</span><span class="o">+</span><span class="nx">states</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">ISO</span><span class="o">+</span><span class="s1">'"&gt;'</span> <span class="o">+</span> <span class="nx">states</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Description</span> <span class="o">+</span> <span class="s1">'&lt;/option&gt;'</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>

<span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <p>The following example uses the <a href="/bbis/reference/javascript/#countryservice">Country and State JavaScript Service</a> instead of making an AJAX call directly to the endpoints.</p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-country-and-state-service-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-country-and-state-service-js" data-toggle="tab">JS</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-country-and-state-service-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;select</span> <span class="na">id=</span><span class="s">"country"</span><span class="nt">&gt;&lt;/select&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;select</span> <span class="na">id=</span><span class="s">"state"</span><span class="nt">&gt;&lt;/select&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-country-and-state-service-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

<span class="c1">// Let's make sure the DOM is ready</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">selectCountry</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">selectState</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#state'</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">service</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
  
  <span class="c1">// Load Countries</span>
  <span class="nx">service</span><span class="p">.</span><span class="nx">getCountries</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">countries</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">countries</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">selectCountry</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'&lt;option value="'</span> <span class="o">+</span> <span class="nx">countries</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Id</span> <span class="o">+</span> <span class="s1">'" iso="'</span><span class="o">+</span><span class="nx">countries</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">ISO</span><span class="o">+</span><span class="s1">'"&gt;'</span> <span class="o">+</span> <span class="nx">countries</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Description</span> <span class="o">+</span> <span class="s1">'&lt;/option&gt;'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
  
  <span class="c1">// Watch Countries Change</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'.countries'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'change'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  
    <span class="c1">// Load States</span>
    <span class="nx">service</span><span class="p">.</span><span class="nx">getStates</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">states</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">selectState</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">states</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">selectState</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'&lt;option value="'</span> <span class="o">+</span> <span class="nx">states</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Id</span> <span class="o">+</span> <span class="s1">'" iso="'</span><span class="o">+</span><span class="nx">states</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">ISO</span><span class="o">+</span><span class="s1">'"&gt;'</span> <span class="o">+</span> <span class="nx">states</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Description</span> <span class="o">+</span> <span class="s1">'&lt;/option&gt;'</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>

<span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-designation">Displaying Available Designation(s)</h3> <p>Using this example, you can display multiple designations on your ADF form. Create a Designation Type Ad-Hoc query With Enable query for CMS REST API in CRM and provide its ID in the ADF JS. Resultant Designations would be available for selection in the form of a dropdown on your ADF.</p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-designation-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-designation-js" data-toggle="tab">JS</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-designation-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Designation<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;select</span> <span class="na">id=</span><span class="s">"designation"</span><span class="nt">&gt;&lt;/select&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-designation-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

<span class="c1">// Let's make sure the DOM is ready</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">designationQueryId</span> <span class="o">=</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">;</span>  <span class="cm">/* Ad-hoc Query of Designation Type With Enable query for CMS REST API */</span>
  <span class="kd">var</span> <span class="nx">service</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">QueryService</span><span class="p">();</span>
  
  <span class="c1">// Load Designation(s)</span>
  <span class="nx">service</span><span class="p">.</span><span class="nx">getResults</span><span class="p">(</span><span class="nx">designationQueryId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Rows</span><span class="p">;</span>
		<span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">rows</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s1">'Values'</span><span class="p">];</span>
			<span class="nx">$</span><span class="p">(</span><span class="s2">"#designation"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]));</span>
		<span class="p">});</span>
	<span class="p">},</span> <span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="nx">statusFilter</span><span class="p">]);</span>   
  <span class="p">});</span>

<span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-recurrence">Recurrence Example</h3> <p>In this example, we're back to "proceeding directly to payment," as opposed to using the Payment 2.0 Part. This means we'll need to collect the donor information.</p> <p>Using recurrence with the Advanced Donation Form can be a little tricky, in that the fields which are required, differs depending on the frequency of the recurrence. For example, the Month field is only valid and required if the Frequency field is set to Annually (4).</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-recurrence-html" data-toggle="tab">HTML</a></li> <li><a href="#example-recurrence-js" data-toggle="tab">JS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-recurrence-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;h3&gt;</span>Donor Information<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"first-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"last-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"email"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">"address"</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"city"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"state"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"zip"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"country"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;h2&gt;</span>Recurrence<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Frequency<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"frequency"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Weekly<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>Monthly<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Quarterly<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>Annually<span class="nt">&lt;/option&gt;</span>
	  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7"</span><span class="nt">&gt;</span>Every 4 weeks<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Start Date<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"start-date"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Day of Week<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"day-of-week"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"0"</span><span class="nt">&gt;</span>Sunday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Monday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>Tuesday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Wednesday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>Thursday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>Friday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6"</span><span class="nt">&gt;</span>Saturday<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Day of Month<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"day-of-month"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option&gt;</span>1<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>2<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>3<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>4<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>5<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>6<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>7<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>8<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>9<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>10<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>11<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>12<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>13<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>14<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>15<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>16<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>17<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>18<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>19<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>20<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>21<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>22<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>23<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>24<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>25<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>26<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>27<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>28<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>29<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>30<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>31<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">"btn-donate"</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-recurrence-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="c1">// Let's make sure the DOM is ready</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)</span>
    <span class="p">);</span>
    
    <span class="c1">// Create the donation object we'll send</span>
    <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
    <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
      <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">Designations</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="na">Amount</span><span class="p">:</span> <span class="mf">5.00</span><span class="p">,</span>
            <span class="na">DesignationId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our success handler</span>
    <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our error handler</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 
      
      <span class="c1">// Add the information our user has typed</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#first-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#last-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#address'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">City</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#city'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">State</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#state'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#zip'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">Country</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="p">}</span>
      <span class="p">};</span>
      
      <span class="c1">// The following fields are always required</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">Frequency</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#frequency'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">StartDate</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#start-date'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">};</span>
      
      <span class="c1">// The remaining required values are different depending on what frequency the user selects</span>
      <span class="kd">var</span> <span class="nx">frequency</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#frequency'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="k">switch</span> <span class="p">(</span><span class="nx">frequency</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
          <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">DayOfWeek</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#day-of-week'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
          <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">DayOfMonth</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#day-of-month'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
          <span class="c1">// Purposefully letting selection fall through (no "break")</span>
        <span class="k">case</span> <span class="mi">4</span><span class="p">:</span>
          <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">Month</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#month'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">7</span><span class="p">:</span>
		 <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">DayOfMonth</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
		 <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">Month</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
		 <span class="c1">//Purposefully assigning DayOfWeek is -1 beacuse 0 is defined for Sunday.</span>
		 <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">DayOfWeek</span> <span class="o">=-</span><span class="mi">1</span><span class="p">;</span>
		<span class="k">break</span><span class="p">;</span>
      <span class="p">};</span>
        
      <span class="c1">// Submit our donation</span>
      <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>
    
  <span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-tribute">Tribute Example</h3> <p>In this example, we're back to "proceeding directly to payment," as opposed to using the Payment 2.0 Part. This means we'll need to collect the donor information. I've also introduced the ability to add a tribute.</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-tribute-html" data-toggle="tab">HTML</a></li> <li><a href="#example-tribute-js" data-toggle="tab">JS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-tribute-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;h3&gt;</span>Donor Information<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"first-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"last-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"email"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">"address"</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"city"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"state"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"zip"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"country"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;h3&gt;</span>Tribute Information<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"tribute-first-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"tribute-last-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Description<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">"tribute-description"</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>
      
<span class="nt">&lt;h3&gt;</span>Acknowledgee Information<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"acknowledgee-first-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"acknowledgee-last-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"acknowledgee-email"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">"acknowledgee-address"</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"acknowledgee-city"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"acknowledgee-state"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"acknowledgee-zip"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"acknowledgee-country"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>
      
<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">"btn-donate"</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-tribute-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="c1">// Let's make sure the DOM is ready</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)</span>
    <span class="p">);</span>
    
    <span class="c1">// Create the donation object we'll send</span>
    <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
    <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
      <span class="na">Tribute</span><span class="p">:</span> <span class="p">{},</span>
      <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="na">Designations</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="na">Amount</span><span class="p">:</span> <span class="mf">5.00</span><span class="p">,</span>
            <span class="na">DesignationId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our success handler</span>
    <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our error handler</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 
      
      <span class="c1">// Add the information our user has typed</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#first-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#last-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#address'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">City</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#city'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">State</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#state'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#zip'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">Country</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="c1">// Add our tribute information</span>
      <span class="c1">// See REST api tech reference for more information on the Type field</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Tribute</span><span class="p">.</span><span class="nx">TributeDefintion</span> <span class="o">=</span> <span class="p">{</span>
         <span class="na">Type</span><span class="p">:</span> <span class="s1">'Tribute'</span><span class="p">,</span>
        <span class="na">Name</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#tribute-first-name'</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#tribute-last-name'</span><span class="p">),</span>     
        <span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#tribute-first-name'</span><span class="p">),</span>
        <span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#tribute-last-name'</span><span class="p">),</span>
        <span class="na">Description</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'tribute-description'</span><span class="p">)</span>
      <span class="p">};</span>
      
      <span class="c1">// Add our acknowledgee information</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Tribute</span><span class="p">.</span><span class="nx">Acknowledgee</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#acknowledgee-first-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#acknowledgee-last-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#acknowledgee-address'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">City</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#acknowledgee-city'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">State</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#acknowledgee-state'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#acknowledgee-zip'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="na">Country</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#acknowledgee-country'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="p">}</span>
      <span class="p">};</span>
      
      <span class="c1">// Submit our donation</span>
      <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>
    
  <span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> ï»¿<h3 id="example-consent">Consent Information Example</h3> <p>Using the <a href="/bbis/reference/rest/#consentapi">Consent endpoints</a>, you can quickly populate the available consents. This example uses jQuery to make an AJAX request. We also wrap this functionality in the <a href="/bbis/reference/javascript/#consentservice">Consent JavaScript Service</a>, which is shown in this example.</p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-consent-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-consent-js" data-toggle="tab">JS</a> </li> <li> <a href="#example-consent-css" data-toggle="tab">CSS</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-consent-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"myModal"</span> <span class="na">class=</span><span class="s">"modal-content"</span> <span class="na">style=</span><span class="s">"display:none"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;fieldset</span> <span class="na">style=</span><span class="s">"border:none;"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;legend</span> <span class="na">style=</span><span class="s">"width:535px"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"consentTitle"</span><span class="nt">&gt;</span>Consent Start<span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;hr</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"consentStatement"</span><span class="nt">&gt;&lt;/label&gt;</span>
        <span class="nt">&lt;/legend&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">value=</span><span class="s">""</span> <span class="na">id=</span><span class="s">"hdnCRMSolicitCode"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentTable"</span> <span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentTableBody"</span> <span class="na">id=</span><span class="s">"consentOption"</span> <span class="na">style=</span><span class="s">'border-spacing:0px;'</span><span class="nt">&gt;</span> 
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentTableRow"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentTableHead consentTableHeader"</span><span class="nt">&gt;</span>Communication Type<span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentTableHead consentTableHeader"</span><span class="nt">&gt;</span>Opt-in<span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentTableHead consentTableHeader"</span><span class="nt">&gt;</span>Opt-out<span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;legend&gt;</span>
           <span class="nt">&lt;p&gt;&lt;a</span> <span class="na">id=</span><span class="s">"privacylink"</span><span class="nt">&gt;</span>View Privacy Policy<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
            <span class="nt">&lt;button</span> <span class="na">style=</span><span class="s">"display:none"</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span> <span class="na">type=</span><span class="s">"button"</span><span class="nt">&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
        <span class="nt">&lt;/legend&gt;</span>
    <span class="nt">&lt;/fieldset&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-consent-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

 <span class="c1">// Let's make sure the DOM is ready</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

  <span class="c1">// Create an instance of the DonationService</span>
  <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">));</span>
     
  <span class="c1">//Id of a consent part</span>
  <span class="kd">var</span> <span class="nx">consentPartId</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">cnstType</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'cnsttype'</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"True"</span><span class="p">);</span><span class="c1">//True means overlay</span>

   <span class="c1">//Create the donation object we'll send</span>
  <span class="c1">//In order to simplify our examples, some of this information is hard-coded.</span>
  <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
  <span class="na">BBSPReturnUri</span><span class="p">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span>
  <span class="na">BBSPTemplateSitePageId</span><span class="p">:</span> <span class="mi">000</span><span class="p">,</span>
  <span class="p">};</span>

  <span class="c1">// Create our success handler</span>
  <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
  <span class="p">};</span>   

  <span class="c1">// Create our error handler</span>
  <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
  <span class="p">};</span>
  
  <span class="c1">//Bind Consent Options</span>
  <span class="kd">function</span> <span class="nx">bindConsentOptions</span><span class="p">(</span><span class="nx">solicitCodes</span><span class="p">){</span>
  
   <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">solicitCodes</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>	  
    <span class="c1">//Add Separator</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableRow'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell' style='text-align:left; font-weight:bold;'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">)));</span>	 
    <span class="p">}</span>
	
    <span class="k">else</span> <span class="p">{</span>
    <span class="c1">//Add Consent Solicit Code</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableRow'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"1"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">1</span><span class="p">))));</span>                            
    <span class="p">}</span>
	<span class="c1">//Add Advanced Consent Solicit Code</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableRow'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"1"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">1</span><span class="p">))));</span>                            
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Add Solicit Code</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableRow'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"checkbox"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;div class='consentTableCell'&gt;&lt;/div&gt;"</span><span class="p">)));</span>
     <span class="p">}}});</span>
  <span class="p">}</span>
  

  <span class="c1">//Bind Consent </span>
  <span class="kd">function</span> <span class="nx">bindConsent</span><span class="p">()</span> <span class="p">{</span>

     <span class="nx">consentOptionService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">ConsentOptionService</span><span class="p">();</span>
     <span class="nx">consentOptionService</span><span class="p">.</span><span class="nx">getConsentOptions</span><span class="p">(</span><span class="nx">consentPartId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>

     <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">cnstType</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">SolicitCodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span> <span class="p">}</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentTitle"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">"&lt;b&gt;&lt;/b&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"Title"</span><span class="p">]);</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMSolicitCode"</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#hdnCRMSolicitCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMSolicitCode"</span><span class="p">]);</span> <span class="p">}</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentStatement"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"ConsentStatement"</span><span class="p">]);</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"PrivacyPolicy"</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#privacylink"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"onclick"</span><span class="p">,</span> <span class="s2">"javascript:window.open('"</span> <span class="o">+</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"PrivacyPolicy"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"', '_blank' ,height=600, width=800, resizable='yes', scrollbars='yes' )"</span><span class="p">);</span>
     <span class="p">}</span> 
     <span class="k">else</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#privacylink"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span> <span class="p">}</span>
 
     <span class="c1">//bind consent options</span>
     <span class="nx">bindConsentOptions</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">SolicitCodes</span><span class="p">);</span>
           
     <span class="c1">//add asterisk mark on required consent</span>
     <span class="kd">var</span> <span class="nx">requiredRows</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption div[IsRequired]"</span><span class="p">);</span>
     <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">requiredRows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="nx">requiredRows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"true"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption div[id="</span> <span class="o">+</span> <span class="nx">requiredRows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">"id"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">)</span>
	 <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"div:first"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">"&lt;span style='color:red;'&gt;*&lt;/span&gt;"</span><span class="p">);</span> <span class="p">}</span> <span class="p">}</span>

     <span class="p">});</span>
  <span class="p">}</span>

  <span class="c1">//submit the donation</span>
  <span class="kd">function</span> <span class="nx">sendData</span><span class="p">()</span> <span class="p">{</span>
     
     <span class="kd">var</span> <span class="nx">consentOptions</span> <span class="o">=</span> <span class="p">[];</span>
     <span class="kd">var</span> <span class="nx">solicitCodeCount</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"div[id='consentOption'] div[isRequired]"</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">solicitCodeCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;=</span> <span class="nx">solicitCodeCount</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">consentOptions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
      <span class="na">SolicitCodeID</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"div[id='consentOption'] div[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">id</span><span class="p">,</span>
      <span class="na">IsRequired</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"div[id='consentOption'] div[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">isrequired</span><span class="p">,</span>
      <span class="na">ConsentPreferenceCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"div[id='consentOption'] div[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">find</span><span class="p">(</span><span class="s1">':checked'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
     <span class="p">});</span>
     <span class="p">}}</span>
  
     <span class="c1">// Add the consent information our user has typed</span>
     <span class="nx">donation</span><span class="p">.</span><span class="nx">ContactConsents</span> <span class="o">=</span> <span class="p">{</span> <span class="na">ConsentPartId</span><span class="p">:</span> <span class="nx">consentPartId</span><span class="p">,</span> <span class="na">SolicitCodes</span><span class="p">:</span> <span class="nx">consentOptions</span> <span class="p">};</span>
     <span class="c1">// Submitting the donation</span>
     <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
     <span class="p">}</span>   

  <span class="c1">// when consent type is overlay</span>
  <span class="kd">function</span> <span class="nx">openDialog</span><span class="p">()</span> <span class="p">{</span>
     <span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">dialog</span><span class="p">({</span>
     <span class="na">dialogClass</span><span class="p">:</span> <span class="s2">"no-close"</span><span class="p">,</span>
     <span class="na">modal</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
     <span class="na">autoOpen</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
     <span class="na">maxHeight</span><span class="p">:</span> <span class="mi">393</span><span class="p">,</span>
     <span class="na">maxWidth</span><span class="p">:</span> <span class="mi">474</span>
     <span class="p">});</span>

     <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">dialog</span><span class="p">(</span><span class="s1">'open'</span><span class="p">);</span>
	 <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">"modal"</span><span class="p">);</span>
     <span class="nx">$</span><span class="p">(</span><span class="s1">'.ui-widget-overlay'</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">"overlay"</span><span class="p">);</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"width"</span><span class="p">,</span> <span class="s2">"100%"</span><span class="p">);</span>
     <span class="p">});</span>
     <span class="p">}</span>

  <span class="c1">//call on donate button click</span>
  <span class="kd">function</span> <span class="nx">onSubmitClick</span><span class="p">()</span> <span class="p">{</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"div[id='consentOption'] div[isRequired]"</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">//if consent type is overlay</span>
     <span class="k">if</span> <span class="p">(</span><span class="nx">cnstType</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'cnstFilled'</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"0"</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">openDialog</span><span class="p">();</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal button"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal button"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
     <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"cnstFilled"</span><span class="p">,</span> <span class="s2">"1"</span><span class="p">);</span>
     <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">dialog</span><span class="p">(</span><span class="s1">'close'</span><span class="p">);</span>
      <span class="nx">sendData</span><span class="p">();</span>
     <span class="p">});</span>
     <span class="p">}</span>
     <span class="c1">//if consent data is already submitted or consent type is inline</span>
     <span class="k">else</span> <span class="p">{</span>
     <span class="nx">sendData</span><span class="p">();</span>
     <span class="p">}</span>
     <span class="p">}</span>
     <span class="c1">//if no consent</span>
     <span class="k">else</span> <span class="p">{</span>
     <span class="nx">sendData</span><span class="p">();</span>
     <span class="p">}</span>
     <span class="p">}</span>

     <span class="c1">//bind consent on form</span>
     <span class="nx">bindConsent</span><span class="p">();</span>
     <span class="c1">// Attach our event listener to the donate button</span>
     <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
     <span class="nx">onSubmitClick</span><span class="p">();</span>
     <span class="p">});</span>

  <span class="p">});</span>
 <span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> <div class="tab-pane" id="example-consent-css"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* css other than bootstrap */</span>
 
<span class="nc">.consentTable</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">table</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">535px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.consentTableRow</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">table-row</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.consentTableHeading</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">table-header-group</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span><span class="m">800px</span><span class="p">;</span>
  <span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.consentTableCell</span><span class="o">,</span> <span class="nc">.consentTableHead</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">table-cell</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">3px</span> <span class="m">10px</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span><span class="m">100px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.consentTableHeader</span><span class="p">{</span>
 <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="no">black</span><span class="p">;</span>
 <span class="nl">border-color</span><span class="p">:</span> <span class="m">#efefef</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.consentTableFoot</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">table-footer-group</span><span class="p">;</span>
  <span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.consentTableBody</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">table-row-group</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="nc">.consentTableRow</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">odd</span><span class="o">)</span> <span class="p">{</span> 
  <span class="nl">background</span><span class="p">:</span> <span class="m">#efefef</span><span class="p">;</span>
<span class="p">}</span>
<span class="nf">#privacylink</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>
  <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">underline</span>
<span class="p">}</span>
<span class="nf">#privacylink</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
<span class="p">}</span>       
<span class="nc">.no-close</span> <span class="nc">.ui-dialog-titlebar</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.modal</span><span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">fixed</span><span class="p">;</span>
  <span class="nl">top</span><span class="p">:</span> <span class="m">25%</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span> 
  <span class="nl">overflow</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">max-height</span><span class="p">:</span> <span class="m">393px</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">565px</span><span class="p">;</span>
  <span class="nl">z-index</span><span class="p">:</span> <span class="m">101</span> <span class="p">;</span>
<span class="p">}</span>
<span class="nc">.overlay</span><span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">fixed</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="no">gray</span><span class="p">;</span>
  <span class="nl">opacity</span><span class="p">:</span> <span class="m">0.6</span><span class="p">;</span>
  <span class="nl">top</span><span class="p">:</span> <span class="m">0%</span><span class="p">;</span>
  <span class="nl">left</span><span class="p">:</span> <span class="m">0%</span><span class="p">;</span>
<span class="p">}</span></code></pre></div> </div> ï»¿<h3 id="example-direct-debit">Direct Debit Example</h3> <p> This feature can be used to configured the direct debit on ADF by using the payment's using the <a href="/bbis/reference/rest/#donationapi">Donation endpoints.</a></p> <p>Organizations have many donors (especially in international markets) that prefer to give gifts with Direct DebitÂ (also known as ACH). To build parity with our current Advance Donation Form (ADF), we need to allow organizations to accept donations via direct debit on ADF. This functionality is wrapped under <a href="/bbis/reference/javascript/#directdebitservice">DirectDebit Service</a>, as shown in the example.</p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-direct-debit-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-direct-debit-js" data-toggle="tab">JS</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-direct-debit-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!--This div is use to show the direct debit section on a page--&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"directDebitSection"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow"</span> <span class="na">id=</span><span class="s">"tr_DDPDFInstructions"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">colspan=</span><span class="s">"3"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;span&gt;&lt;i&gt;</span>In order to set up a Direct Debit instruction
                    online, you must be the account holder of a personal bank or building society account.
                    If you are not the only required signatory on your account or you would rather send
                    us a paper version please
                    <span class="nt">&lt;a</span> <span class="na">ID=</span><span class="s">"lnkDDPDF"</span> <span class="na">title=</span><span class="s">"Direct Debit PDF"</span> <span class="na">href=</span><span class="s">"DirectDebit.ddpdf"</span>
                        <span class="na">Target=</span><span class="s">"_blank"</span> <span class="na">rel=</span><span class="s">"noopener noreferrer"</span><span class="nt">&gt;</span>click here<span class="nt">&lt;/a&gt;&lt;/i&gt;</span>
	            <span class="nt">&lt;/span&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblFinancialLBL"</span><span class="nt">&gt;</span>Financial Institution:<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtFinancialInstitution"</span> <span class="na">MaxLength=</span><span class="s">"100"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblBranchName"</span><span class="nt">&gt;</span>Branch Name:<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtBranchName"</span> <span class="na">MaxLength=</span><span class="s">"100"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow"</span> <span class="na">id=</span><span class="s">"tr_BankingSystemType"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblBankingSystemType"</span><span class="nt">&gt;</span>Banking System Type:<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;select</span> <span class="na">ID=</span><span class="s">"ddlBankingSystemType"</span><span class="nt">&gt;&lt;/select&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblRoutNumLBL"</span><span class="nt">&gt;</span>Routing Number:<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtRoutingNumber"</span> <span class="na">MaxLength=</span><span class="s">"9"</span> <span class="nt">/&gt;</span>
               <span class="c">&lt;!-- &lt;asp:CustomValidator ID="cvRoutingNumber"  ClientValidationFunction="RoutingNumberClientValidation"  /&gt;   --&gt;</span> 
  
                <span class="nt">&lt;a</span> <span class="na">ID=</span><span class="s">"lnk_BankHelp"</span> <span class="na">title=</span><span class="s">"Display help details in another window"</span> <span class="na">style=</span><span class="s">"cursor:pointer;"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"images/help-32_1.gif"</span> <span class="na">alt=</span><span class="s">"help"</span> <span class="na">title=</span><span class="s">"Help"</span> <span class="na">style=</span><span class="s">"height:32px;width:36px;vertical-align:bottom; border:0;"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow"</span> <span class="na">id=</span><span class="s">"tr_CanadaTransitNum"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblCanadaTransitNum"</span><span class="nt">&gt;</span>Transit Number:<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtCanTransitNumber"</span> <span class="na">MaxLength=</span><span class="s">"5"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblAccountNumber"</span><span class="nt">&gt;</span>Account Number:<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"spn_AccountNo"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtAccountNumber"</span> <span class="na">MaxLength=</span><span class="s">"20"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"spn_AccountNoNZ"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtAccountNumberNZ"</span> <span class="na">Width=</span><span class="s">"30"</span> <span class="na">MaxLength=</span><span class="s">"7"</span><span class="nt">/&gt;</span>
					<span class="nt">&lt;span&gt;</span>-<span class="nt">&lt;/span&gt;</span>
                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtSuffixNZ"</span> <span class="na">Width=</span><span class="s">"20"</span> <span class="na">MaxLength=</span><span class="s">"3"</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblSuffixNZ"</span> <span class="na">Visible=</span><span class="s">"false"</span><span class="nt">&gt;&lt;/label&gt;</span>
                <span class="nt">&lt;/span&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow"</span> <span class="na">id=</span><span class="s">"tr_AccountType"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblAccountType"</span><span class="nt">&gt;</span>Account Type:<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;select</span> <span class="na">ID=</span><span class="s">"ddlAccountType"</span><span class="nt">&gt;&lt;/select&gt;</span>
        
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblAccountHolderName"</span><span class="nt">&gt;</span>Account Holder's Name:<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtAccountHolder"</span> <span class="na">MaxLength=</span><span class="s">"50"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow"</span> <span class="na">id=</span><span class="s">"tr_CurrentDate"</span> <span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblDebitDate"</span><span class="nt">&gt;</span>Date:<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lbl_CurrentDate"</span><span class="nt">&gt;&lt;/label&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow"</span> <span class="na">id=</span><span class="s">"tr_OrigNumber"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblOriginatorID"</span><span class="nt">&gt;</span>Service user's ID number:<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lbl_OrigNumber"</span><span class="nt">&gt;&lt;/label&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"tr_DDBankInstructions"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;span</span> <span class="na">colspan=</span><span class="s">"3"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;p&gt;</span>
                    <span class="nt">&lt;label&gt;&lt;b&gt;</span>Instruction to your Bank or Building Society<span class="nt">&lt;/b&gt;&lt;/label&gt;</span>
                <span class="nt">&lt;/p&gt;</span>
                                   <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lbl_DDBankInstructions"</span><span class="nt">&gt;</span>
<span class="nt">&lt;i&gt;</span>Please pay %1 Direct Debits from the account detailed in this Instruction subject to the safeguards assured by the Direct Debit Guarantee. I understand that this Instruction may remain with %1 and, if so, details will be passed electronically to my Bank/Building Society.<span class="nt">&lt;/i&gt;</span>
					<span class="nt">&lt;/label&gt;</span>						
                                
                    <span class="nt">&lt;label&gt;</span>
<span class="nt">&lt;i&gt;</span>Banks and Building Societies may not accept Direct Debit Instructions for some types of account.<span class="nt">&lt;/i&gt;</span>
                    <span class="nt">&lt;/label&gt;</span>
                
            <span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"tr_DDInstructions"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;span</span> <span class="na">colspan=</span><span class="s">"3"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"images\dlogo.gif"</span> <span class="na">alt=</span><span class="s">"Direct Debit"</span> <span class="na">title=</span><span class="s">"Direct Debit"</span> <span class="na">style=</span><span class="s">"text-align: center;"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;a</span> <span class="na">ID=</span><span class="s">"lnk_DDGuarantee"</span> <span class="na">title=</span><span class="s">"Display the Direct Debit Guarantee in another window"</span> <span class="na">style=</span><span class="s">"cursor:pointer;color:blue;text-decoration:underline;"</span><span class="nt">&gt;</span>The Direct Debit Guarantee<span class="nt">&lt;/a&gt;</span>
			<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"tr_DDPDFInstructions2"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;span</span> <span class="na">colspan=</span><span class="s">"2"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;p&gt;</span>
                    <span class="nt">&lt;label&gt;</span>
<span class="nt">&lt;i&gt;</span>By clicking 'Donate Now' you are confirming that you are the account holder and that you are the only person required to authorise debits from this account.<span class="nt">&lt;/i&gt;</span>
		<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;/p&gt;</span>
            <span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
   <span class="nt">&lt;/div&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-direct-debit-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

 <span class="c1">// Let's make sure the DOM is ready</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

  <span class="c1">// Create an instance of the DonationService</span>
  <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">));</span>
     
 
   <span class="c1">//Create the donation object we'll send</span>
  <span class="c1">//In order to simplify our examples, some of this information is hard-coded.</span>
  <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
  <span class="na">BBSPReturnUri</span><span class="p">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span>
  <span class="na">BBSPTemplateSitePageId</span><span class="p">:</span> <span class="mi">000</span><span class="p">,</span>
  <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="na">Designations</span><span class="p">:</span> <span class="p">[]</span>
      <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// Create our success handler</span>
  <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">returnedDonation</span><span class="p">.</span><span class="nx">Donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">PaymentMethod</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">+</span> <span class="s2">"?t="</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Donation</span><span class="p">.</span><span class="nx">Id</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="p">};</span>   

  <span class="c1">// Create our error handler</span>
  <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
  <span class="p">};</span>
  
	<span class="c1">//Show and Hide directdebit div on the page</span>
 <span class="kd">function</span> <span class="nx">showHideDirectDebitDiv</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#paymentDirectDebit"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#directDebitInformation"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="nx">hideAndVisible_BankingTypeField</span><span class="p">();</span>
      <span class="nx">addCountryHandler</span><span class="p">();</span>
     <span class="p">}</span>
     <span class="k">else</span> <span class="p">{</span>
       <span class="nx">$</span><span class="p">(</span><span class="s2">"#directDebitInformation"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

	<span class="c1">//Call the function when we have to hide and visible the banking type field</span>
    <span class="kd">function</span> <span class="nx">hideAndVisible_BankingTypeField</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"] option'</span><span class="p">).</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">(</span><span class="s1">'#tr_BankingSystemType'</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s1">'display'</span><span class="p">,</span> <span class="s1">'none'</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">(</span><span class="s1">'#tr_BankingSystemType'</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s1">'display'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

	<span class="c1">//Use to bind the banking types that is configured in CRM</span>
    <span class="kd">function</span> <span class="nx">bindDirectDebitData</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">donationService</span><span class="p">.</span><span class="nx">getBankingTypeData</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">"#ddlBankingSystemType"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]));</span>
            <span class="p">});</span>
        <span class="p">});</span>

        <span class="nx">donationService</span><span class="p">.</span><span class="nx">getAccountTypeData</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">"#ddlAccountType"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]));</span>
            <span class="p">});</span>
        <span class="p">});</span>

        <span class="nx">donationService</span><span class="p">.</span><span class="nx">getOriginIdAndTime</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">(</span><span class="s2">"#lbl_CurrentDate"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"Time"</span><span class="p">]);</span>
            <span class="nx">$</span><span class="p">(</span><span class="s2">"#lbl_OrigNumber"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"OriginId"</span><span class="p">]);</span>
        <span class="p">});</span>
    <span class="p">}</span>

	<span class="c1">//this function is used to select the banking type on the basis of country dropdown change</span>
    <span class="kd">function</span> <span class="nx">addCountryHandler</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">bankingSystemType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"]'</span><span class="p">),</span> <span class="nx">addrCtl</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[id='country'] :selected"</span><span class="p">),</span> <span class="nx">selectBankingOption</span><span class="p">,</span> <span class="nx">exists</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">bankingOptions</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">bankingSystemType</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">bankingOptions</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"] option'</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">bankingOptions</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">bankingOptions</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span><span class="p">)</span> <span class="o">||</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">AUS</span><span class="p">)))</span> <span class="p">{</span>
                        <span class="nx">selectBankingOption</span> <span class="o">=</span> <span class="s2">"Aus_NZ"</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">UK</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">selectBankingOption</span> <span class="o">=</span> <span class="s2">"UK"</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">||</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">USA</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">selectBankingOption</span> <span class="o">=</span> <span class="s2">"USA"</span><span class="p">;</span>
                    <span class="p">}</span>

                    <span class="nx">exists</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">!==</span> <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'option[value="'</span> <span class="o">+</span> <span class="nx">selectBankingOption</span> <span class="o">+</span> <span class="s1">'"]'</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">exists</span> <span class="o">&amp;&amp;</span> <span class="nx">exists</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="nx">selectBankingOption</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s2">"Please Select"</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">hideAndVisible_DirectDebitFields</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

	<span class="c1">//Hide and Visible direct debit fields on the basis of country dropdown and banking type dropdown change</span>
    <span class="kd">function</span> <span class="nx">hideAndVisible_DirectDebitFields</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">bankingType</span> <span class="o">=</span> <span class="s2">"Please Select"</span><span class="p">,</span> <span class="nx">htmlElement</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">routingNumberTextBoxLabel</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">routingNumberTextBox</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">transitNumberBox</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span>
            <span class="nx">routingNumber</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="txtRoutingNumber"]'</span><span class="p">),</span>
            <span class="nx">transitNumber</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="txtCanTransitNumber"]'</span><span class="p">),</span>
            <span class="nx">routingNumberLabel</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lblRoutNumLBL"]'</span><span class="p">),</span>
            <span class="nx">addressCTL</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[id='country'] :selected"</span><span class="p">),</span>
            <span class="nx">bankingSystemLabel</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lblBankingSystemType"]'</span><span class="p">),</span>
            <span class="nx">bankingSystemType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"] :selected'</span><span class="p">),</span>
            <span class="nx">accountType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_AccountType"],[id*="DC_AccountType"]'</span><span class="p">),</span>
            <span class="nx">accountNo</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="spn_AccountNo"]'</span><span class="p">),</span>
            <span class="nx">accountNoNZ</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="spn_AccountNoNZ"]'</span><span class="p">),</span>
            <span class="nx">financialInstitution</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lblFinancialLBL"]'</span><span class="p">),</span>
            <span class="nx">accountNoLabel</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lblAccountNumber"]'</span><span class="p">),</span>
            <span class="nx">routingNumberHelpSymbol</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lnk_BankHelp"]'</span><span class="p">),</span>
            <span class="nx">requiredFieldAccountType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="RequiredFieldAccountType"]'</span><span class="p">),</span>
            <span class="nx">ukFields</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_DDInstructions"], [id="tr_OrigNumber"], [id="tr_CurrentDate"], [id="tr_DDBankInstructions"], [id="tr_DDPDFInstructions"], [id="tr_DDPDFInstructions2"],[id="DC_DDInstructions"],[id="DC_OrigNumber"],[id="DC_CurrentDate"],[id="DC_DDBankInstructions"],[id="DC_DDPDFInstructions"],[id="DC_DDPDFInstructions2"]'</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">routingNumber</span> <span class="o">||</span> <span class="nx">routingNumber</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">bankingSystemType</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">bankingType</span> <span class="o">=</span> <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"Value"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">routingNumber</span> <span class="o">&amp;&amp;</span> <span class="nx">routingNumber</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">routingNumberTextBox</span> <span class="o">=</span> <span class="nx">routingNumber</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">addressCTL</span> <span class="o">&amp;&amp;</span> <span class="nx">addressCTL</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="nx">addressCTL</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">routingNumberLabel</span> <span class="o">&amp;&amp;</span> <span class="nx">routingNumberLabel</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">routingNumberTextBoxLabel</span> <span class="o">=</span> <span class="nx">routingNumberLabel</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">transitNumber</span> <span class="o">&amp;&amp;</span> <span class="nx">transitNumber</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">transitNumberBox</span> <span class="o">=</span> <span class="nx">transitNumber</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_CanadaTransitNum"]'</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">accountNo</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
        <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
        <span class="nx">accountNoLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Account Number:"</span><span class="p">);</span>
        <span class="nx">routingNumberHelpSymbol</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">ukFields</span> <span class="o">&amp;&amp;</span> <span class="nx">ukFields</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">ukFields</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">'display'</span><span class="p">,</span> <span class="s1">'none'</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">transitNumberBox</span> <span class="o">&amp;&amp;</span> <span class="nx">transitNumberBox</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"USA"</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Institution ID:"</span><span class="p">);</span>
            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"4"</span><span class="p">);</span>
            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
            <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
            <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_CanadaTransitNum"]'</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">!==</span> <span class="s2">"Please Select"</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"USA"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Routing Number:"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"9"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                    <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                    <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"UK"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Sort Code:"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"6"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                    <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                    <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">ukFields</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">ukFields</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">'display'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>
                    <span class="p">}</span>

                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Europe"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"BIC:"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"11"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                    <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                    <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                    <span class="nx">routingNumberHelpSymbol</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Aus_NZ"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"BSB Number:"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"6"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                    <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                    <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">accountNo</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                        <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                        <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Bank/Branch No.:"</span><span class="p">);</span>
                        <span class="nx">accountNoLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Account No./Suffix:"</span><span class="p">);</span>
                        <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"7"</span><span class="p">);</span>
                        <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Other"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Bank Code:"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"25"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                    <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                    <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                    <span class="nx">routingNumberHelpSymbol</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Routing Number:"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"9"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                    <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                    <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>

                <span class="p">}</span>

            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Routing Number:"</span><span class="p">);</span>
                <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"9"</span><span class="p">);</span>
                <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="c1">//this function is called when we click on help image of reoting number textbox(and it changes on the basis of banking type dropdown change)</span>
    <span class="kd">function</span> <span class="nx">donationBankHelp</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">sFeatures</span> <span class="o">=</span> <span class="s1">'WIDTH=392px,HEIGHT=400px,RESIZABLE=YES,SCROLLBARS=NO,TOOLBAR=NO,LEFT=5,TOP=20,location=No;status=No'</span><span class="p">,</span> <span class="nx">oPopUp</span><span class="p">,</span>
            <span class="nx">bankingType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"] :selected'</span><span class="p">),</span> <span class="nx">addressCTL</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[id='country'] :selected"</span><span class="p">),</span> <span class="nx">selectedValue</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">selectedValue</span> <span class="o">=</span> <span class="nx">bankingType</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"Value"</span><span class="p">);;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">addressCTL</span> <span class="o">&amp;&amp;</span> <span class="nx">addressCTL</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="nx">addressCTL</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
        <span class="p">}</span>


        <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">AUS</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">selectedValue</span> <span class="o">===</span> <span class="s1">'Aus_NZ'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">qParam</span> <span class="o">=</span> <span class="s1">'AUS'</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">selectedValue</span> <span class="o">===</span> <span class="s1">'Aus_NZ'</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">qParam</span> <span class="o">=</span> <span class="s1">'NZ'</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">selectedValue</span> <span class="o">===</span> <span class="s1">'USA'</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_CanadaTransitNum"]'</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_CanadaTransitNum"]'</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">qParam</span> <span class="o">=</span> <span class="s1">'CAD'</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">switch</span> <span class="p">(</span><span class="nx">selectedValue</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">case</span> <span class="s1">'USA'</span><span class="p">:</span>
                    <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">"USA"</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="s2">"Aus_NZ"</span><span class="p">:</span>
                    <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">"AUS"</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="s2">"UK"</span><span class="p">:</span>
                    <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">"UK"</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="nl">default</span><span class="p">:</span>
                    <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">"USA"</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">oPopUp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PopUpDialogBB</span><span class="p">(</span><span class="s1">'~/Admin/DonationHelp.ascx'</span><span class="p">,</span> <span class="s1">'_blank'</span><span class="p">,</span> <span class="nx">sFeatures</span><span class="p">,</span> <span class="s1">'&amp;mode=2&amp;displayfor='</span> <span class="o">+</span> <span class="nx">qParam</span><span class="p">);</span>
        <span class="nx">oPopUp</span><span class="p">.</span><span class="nx">Show</span><span class="p">();</span>
    <span class="p">}</span>


    <span class="kd">function</span> <span class="nx">dDGuarantee</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">sFeatures</span> <span class="o">=</span> <span class="s1">'WIDTH=650px,HEIGHT=415px,RESIZABLE=YES,SCROLLBARS=NO,TOOLBAR=NO,LEFT=5,TOP=20,location=No;status=No'</span><span class="p">,</span>
            <span class="nx">oPopUp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PopUpDialogBB</span><span class="p">(</span><span class="s1">'~/Admin/DonationHelp.ascx'</span><span class="p">,</span> <span class="s1">'_blank'</span><span class="p">,</span> <span class="nx">sFeatures</span><span class="p">,</span> <span class="s1">'&amp;mode=3'</span><span class="p">);</span>
        <span class="nx">oPopUp</span><span class="p">.</span><span class="nx">Show</span><span class="p">();</span>
    <span class="p">}</span>

	<span class="c1">//this is used to set country object with all possible value of the countries(like Abbreviation, Country Name, and Guid)</span>
    <span class="kd">function</span> <span class="nx">getCountryMappings</span><span class="p">()</span> <span class="p">{</span>

        <span class="c1">//this is use for direct debit validations</span>
        <span class="nx">countryData</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="nx">countryService</span><span class="p">.</span><span class="nx">getCountries</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">tmpData</span> <span class="o">=</span> <span class="p">{};</span>
                <span class="nx">tmpData</span><span class="p">.</span><span class="nx">Id</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">];</span>
                <span class="nx">tmpData</span><span class="p">.</span><span class="nx">Abbreviation</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">];</span>
                <span class="nx">tmpData</span><span class="p">.</span><span class="nx">Description</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">];</span>
                <span class="k">switch</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">].</span><span class="nx">toUpperCase</span><span class="p">())</span> <span class="p">{</span>
                    <span class="k">case</span> <span class="s1">'D81CEF85-7569-4B2E-8F2E-F7CF998A3342'</span><span class="p">:</span>
                        <span class="nx">countryData</span><span class="p">.</span><span class="nx">USA</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="s1">'A2ECC209-3D20-4DDA-BC4C-7585C8E2E701'</span><span class="p">:</span>
                        <span class="nx">countryData</span><span class="p">.</span><span class="nx">UK</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="s1">'D9EE54CD-2183-490C-A3AD-11152B271335'</span><span class="p">:</span>
                        <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="s1">'F189F24C-2538-46A1-8458-1E3F3967B843'</span><span class="p">:</span>
                        <span class="nx">countryData</span><span class="p">.</span><span class="nx">AUS</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                        <span class="k">break</span><span class="p">;</span>
                    <span class="k">case</span> <span class="s1">'DA42443E-AB81-40EE-A239-91ED699C0801'</span><span class="p">:</span>
                        <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                        <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>

            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">}</span>

	<span class="c1">//for validate the country thatused to select the banking type on the basis of country dropdown change </span>
    <span class="kd">function</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">country</span><span class="p">,</span> <span class="nx">ctryData</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">country</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">ctryData</span><span class="p">.</span><span class="nx">Id</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">||</span> <span class="nx">country</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">ctryData</span><span class="p">.</span><span class="nx">Abbreviation</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">||</span> <span class="nx">country</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">ctryData</span><span class="p">.</span><span class="nx">Description</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

    <span class="p">}</span>
 
	 <span class="c1">//Bind Direct Debit</span>
	 
	    <span class="nx">getCountryMappings</span><span class="p">();</span>
        <span class="nx">bindDirectDebitData</span><span class="p">();</span>
		
		<span class="c1">//Attach Listeners</span>
		<span class="nx">$</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">"#directDebit"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">"#recOneTime"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">"#directDebit"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">"#paymentDirectDebit"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">showHideDirectDebitDiv</span><span class="p">();</span> <span class="p">})</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">"#ddlBankingSystemType"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">hideAndVisible_DirectDebitFields</span><span class="p">();</span> <span class="p">})</span>
<span class="nx">$</span><span class="p">(</span><span class="s2">"#lnk_BankHelp"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">donationBankHelp</span><span class="p">();</span> <span class="p">});</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">"#lnk_DDGuarantee"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">dDGuarantee</span><span class="p">();</span> <span class="p">});</span>

<span class="c1">//Attach event listener on country change</span>
<span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">addCountryHandler</span><span class="p">();</span> <span class="p">})</span>
		
     <span class="c1">// Attach our event listener to the donate button</span>
   <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 
	  
      <span class="c1">//Payment Method(2) means direct debit and set all the properties of direct debit</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">paymentMethod</span> <span class="o">===</span> <span class="s2">"2"</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#paymentDirectDebit"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="kd">var</span> <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#country :selected"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">bankingType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#ddlBankingSystemType :selected"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
            <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">FinancialInstitution</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#txtFinancialInstitution"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
            <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">BranchName</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#txtBranchName"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
            <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountHolderName</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#txtAccountHolder"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
            <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">BankingType</span> <span class="o">=</span> <span class="nx">bankingType</span><span class="p">;</span>


            <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"USA"</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">RoutingNumber</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#txtRoutingNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">TransitNumber</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#txtCanTransitNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">RoutingNumber</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#txtRoutingNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Aus_NZ"</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountNumber</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#txtAccountNumberNZ"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">SuffixNo</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#txtSuffixNZ"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountNumber</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#txtAccountNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Europe"</span> <span class="o">||</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Other"</span> <span class="o">||</span> <span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"USA"</span><span class="p">))</span> <span class="p">{</span>
                <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#ddlAccountType :selected"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountType</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
            <span class="p">}</span>

        <span class="p">}</span>

     <span class="c1">// Submitting the donation</span>
     <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
     <span class="p">});</span> 

  <span class="p">});</span>
 <span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-secure-payments">Using Blackbaud Secure Payments</h3> <p>Integration with the Blackbaud Secure Payments service has been updated in the Advanced Donation Form.</p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-secure-payments-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-secure-payments-js" data-toggle="tab">JS</a> </li> <li> <a href="#example-secure-checkout-SP25-js" data-toggle="tab">Checkout JS(New)</a> </li> <li> <a href="#example-secure-checkout-js" data-toggle="tab">Checkout JS(Legacy)</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-secure-payments-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"first-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"last-name"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"email"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">"address"</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"city"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"state"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"zip"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"country"</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">"btn-donate"</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-secure-payments-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

<span class="c1">// Let's make sure the DOM is ready</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)</span>
    <span class="p">);</span>

  <span class="c1">// Create the donation object we'll send</span>
  <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
  <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
    <span class="na">BBSPReturnUri</span><span class="p">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span>
    <span class="na">BBSPTemplateSitePageId</span><span class="p">:</span> <span class="mi">000</span><span class="p">,</span>
    <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="na">Designations</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="na">Amount</span><span class="p">:</span> <span class="mf">5.00</span><span class="p">,</span>
          <span class="na">DesignationId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// Create our success handler</span>
  <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Create our error handler</span>
  <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Attach our event listener to the donate button</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Stop the button from submitting the form</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 

    <span class="c1">// Add the information our user has typed</span>
    <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#first-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#last-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#address'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">City</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#city'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">State</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#state'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#zip'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">Country</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="c1">// Submit our donation</span>
    <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> <div class="tab-pane" id="example-secure-checkout-SP25-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

<span class="c1">// Let's make sure the DOM is ready</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)</span>
    <span class="p">);</span>

  <span class="c1">// Create the donation object we'll send</span>
  <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
  <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
    <span class="na">BBSPReturnUri</span><span class="p">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span>
    <span class="na">BBSPTemplateSitePageId</span><span class="p">:</span> <span class="mi">000</span><span class="p">,</span>
    <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="na">Designations</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="na">Amount</span><span class="p">:</span> <span class="mf">5.00</span><span class="p">,</span>
          <span class="na">DesignationId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// Create our success handler</span>
  <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Create our error handler</span>
  <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
  <span class="p">};</span>
  
  
  
  <span class="c1">//set the public key by using public key service that is used to open the checkout pop up</span>
    <span class="kd">function</span> <span class="nx">GetPublicKey</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="nx">onPublicKeySuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">reply</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">publicKey</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">reply</span><span class="p">.</span><span class="nx">Data</span><span class="p">).</span><span class="nx">PublicKey</span><span class="p">;</span>
    <span class="p">};</span>
   
	<span class="nx">ds</span><span class="p">.</span><span class="nx">getCheckoutPublicKey</span><span class="p">(</span><span class="nx">onPublicKeySuccess</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
	<span class="k">return</span> <span class="nx">publicKey</span><span class="p">;</span>
    <span class="p">}</span>
  
  
    <span class="c1">//this is the function that calls the payment api to open the checkout pop up with all the parameters</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">makePayment</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">donor</span> <span class="o">=</span> <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">Amount</span> <span class="o">=</span> <span class="s2">"5.00"</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressCity</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">City</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressCountry</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">Country</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressLine</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">StreetAddress</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressPostCode</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">PostalCode</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressState</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">State</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressEmail</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">EmailAddress</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressFirstName</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">FirstName</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="p">(</span><span class="nx">donor</span><span class="p">.</span><span class="nx">MiddleName</span> <span class="p">?</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">MiddleName</span><span class="p">:</span><span class="s2">""</span><span class="p">);</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressLastName</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">LastName</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">Cardholder</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">FirstName</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">LastName</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">UseVisaCheckout</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">);</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">UseMasterpass</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">);</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">UseApplePay</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">);</span>
		<span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TransactionType</span> <span class="o">=</span> <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">TransactionType</span><span class="p">.</span><span class="nx">Card_Not_Present</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">CardToken</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		
        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">ProcessNow</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">CardToken</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">DataKey</span><span class="p">;</span>
            <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TransactionType</span> <span class="o">=</span> <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">TransactionType</span><span class="p">.</span><span class="nx">Store_Card</span><span class="p">;</span> <span class="c1">//Store card transactions</span>
        <span class="p">}</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span> <span class="p">)</span> <span class="p">{</span>      <span class="c1">//Set CardToken value only in case of recurring gifts.</span>
            <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">CardToken</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">DataKey</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">//Set Donor Info so that it will be passed to finish the transaction at the end.</span>
		<span class="nx">data</span><span class="p">.</span><span class="nx">DonationSource</span> <span class="o">=</span> <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">DonationSource</span><span class="p">.</span><span class="nx">ADF</span><span class="p">;</span>
		<span class="nx">data</span><span class="p">.</span><span class="nx">Type</span><span class="o">=</span><span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TranType</span><span class="p">.</span><span class="nx">Donation</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">DonorInfo</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">openCheckout</span><span class="p">();</span>
        <span class="p">}</span>
  
  <span class="kd">function</span> <span class="nx">InitializeBBCheckout</span><span class="p">()</span> 
   <span class="p">{</span>
	   
	   <span class="nx">bbcheckout</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BBCheckoutProcessor</span><span class="p">(</span><span class="nx">checkoutFunctions</span><span class="p">(),</span><span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">APIControllerName</span><span class="p">,</span><span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">TokenId</span><span class="p">,</span><span class="s1">'[class*="donationForm"]'</span><span class="p">);</span>
	   <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">Key</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">PublicKey</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TransactionType</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">TransactionType</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">ClientAppName</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">ClientAppName</span><span class="p">;</span>        
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">MerchantAccountId</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">MerchantAccountId</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">IsEmailRequired</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">IsEmailRequired</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">IsNameVisible</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">IsNameVisible</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">PrimaryColor</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">PrimaryColor</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">SecondaryColor</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">SecondaryColor</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">FontFamily</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">FontFamily</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">UseCaptcha</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">UseCaptcha</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">WorkflowType</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">WorkFlowType</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">HandleBrowserClosing</span> <span class="o">=</span> <span class="p">(</span><span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">HandleBrowserClosing</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">?</span> <span class="s2">"True"</span> <span class="p">:</span> <span class="s2">"False"</span><span class="p">);</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">APITokenID</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">TokenId</span><span class="p">;</span>
	   <span class="c1">// You can add your own message to display on screen, after checkout pop-up close</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TempConfirmationHtml</span> <span class="o">=</span> <span class="s2">"Thank you for your contribution, please wait while we process your transaction."</span><span class="p">;</span>
       <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">intializeCheckout</span><span class="p">();</span>
   <span class="p">}</span>

<span class="kd">function</span> <span class="nx">checkoutFunctions</span><span class="p">()</span>
   <span class="p">{</span>
	<span class="c1">//  If you don't have anything to do then you don't add any events from below mentioned checkoutEvents </span>
	<span class="nx">checkoutEvents</span><span class="o">=</span><span class="p">{</span>
	<span class="na">checkoutComplete</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//Place any code if you want to do anything on checkout complete.</span>
       

        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">postCheckoutFinish</span><span class="p">();</span>
    <span class="p">},</span>

    <span class="na">checkoutError</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//Place any code if you want to do anything on error.</span>
    <span class="p">},</span>

    <span class="na">checkoutExpired</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">//Place any code if you want to do anything on Checkout expired.</span>
    <span class="p">},</span>

    <span class="na">checkoutReady</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">//Place any code if you want to do anything on Checkout Ready.</span>
    <span class="p">},</span>

    <span class="na">browserClose</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">//Place any code if you want to do anything on Checkout Browser closing.</span>

    <span class="p">},</span>

    <span class="na">checkoutCancel</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">//Place any code if you want to do anything on Checkout cancel.</span>
    <span class="p">},</span>

    <span class="na">checkoutLoaded</span> <span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">//Place any code if you want to do anything on Checkout loaded.</span>
    <span class="p">}</span>

		  
	  <span class="p">}</span>

<span class="k">return</span> <span class="nx">checkoutEvents</span><span class="p">;</span>	  
   <span class="p">}</span>

	<span class="kd">function</span> <span class="nx">getUrlVars</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">vars</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">hash</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">hashes</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">'?'</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">'&amp;'</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">hashes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">hash</span> <span class="o">=</span> <span class="nx">hashes</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">'='</span><span class="p">);</span>
        <span class="nx">vars</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">hash</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="nx">vars</span><span class="p">[</span><span class="nx">hash</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">hash</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="p">}</span>
        <span class="k">return</span> <span class="nx">vars</span><span class="p">;</span>
    <span class="p">}</span>
  
    
	 <span class="c1">//use this method for credit card payment through popup</span>
    <span class="kd">function</span> <span class="nx">ProcessCCPayment</span><span class="p">()</span> <span class="p">{</span>
        
            <span class="nx">onValidationSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
           
			<span class="nx">makePayment</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="nx">onValidationFailed</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
        <span class="p">};</span>

        <span class="nx">ds</span><span class="p">.</span><span class="nx">validateDonationRequest</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">onValidationSuccess</span><span class="p">,</span> <span class="nx">onValidationFailed</span><span class="p">);</span>

    <span class="p">}</span>

  <span class="c1">// Attach our event listener to the donate button</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Stop the button from submitting the form</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 

    <span class="c1">// Add the information our user has typed</span>
    <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#first-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#last-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#address'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">City</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#city'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">State</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#state'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#zip'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">Country</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="c1">// Send the donation</span>
	<span class="nx">ProcessCCPayment</span><span class="p">()</span>
  <span class="p">});</span>

<span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> <div class="tab-pane" id="example-secure-checkout-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// This example will continue to work with Service Pack 25 release, however, it will not utilize the transaction workflow optimization code included as part of that release. Please refer to Checkout JS(New) for updated sample that incorporates the optimized Blackbaud Checkout Code.</span>
  
<span class="c1">// Let's be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

<span class="c1">// Let's make sure the DOM is ready</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">)</span>
    <span class="p">);</span>

  <span class="c1">// Create the donation object we'll send</span>
  <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
  <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">MerchantAccountId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span><span class="p">,</span>
    <span class="na">BBSPReturnUri</span><span class="p">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span>
    <span class="na">BBSPTemplateSitePageId</span><span class="p">:</span> <span class="mi">000</span><span class="p">,</span>
    <span class="na">Gift</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">PaymentMethod</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="na">Designations</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="na">Amount</span><span class="p">:</span> <span class="mf">5.00</span><span class="p">,</span>
          <span class="na">DesignationId</span><span class="p">:</span> <span class="s1">'00000000-0000-0000-0000-000000000000'</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// Create our success handler</span>
  <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Create our error handler</span>
  <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Error!'</span><span class="p">);</span>
  <span class="p">};</span>
  
  
  
  <span class="c1">//set the public key by using public key service that is used to open the checkout pop up</span>
    <span class="kd">function</span> <span class="nx">GetPublicKey</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="nx">onPublicKeySuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">reply</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">publicKey</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">reply</span><span class="p">.</span><span class="nx">Data</span><span class="p">).</span><span class="nx">PublicKey</span><span class="p">;</span>
    <span class="p">};</span>
   
	<span class="nx">ds</span><span class="p">.</span><span class="nx">getCheckoutPublicKey</span><span class="p">(</span><span class="nx">onPublicKeySuccess</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
	<span class="k">return</span> <span class="nx">publicKey</span><span class="p">;</span>
    <span class="p">}</span>
  
  
  <span class="c1">//this is the function that calls the payment api to open the checkout pop up with all the parameters</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">makePayment</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">opened</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">donor</span><span class="o">=</span><span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">checkout</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SecureCheckout</span><span class="p">(</span><span class="nx">handleCheckoutComplete</span><span class="p">,</span> <span class="nx">handleCheckoutError</span><span class="p">,</span> <span class="nx">handleCheckoutCancelled</span><span class="p">,</span> <span class="nx">handleCheckoutLoaded</span><span class="p">);</span>
        <span class="nx">donationData</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"key"</span><span class="p">:</span> <span class="nx">GetPublicKey</span><span class="p">(),</span>
            <span class="s1">'Amount'</span><span class="p">:</span> <span class="s2">"5.00"</span><span class="p">,</span>
            <span class="s1">'UseCaptcha'</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'BillingAddressCity'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">City</span><span class="p">,</span>
            <span class="s1">'BillingAddressCountry'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">Country</span><span class="p">,</span>
            <span class="s1">'BillingAddressLine'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">StreetAddress</span><span class="p">,</span>
            <span class="s1">'BillingAddressPostCode'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">PostalCode</span><span class="p">,</span>
            <span class="s1">'BillingAddressState'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">State</span><span class="p">,</span>
            <span class="s1">'BillingAddressEmail'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">EmailAddress</span><span class="p">,</span>
            <span class="s1">'BillingAddressFirstName'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">FirstName</span><span class="p">,</span>
            <span class="s1">'BillingAddressLastName'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">LastName</span><span class="p">,</span>
            <span class="s1">'Cardholder'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">FirstName</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">LastName</span><span class="p">,</span>
            <span class="s1">'ClientAppName'</span><span class="p">:</span> <span class="s1">'BBIS'</span><span class="p">,</span>
            <span class="s1">'MerchantAccountId'</span><span class="p">:</span> <span class="nx">donation</span><span class="p">.</span><span class="nx">MerchantAccountId</span><span class="p">,</span>
            <span class="s1">'IsEmailRequired'</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'PrimaryColor'</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'SecondaryColor'</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'FontFamily'</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'IsNameVisible'</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="s1">'UseVisaCheckout'</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
          <span class="s1">'UseMasterpass'</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="s1">'UseApplePay'</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">};</span>

            <span class="k">return</span> <span class="nx">checkout</span><span class="p">.</span><span class="nx">processCardNotPresent</span><span class="p">(</span><span class="nx">donationData</span><span class="p">);</span>
        <span class="p">}</span>
  
  <span class="c1">//when checkout popup is successfully loaded</span>
    <span class="nx">handleDonationCreated</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">orderID</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Data</span><span class="p">).</span><span class="nx">OrderId</span><span class="p">;</span>
    <span class="p">}</span>


	<span class="kd">function</span> <span class="nx">getUrlVars</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">vars</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">hash</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">hashes</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">'?'</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">'&amp;'</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">hashes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">hash</span> <span class="o">=</span> <span class="nx">hashes</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">'='</span><span class="p">);</span>
        <span class="nx">vars</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">hash</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="nx">vars</span><span class="p">[</span><span class="nx">hash</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">hash</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="p">}</span>
        <span class="k">return</span> <span class="nx">vars</span><span class="p">;</span>
    <span class="p">}</span>
  
  <span class="c1">//this function called when the checkout popup is loaded on a page</span>
    <span class="kd">function</span> <span class="nx">handleCheckoutLoaded</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">opened</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">opened</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#bbCheckoutPaymentIframe"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s1">'src'</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">tid</span> <span class="o">=</span> <span class="nx">getUrlVars</span><span class="p">(</span><span class="nx">url</span><span class="p">)[</span><span class="s2">"t"</span><span class="p">];</span>

            <span class="c1">//save transaction id in global variable. Will be used throughout the transaction</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">transactionIDl</span> <span class="o">=</span> <span class="nx">tid</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">tid</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">donation</span><span class="p">.</span><span class="nx">TokenId</span> <span class="o">=</span> <span class="nx">tid</span><span class="p">;</span>
                <span class="nx">ds</span><span class="p">.</span><span class="nx">checkoutDonationCreate</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">handleDonationCreated</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="c1">//when we cancel the payment pop up then unbind all the binded events on checkout popup</span>
    <span class="kd">function</span> <span class="nx">UnBindPaymentCheckoutEvents</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">"checkoutComplete"</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">"checkoutLoaded"</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">"checkoutError"</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">"checkoutCancel"</span><span class="p">);</span>
    <span class="p">}</span>

	<span class="c1">//this is called when the payment is completed</span>
    <span class="kd">function</span> <span class="nx">handleCheckoutComplete</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">tranToken</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">Id</span><span class="o">=</span><span class="nx">tranToken</span> <span class="p">?</span> <span class="nx">tranToken</span> <span class="p">:(</span><span class="nx">event</span><span class="p">?(</span><span class="nx">event</span><span class="p">.</span><span class="nx">detail</span><span class="p">?(</span><span class="nx">event</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">transactionToken</span><span class="p">?</span><span class="nx">event</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">transactionToken</span><span class="p">:</span><span class="kc">null</span><span class="p">):</span><span class="kc">null</span><span class="p">):</span><span class="kc">null</span><span class="p">);</span>
		
        <span class="k">if</span> <span class="p">(</span><span class="nx">Id</span><span class="p">)</span> <span class="p">{</span> 
            <span class="nx">donation</span><span class="p">.</span><span class="nx">TokenId</span> <span class="o">=</span> <span class="nx">Id</span><span class="p">;</span>
            <span class="nx">ds</span><span class="p">.</span><span class="nx">checkoutDonationComplete</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
           <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
        <span class="p">}</span>
		<span class="nx">UnBindPaymentCheckoutEvents</span><span class="p">();</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="c1">//call when there is any error while doing the payment on checkout pop up</span>
    <span class="nx">handleCheckoutError</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">errorMsg</span><span class="p">,</span> <span class="nx">errorCode</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">//Cancel Donation if user close checkout popup</span>
    <span class="kd">function</span> <span class="nx">handleCheckoutCancelled</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="nx">ds</span><span class="p">.</span><span class="nx">checkoutDonationCancel</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//do not store this error. Already stored from server side</span>
        <span class="p">}</span>
        <span class="nx">UnBindPaymentCheckoutEvents</span><span class="p">();</span>
    <span class="p">}</span>
  
  
	 <span class="c1">//use this method for credit card payment through popup</span>
    <span class="kd">function</span> <span class="nx">ProcessCCPayment</span><span class="p">()</span> <span class="p">{</span>
        
            <span class="nx">onValidationSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">makePayment</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="nx">onValidationFailed</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
        <span class="p">};</span>

        <span class="nx">ds</span><span class="p">.</span><span class="nx">validateDonationRequest</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">onValidationSuccess</span><span class="p">,</span> <span class="nx">onValidationFailed</span><span class="p">);</span>

    <span class="p">}</span>

  <span class="c1">// Attach our event listener to the donate button</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'.btn-donate'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Stop the button from submitting the form</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 

    <span class="c1">// Add the information our user has typed</span>
    <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">FirstName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#first-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">LastName</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#last-name'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#address'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">City</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#city'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">State</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#state'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#zip'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="na">Country</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#country'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="c1">// Send the donation</span>
	<span class="nx">ProcessCCPayment</span><span class="p">()</span>
  <span class="p">});</span>

<span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> ï»¿<h3 id="example-complete-SP25">ADF - Complete Example(New)</h3> <p>This example takes advantage of the transaction workflow optimization code included with our Service Pack 25 release.</p> <p>All our other examples available on the Developer Site are designed to be inserted into an Advanced Donation Form Part; however the following example is designed as a complete standalone solution â applicable even on a different server than the one serving your BBIS website.</p> <p>Please note you will need to update the references in the example below to your BBIS installation.</p> <ol> <li> The following ADF JS is only valid for BBSP, Checkout pop-up and IATS. This is not applicable for Payment 2.0.</li> <li> If you change the ID of any HTML control, then you will need to update/change all instances of that ID in both HTML and JS.</li> <li> Ensure you are using all the validations and If conditions and pass all the values in the same format as mentioned in the sample.</li> <li> <b>Changing the visual appearance of page</b> : Modify the default CSS Class written under the CSS tab as per your own requirements.</li> <li> <b>Configuring Designation</b> : Change the value of variable - designationQueryId="" : <ol type="i"><li> Use of this variable to display All Available Designation(s) on UI.</li> <li> In the PART CONFIGURATION SECTION, Change the value of the variable - designationQueryId="". This value can be found using SQL against your application Database by executing query (Select * from ADHOCQUERY Where NAME = '{your respective CRM application Ad-hoc Query Name of Designation Record Type}') on table. In this table you can copy the ID column value.</li></ol></li> <li> <b>Add/Remove Feature Section</b> : In this example we have two types of feature section. The first being the HTML tab, used for Controls available on Page UI. Secondly, the JAVASCRIPT tab, used for handling functionality of these HTML Controls. <ol type="i"><li> For adding Recurring Gift capability, add the HTML content between "RECURRING GIFT - SECTION START AND RECURRING GIFT - SECTION END" under HTML tab. Also add JAVASCRIPT between "RECURRENCE FUNCTIONS - SECTION START AND RECURRENCE FUNCTIONS - SECTION END" under JAVASCRIPT tab.</li> <li> For adding Gift Amount, choose HTML DESIGN between "GIFT AMOUNT - SECTION START AND GIFT AMOUNT - SECTION END" under HTML tab. Also add JAVASCRIPT between "RECURRENCE FUNCTIONS - SECTION START AND RECURRENCE FUNCTIONS - SECTION END" under JAVASCRIPT tab.</li> <li> For adding Consent capability, choose HTML DESIGN between "CONSENT - SECTION START AND CONSENT - SECTION END" under HTML tab. Also add JAVASCRIPT between "CONSENT VALIDATION FUNCTIONS - SECTION START AND CONSENT VALIDATION FUNCTIONS - SECTION END" under JAVASCRIPT tab.</li></ol></li> </ol> <ul class="nav nav-tabs"> <li class="active"><a href="#example-complete-SP25-html" data-toggle="tab">HTML</a></li> <li><a href="#example-complete-SP25-js" data-toggle="tab">JS</a></li> <li><a href="#example-complete-SP25-css" data-toggle="tab">CSS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-complete-SP25-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
  
  <span class="nt">&lt;title&gt;</span>ADF - Complete Example(New)<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="nt">&gt;</span>
  
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"</span><span class="nt">&gt;</span>
    
  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>

        <span class="cm">/*------------------------------------------- PART CONFIGURATION - SECTION START -------------------------------------------*/</span>

        <span class="kd">var</span> <span class="nx">designationQueryId</span> <span class="o">=</span> <span class="s2">"8d9fccdf-dea8-4590-8ec2-355a4c59df04"</span><span class="p">;</span>  <span class="cm">/* Ad-hoc Query of Designation Type With Enable query for CMS REST API */</span>

        <span class="kd">var</span> <span class="nx">consentPartId</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">cnstType</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'cnsttype'</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"True"</span><span class="p">);</span>

        <span class="cm">/*------------------------------------------- PART CONFIGURATION - SECTION END -------------------------------------------*/</span>

  <span class="nt">&lt;/script&gt;</span>
	
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"donationForm container"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"alert"</span> <span class="na">style=</span><span class="s">"background-color:#b6cbe5;"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;h3&gt;</span>Advanced Donation Form <span class="nt">&lt;small&gt;</span>Complete Example(New)<span class="nt">&lt;/small&gt;&lt;/h3&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"validation"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentValidation"</span> <span class="na">id=</span><span class="s">"inline"</span> <span class="na">style=</span><span class="s">"display:none"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">"donationInformation"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Gift Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="c">&lt;!-- *********************************************** GIFT AMOUNT - SECTION START *********************************************** --&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"giftAmount"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"required"</span><span class="nt">&gt;</span>Select Gift Amount:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"list-group"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt1000"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"1000"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt1000"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Platinum<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$1,000<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt500"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"500"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt500"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Gold<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$500<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt100"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"100"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt100"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Silver<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$100<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt25"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"25"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt25"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Bronze<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$25<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"other"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amtOther"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"-1"</span> <span class="na">checked=</span><span class="s">"checked"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amtOther"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Enter an amount<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"txtAmount"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">placeholder=</span><span class="s">"$"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                            <span class="nt">&lt;/ul&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="c">&lt;!-- *********************************************** GIFT AMOUNT - SECTION END *********************************************** --&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"recurrence"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"required"</span><span class="nt">&gt;</span>Recurrence:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"list-group"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"recOneTime"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioRecurrence"</span> <span class="na">value=</span><span class="s">"0"</span> <span class="na">checked=</span><span class="s">"checked"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"recOneTime"</span><span class="nt">&gt;</span>
                                        Make a one time gift.
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"recMonthly"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioRecurrence"</span> <span class="na">value=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"recMonthly"</span><span class="nt">&gt;</span>
                                        Recurring Gift.
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                            <span class="nt">&lt;/ul&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>

                        <span class="c">&lt;!-- *********************************************** RECURRING GIFT - SECTION START *********************************************** --&gt;</span>

                        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divRecurringGift"</span> <span class="na">style=</span><span class="s">"display:none;"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;h5&gt;</span>What's good?<span class="nt">&lt;/h5&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-9"</span><span class="nt">&gt;</span>
                                    I want to pledge above amount to the Avengers Initiative in
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"number-of-installments"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-1"</span><span class="nt">&gt;</span>
                                    installments.
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    I pledge to pay
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"installment-amount"</span><span class="nt">&gt;</span>$0.00<span class="nt">&lt;/label&gt;</span> every
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divFrequency"</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                                            <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"frequency"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select Frequency<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Weekly<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>Monthly<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Quarterly<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>Annually<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7"</span><span class="nt">&gt;</span>Every4Weeks<span class="nt">&lt;/option&gt;</span>
                                            <span class="nt">&lt;/select&gt;</span>
                                        <span class="nt">&lt;/div&gt;</span>
                                        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divDayOfWeek"</span> <span class="na">class=</span><span class="s">"col-sm-6"</span> <span class="na">style=</span><span class="s">"display:none;"</span><span class="nt">&gt;</span>
                                            <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"day-of-week"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select Day-of-Week<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"0"</span><span class="nt">&gt;</span>Sunday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Monday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>Tuesday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Wednesday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>Thursday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>Friday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6"</span><span class="nt">&gt;</span>Saturday<span class="nt">&lt;/option&gt;</span>
                                            <span class="nt">&lt;/select&gt;</span>
                                        <span class="nt">&lt;/div&gt;</span>
                                    <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    on the
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divDayOfMonth"</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"day-of-month"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select Day-Of-Month<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>1<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>2<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>3<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>4<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>5<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>6<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>7<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>8<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>9<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>10<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>11<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>12<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>13<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>14<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>15<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>16<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>17<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>18<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>19<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>20<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>21<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>22<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>23<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>24<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>25<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>26<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>27<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>28<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>29<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>30<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>31<span class="nt">&lt;/option&gt;</span>
                                    <span class="nt">&lt;/select&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-1"</span><span class="nt">&gt;</span>
                                    of
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divMonth"</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"month"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Month<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>January<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>February<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>March<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>April<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>May<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6"</span><span class="nt">&gt;</span>June<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7"</span><span class="nt">&gt;</span>July<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"8"</span><span class="nt">&gt;</span>August<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"9"</span><span class="nt">&gt;</span>September<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"10"</span><span class="nt">&gt;</span>October<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"11"</span><span class="nt">&gt;</span>November<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"12"</span><span class="nt">&gt;</span>December<span class="nt">&lt;/option&gt;</span>
                                    <span class="nt">&lt;/select&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    starting on
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"start-date"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"mm/dd/yyyy"</span> <span class="nt">/&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
                                    . My final payment will be made on <span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"end-date"</span> <span class="na">class=</span><span class="s">"col-form-label"</span> <span class="nt">/&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>

                            <span class="c">&lt;!-- *********************************************** RECURRING GIFT - SECTION END *********************************************** --&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>

            <span class="nt">&lt;fieldset&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Additional Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"isAnonymous"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"isAnonymous"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Make this gift anonymously
                        <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"createGiftAidDeclaration"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"createGiftAidDeclaration"</span> <span class="na">class=</span><span class="s">"col-form-label checkbox-inline"</span><span class="nt">&gt;</span>
                            Create gift aid declaration
                        <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>

                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"Comments"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Comments:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"comments"</span> <span class="na">id=</span><span class="s">"comments"</span> <span class="na">maxlength=</span><span class="s">"400"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"appealId"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Appeal ID:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"appealId"</span> <span class="na">maxlength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter an appeal GUID"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"designation"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Designation:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"designation"</span> <span class="na">name=</span><span class="s">" "</span><span class="nt">&gt;&lt;/select&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>
            <span class="c">&lt;!-- *********************************************** CONSENT - SECTION START *********************************************** --&gt;</span>

            <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"myModal"</span> <span class="na">class=</span><span class="s">"modal-content"</span> <span class="na">style=</span><span class="s">"display:none"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentValidation"</span> <span class="na">id=</span><span class="s">"overlay"</span> <span class="na">style=</span><span class="s">"display:none;padding: 7px 0px 8px 7px"</span><span class="nt">&gt;&lt;/div&gt;</span>
                    <span class="nt">&lt;fieldset</span> <span class="na">style=</span><span class="s">"border:none;"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;legend&gt;</span>
                            <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"consentTitle"</span><span class="nt">&gt;</span>Consent Start<span class="nt">&lt;/span&gt;&lt;br</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;hr</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"consentStatement"</span> <span class="na">style=</span><span class="s">"text-align:center;"</span><span class="nt">&gt;&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;/legend&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">value=</span><span class="s">""</span> <span class="na">id=</span><span class="s">"hdnCRMConsentSolicitCode"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">value=</span><span class="s">""</span> <span class="na">id=</span><span class="s">"hdnCRMSolicitCode"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"consentOption"</span> <span class="na">class=</span><span class="s">"table"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;tr&gt;</span>
                                <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"border:1px solid black;border-color:#efefef;"</span><span class="nt">&gt;</span>Communication Type<span class="nt">&lt;/th&gt;</span>
                                <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"border:1px solid black;border-color:#efefef;"</span><span class="nt">&gt;</span>Opt-in<span class="nt">&lt;/th&gt;</span>
                                <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"border:1px solid black;border-color:#efefef;"</span><span class="nt">&gt;</span>Opt-out<span class="nt">&lt;/th&gt;</span>
                            <span class="nt">&lt;/tr&gt;</span>
                        <span class="nt">&lt;/table&gt;</span>
                        <span class="nt">&lt;legend&gt;</span>
                            <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"privacylink"</span><span class="nt">&gt;</span>View Privacy Policy<span class="nt">&lt;/a&gt;&lt;br</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;button</span> <span class="na">style=</span><span class="s">"display:none"</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span> <span class="na">type=</span><span class="s">"button"</span><span class="nt">&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
                        <span class="nt">&lt;/legend&gt;</span>
                    <span class="nt">&lt;/fieldset&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>

            <span class="c">&lt;!-- *********************************************** CONSENT - SECTION END *********************************************** --&gt;</span>
            <span class="c">&lt;!-- *********************************************** BILLING/DONOR INFORMATION - SECTION START *********************************************** --&gt;</span>

            <span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">"billingInformation"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Finder Number<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"finderNumber"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Finder number:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"finderNumber"</span> <span class="na">maxlength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter a finder number"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Billing Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"title"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Title:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"title"</span> <span class="na">name=</span><span class="s">" "</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span> <span class="na">selected=</span><span class="s">"selected"</span><span class="nt">&gt;</span>select a value<span class="nt">&lt;/option&gt;</span>
                        <span class="nt">&lt;/select&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"firstName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            First name:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"firstName"</span> <span class="na">maxlength=</span><span class="s">"30"</span> <span class="na">placeholder=</span><span class="s">"enter your first name"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"middleName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Middle name:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"middleName"</span> <span class="na">maxlength=</span><span class="s">"30"</span> <span class="na">placeholder=</span><span class="s">"enter your middle name"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"lastName"</span> <span class="na">class=</span><span class="s">"required col-form-label"</span><span class="nt">&gt;</span>
                            Last name:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"lastName"</span> <span class="na">maxlength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter your last name"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"country"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span><span class="nt">&gt;</span>
                            Country:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"country"</span><span class="nt">&gt;&lt;/select&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"streetAddress"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span> <span class="na">id=</span><span class="s">"streetAddressLabel"</span><span class="nt">&gt;</span>
                            Address:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"streetAddress"</span> <span class="na">cols=</span><span class="s">"20"</span> <span class="na">rows=</span><span class="s">"1"</span><span class="nt">&gt;&lt;/textarea&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"city"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span> <span class="na">id=</span><span class="s">"cityLabel"</span><span class="nt">&gt;</span>
                            City:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"city"</span> <span class="na">maxlength=</span><span class="s">"50"</span> <span class="na">placeholder=</span><span class="s">"enter a city"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"state"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span> <span class="na">id=</span><span class="s">"stateLabel"</span><span class="nt">&gt;</span>
                            State/Province:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"state"</span><span class="nt">&gt;&lt;/select&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"postalCode"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span> <span class="na">id=</span><span class="s">"postalCodeLabel"</span><span class="nt">&gt;</span>
                            ZIP/Postal code:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"postalCode"</span> <span class="na">maxlength=</span><span class="s">"10"</span> <span class="na">placeholder=</span><span class="s">"enter a zip code"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"emailAddress"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span><span class="nt">&gt;</span>
                            Email:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"email"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"emailAddress"</span> <span class="na">maxlength=</span><span class="s">"120"</span> <span class="na">placeholder=</span><span class="s">"enter an email"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"phone"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Phone:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"phone"</span> <span class="na">placeholder=</span><span class="s">"enter a phone"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>

                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Payment Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow required"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"list-group"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;li</span> <span class="na">id=</span><span class="s">"creditCard"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"paymentCreditCard"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"paymentMethod"</span> <span class="na">value=</span><span class="s">"0"</span> <span class="na">checked=</span><span class="s">"checked"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"paymentCreditCard"</span><span class="nt">&gt;</span>
                                        Credit Card
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li</span> <span class="na">id=</span><span class="s">"billMeLater"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"paymentBillMeLater"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"paymentMethod"</span> <span class="na">value=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"paymentBillMeLater"</span><span class="nt">&gt;</span>
                                        Bill Me Later
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li</span> <span class="na">id=</span><span class="s">"directDebit"</span> <span class="na">style=</span><span class="s">"display:none;"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"paymentDirectDebit"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"paymentMethod"</span> <span class="na">value=</span><span class="s">"2"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"paymentDirectDebit"</span><span class="nt">&gt;</span>
                                        DirectDebit
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                            <span class="nt">&lt;/ul&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Matching Gifts<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"isCorporate"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"isCorporate"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            This donation if on behalf of a company
                        <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row required invisible"</span> <span class="na">id=</span><span class="s">"organizationNameDiv"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"organizationName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Company name:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"organizationName"</span> <span class="na">maxLength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter your company name"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>

            <span class="c">&lt;!-- *********************************************** BILLING/DONOR INFORMATION - SECTION END *********************************************** --&gt;</span>
            <span class="c">&lt;!-- *********************************************** TRIBUTE - SECTION START *********************************************** --&gt;</span>

            <span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">"tribueInformation"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Tribute /Acknowledgee Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">row=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                            <span class="ni">&amp;nbsp;&amp;nbsp;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"includeTribue"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"includeTribue"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                Include tribute:
                            <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"tribute"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"required"</span><span class="nt">&gt;</span>What kind of tribute:<span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"pagination"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;li&gt;</span>
                                        <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"kindSpecific"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioTribute"</span> <span class="na">value=</span><span class="s">"1"</span> <span class="na">checked=</span><span class="s">"checked"</span> <span class="nt">/&gt;</span>
                                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"kindSpecific"</span><span class="nt">&gt;</span>
                                            <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Specific<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;/li&gt;</span>
                                    <span class="nt">&lt;li&gt;</span>
                                        <span class="ni">&amp;nbsp;&amp;nbsp;&amp;nbsp;</span>
                                        <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"kindGeneral"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioTribute"</span> <span class="na">value=</span><span class="s">"2"</span> <span class="nt">/&gt;</span>
                                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"kindGeneral"</span><span class="nt">&gt;</span>
                                            <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>General<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;/ul&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"specificTribute"</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeID"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Tribute ID:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeID"</span> <span class="na">maxlength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter a tribute GUID"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"generalTribute"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeFirstName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        First name:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeFirstName"</span> <span class="na">placeholder=</span><span class="s">"enter a first name"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeLastName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Last name:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeLastName"</span> <span class="na">placeholder=</span><span class="s">"enter a last name"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeType"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Type:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeType"</span> <span class="na">placeholder=</span><span class="s">"enter a tribute type"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeDescription"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Description:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeDescription"</span> <span class="na">placeholder=</span><span class="s">"enter a description"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"includeAcknowledgee"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"includeAcknowledgee"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Include acknowledgee:
                                <span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"acknowledgee"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeFirstName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        First name:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeeFirstName"</span> <span class="na">placeholder=</span><span class="s">"enter a first name"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeLastName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Last name:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeeLastName"</span> <span class="na">placeholder=</span><span class="s">"enter a last name"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeCountry"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Country:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"adfSelect form-control required"</span> <span class="na">id=</span><span class="s">"acknowledgeeCountry"</span><span class="nt">&gt;&lt;/select&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeAddressLines"</span> <span class="na">id=</span><span class="s">"streetAddressLabelAcknowledgee"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Address lines:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeeAddressLines"</span> <span class="na">placeholder=</span><span class="s">"enter address lines"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeCity"</span> <span class="na">id=</span><span class="s">"cityLabelAcknowledgee"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        City:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeeCity"</span> <span class="na">placeholder=</span><span class="s">"enter city"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeState"</span> <span class="na">id=</span><span class="s">"stateLabelAcknowledgee"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        State:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"adfSelect form-control required"</span> <span class="na">placeholder=</span><span class="s">"State"</span> <span class="na">id=</span><span class="s">"acknowledgeeState"</span><span class="nt">&gt;&lt;/select&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeePostalCode"</span> <span class="na">id=</span><span class="s">"postalCodeLabelAcknowledgee"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Postal code:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeePostalCode"</span> <span class="na">placeholder=</span><span class="s">"enter postal code"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeEmail"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Email:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeeEmail"</span> <span class="na">placeholder=</span><span class="s">"enter email"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeePhone"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Phone:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeePhone"</span> <span class="na">placeholder=</span><span class="s">"enter phone"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>

            <span class="c">&lt;!-- *********************************************** TRIBUTE - SECTION END *********************************************** --&gt;</span>
            <span class="c">&lt;!-- *********************************************** ATTRIBUTE INFORMATION - SECTION START *********************************************** --&gt;</span>

            <span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">"attributeInformation"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Attributes<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"includeAttribute1"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"includeAttribute1"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                Include attribute 1:
                            <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"attribute1"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"attribute1ID"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Attribute ID:
                                <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"attribute1ID"</span> <span class="na">placeholder=</span><span class="s">"enter attribute GUID"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"attribute1Value"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Value:
                                <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"attribute1Value"</span> <span class="na">placeholder=</span><span class="s">"enter value"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"includeAttribute2"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"includeAttribute2"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                Include attribute 2:
                            <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"attribute2"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"attribute2ID"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Attribute ID:
                                <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"attribute2ID"</span> <span class="na">placeholder=</span><span class="s">"enter attribute GUID"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"attribute2Value"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Value:
                                <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"attribute2Value"</span> <span class="na">placeholder=</span><span class="s">"enter value"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>

            <span class="c">&lt;!-- *********************************************** ATTRIBUTE INFORMATION - SECTION END *********************************************** --&gt;</span>
            <span class="c">&lt;!-- *********************************************** DIRECT DEBIT - SECTION START *********************************************** --&gt;</span>

            <span class="nt">&lt;fieldset</span> <span class="na">id=</span><span class="s">"directDebitInformation"</span> <span class="na">style=</span><span class="s">"display:none;"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Direct Debit<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"directDebitSection"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span> <span class="na">id=</span><span class="s">"tr_DDPDFInstructions"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12 text-justify"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;span&gt;</span>
                                <span class="nt">&lt;i&gt;</span>
                                    In order to set up a Direct Debit instruction online, you must be the account holder of
                                    a personal bank or building society account. If you are not the only required signatory
                                    on your account or you would rather send us a paper version please
                                    <span class="nt">&lt;a</span> <span class="na">ID=</span><span class="s">"lnkDDPDF"</span> <span class="na">title=</span><span class="s">"Direct Debit PDF"</span> <span class="na">href=</span><span class="s">"#"</span>
                                       <span class="na">Target=</span><span class="s">"_blank"</span> <span class="na">rel=</span><span class="s">"noopener noreferrer"</span><span class="nt">&gt;</span>click here<span class="nt">&lt;/a&gt;</span>
                                <span class="nt">&lt;/i&gt;</span>
                            <span class="nt">&lt;/span&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblFinancialLBL"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Financial Institution:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtFinancialInstitution"</span> <span class="na">MaxLength=</span><span class="s">"100"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblBranchName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Branch Name:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtBranchName"</span> <span class="na">MaxLength=</span><span class="s">"100"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span> <span class="na">id=</span><span class="s">"tr_BankingSystemType"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblBankingSystemType"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Banking System Type:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;select</span> <span class="na">ID=</span><span class="s">"ddlBankingSystemType"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;&lt;/select&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblRoutNumLBL"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Routing Number:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtRoutingNumber"</span> <span class="na">MaxLength=</span><span class="s">"9"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;a</span> <span class="na">ID=</span><span class="s">"lnk_BankHelp"</span> <span class="na">title=</span><span class="s">"Display help details in another window"</span> <span class="na">style=</span><span class="s">"cursor:pointer;"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">"help"</span> <span class="na">title=</span><span class="s">"Help"</span> <span class="na">style=</span><span class="s">"height:32px;width:36px;vertical-align:bottom; border:0;"</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;/a&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblAccountNumber"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Account Number:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"spn_AccountNo"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtAccountNumber"</span> <span class="na">MaxLength=</span><span class="s">"20"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;/span&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span> <span class="na">id=</span><span class="s">"tr_CanadaTransitNum"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblCanadaTransitNum"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Transit Number:<span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtCanTransitNumber"</span> <span class="na">MaxLength=</span><span class="s">"5"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-8"</span> <span class="na">id=</span><span class="s">"spn_AccountNoNZ"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;table&gt;</span>
                                        <span class="nt">&lt;tr&gt;</span>
                                            <span class="nt">&lt;td&gt;</span>
                                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtAccountNumberNZ"</span> <span class="na">MaxLength=</span><span class="s">"7"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                                            <span class="nt">&lt;/td&gt;</span>
                                            <span class="nt">&lt;td&gt;</span>
                                                <span class="nt">&lt;span&gt;</span>-<span class="nt">&lt;/span&gt;</span>
                                            <span class="nt">&lt;/td&gt;</span>
                                            <span class="nt">&lt;td&gt;</span>
                                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtSuffixNZ"</span> <span class="na">MaxLength=</span><span class="s">"3"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                                            <span class="nt">&lt;/td&gt;</span>
                                            <span class="nt">&lt;td&gt;</span>
                                                <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblSuffixNZ"</span> <span class="na">Visible=</span><span class="s">"false"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;&lt;/label&gt;</span>
                                            <span class="nt">&lt;/td&gt;</span>
                                        <span class="nt">&lt;/tr&gt;</span>
                                    <span class="nt">&lt;/table&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span> <span class="na">id=</span><span class="s">"tr_AccountType"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblAccountType"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Account Type:<span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;select</span> <span class="na">ID=</span><span class="s">"ddlAccountType"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;&lt;/select&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblAccountHolderName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Account Holder's Name:<span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtAccountHolder"</span> <span class="na">MaxLength=</span><span class="s">"50"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span> <span class="na">id=</span><span class="s">"tr_CurrentDate"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblDebitDate"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Date :<span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lbl_CurrentDate"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;&lt;/label&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span> <span class="na">id=</span><span class="s">"tr_OrigNumber"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblOriginatorID"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Service user's ID number :<span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lbl_OrigNumber"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;&lt;/label&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"tr_DDBankInstructions"</span> <span class="na">class=</span><span class="s">"text-justify"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;span</span> <span class="na">colspan=</span><span class="s">"3"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label&gt;&lt;b&gt;</span>Instruction to your Bank or Building Society<span class="nt">&lt;/b&gt;&lt;/label&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lbl_DDBankInstructions"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;i&gt;</span>
                                Please pay %1 Direct Debits from the account detailed in this Instruction subject to the safeguards assured by
                                the Direct Debit Guarantee. I understand that this Instruction may remain with %1 and, if so, details will be passed
                                electronically to my Bank/Building Society.
                            <span class="nt">&lt;/i&gt;</span>
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;label&gt;</span>
                            <span class="nt">&lt;i&gt;</span>Banks and Building Societies may not accept Direct Debit Instructions for some types of account.<span class="nt">&lt;/i&gt;</span>
                        <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"tr_DDInstructions"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;span</span> <span class="na">colspan=</span><span class="s">"3"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">"Direct Debit"</span> <span class="na">title=</span><span class="s">"Direct Debit"</span> <span class="na">style=</span><span class="s">"text-align: center;"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;a</span> <span class="na">ID=</span><span class="s">"lnk_DDGuarantee"</span> <span class="na">title=</span><span class="s">"Display the Direct Debit Guarantee in another window"</span> <span class="na">href=</span><span class="s">"#"</span>
                           <span class="na">style=</span><span class="s">"cursor:pointer;color:blue;text-decoration:underline;"</span><span class="nt">&gt;</span>The Direct Debit Guarantee<span class="nt">&lt;/a&gt;</span>
                    <span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"tr_DDPDFInstructions2"</span> <span class="na">class=</span><span class="s">"text-justify"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;span</span> <span class="na">colspan=</span><span class="s">"2"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label&gt;</span>
                            <span class="nt">&lt;i&gt;</span>By clicking 'Donate Now' you are confirming that you are the account holder and that you are the only person required to authorize debits from this account.<span class="nt">&lt;/i&gt;</span>
                        <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>

            <span class="c">&lt;!-- *********************************************** DIRECT DEBIT - SECTION END *********************************************** --&gt;</span>
            <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
            <span class="c">&lt;!-- This is the final 'Donate' button, when Donor fill the all required field of page after that press this button for Submit Donation. --&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"donate"</span> <span class="na">class=</span><span class="s">"submit btn btn-success form-control"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">value=</span><span class="s">"Donate"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"btn btn-danger form-control"</span> <span class="na">type=</span><span class="s">"reset"</span> <span class="na">value=</span><span class="s">"Reset"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>

        <span class="nt">&lt;/div&gt;</span>

        <span class="c">&lt;!-- Its a compulsory div, it display the Confirmation screen with Donor details after successful donation. --&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"confirmation container"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-complete-SP25-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		
		<span class="cm">/*------------------------------------------- VARIABLE DECLARATION - SECTION START -------------------------------------------*/</span>

        <span class="kd">var</span> <span class="nx">blocked</span><span class="p">,</span>
            <span class="nx">donationService</span><span class="p">,</span>
            <span class="nx">part</span><span class="p">,</span>
            <span class="nx">partInstanceId</span><span class="p">,</span>
            <span class="nx">addressLinesCaption</span><span class="p">,</span>
            <span class="nx">cityCaption</span><span class="p">,</span>
            <span class="nx">stateCaption</span><span class="p">,</span>
            <span class="nx">postCodeCaption</span><span class="p">,</span>
            <span class="nx">installmentAmt</span><span class="p">,</span>
            <span class="nx">SrtDt</span><span class="p">,</span>
            <span class="nx">merchantAccountId</span><span class="p">,</span>
            <span class="nx">donationData</span><span class="p">,</span>
            <span class="nx">ServerDate</span><span class="p">,</span>
            <span class="nx">ClientSitesID</span><span class="p">,</span>
            <span class="nx">checkoutGenericError</span> <span class="o">=</span> <span class="s2">"There was an error while performing the operation. The page will be refreshed."</span><span class="p">;</span>

        <span class="cm">/*------------------------------------------- VARIABLE DECLARATION - SECTION END -------------------------------------------*/</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">transactionID</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

            <span class="c1">//Checkout Payment pop-up is loaded in this form</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'form[data-formtype="bbCheckout"]'</span><span class="p">).</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="s1">'&lt;form method=</span><span class="se">\'</span><span class="s1">get</span><span class="se">\'</span><span class="s1"> id=</span><span class="err">\</span><span class="s1">"paymentForm</span><span class="err">\</span><span class="s1">" data-formtype=</span><span class="se">\'</span><span class="s1">bbCheckout</span><span class="se">\'</span><span class="s1"> data-disable-submit=</span><span class="se">\'</span><span class="s1">false</span><span class="se">\'</span><span class="s1"> novalidate&gt;&lt;</span><span class="err">\</span><span class="s1">/form&gt;'</span><span class="p">;</span>
                <span class="nx">$</span><span class="p">(</span><span class="s1">'body'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">form</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="nx">$</span><span class="p">(</span><span class="s2">"#paymentForm"</span><span class="p">).</span><span class="nx">submit</span><span class="p">(</span><span class="kd">function</span> <span class="nx">paymentComplete</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// prevent form from refreshing and show the transaction token</span>
                <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
            <span class="p">});</span>

            <span class="cm">/*------------------------------------------- JAVASCRIPT - VALIDATION FUNCTIONS - SECTION START -------------------------------------------*/</span>

            <span class="kd">function</span> <span class="nx">validateEmail</span><span class="p">(</span><span class="nx">email</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">re</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">(([^</span><span class="sr">&lt;&gt;()[</span><span class="se">\]\\</span><span class="sr">.,;:</span><span class="se">\s</span><span class="sr">@</span><span class="se">\"]</span><span class="sr">+</span><span class="se">(\.[^</span><span class="sr">&lt;&gt;()[</span><span class="se">\]\\</span><span class="sr">.,;:</span><span class="se">\s</span><span class="sr">@</span><span class="se">\"]</span><span class="sr">+</span><span class="se">)</span><span class="sr">*</span><span class="se">)</span><span class="sr">|</span><span class="se">(\"</span><span class="sr">.+</span><span class="se">\"))</span><span class="sr">@</span><span class="se">((\[[</span><span class="sr">0-9</span><span class="se">]{1,3}\.[</span><span class="sr">0-9</span><span class="se">]{1,3}\.[</span><span class="sr">0-9</span><span class="se">]{1,3}\.[</span><span class="sr">0-9</span><span class="se">]{1,3}\])</span><span class="sr">|</span><span class="se">(([</span><span class="sr">a-zA-Z</span><span class="se">\-</span><span class="sr">0-9</span><span class="se">]</span><span class="sr">+</span><span class="se">\.)</span><span class="sr">+</span><span class="se">[</span><span class="sr">a-zA-Z</span><span class="se">]{2,}))</span><span class="sr">$/</span><span class="p">;</span>
                <span class="k">return</span> <span class="nx">re</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">validatePhone</span><span class="p">(</span><span class="nx">phone</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">phone</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">re</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">[</span><span class="sr">0-9 </span><span class="se">\+\)\(\-]{6,20}\s?((([</span><span class="sr">xX</span><span class="se">]</span><span class="sr">|</span><span class="se">[</span><span class="sr">eE</span><span class="se">][</span><span class="sr">xX</span><span class="se">][</span><span class="sr">tT</span><span class="se">])\.?\s</span><span class="sr">*</span><span class="se">(\d</span><span class="sr">+</span><span class="se">))</span><span class="sr">*</span><span class="se">)</span><span class="sr">$/</span><span class="p">;</span>
                    <span class="k">return</span> <span class="nx">re</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">phone</span><span class="p">);</span>

                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

                    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>

            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">country</span><span class="p">,</span> <span class="nx">ctryData</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">country</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">ctryData</span><span class="p">.</span><span class="nx">Id</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">||</span> <span class="nx">country</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">ctryData</span><span class="p">.</span><span class="nx">Abbreviation</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">||</span> <span class="nx">country</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">ctryData</span><span class="p">.</span><span class="nx">Description</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">())</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">validateStartDate</span><span class="p">(</span><span class="nx">startDate</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">startDate</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">pattern</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">([</span><span class="sr">0-9</span><span class="se">]{2})\/([</span><span class="sr">0-9</span><span class="se">]{2})\/([</span><span class="sr">0-9</span><span class="se">]{4})</span><span class="sr">$/</span><span class="p">;</span>
                    <span class="k">return</span> <span class="nx">pattern</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">startDate</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">ValidateDonationRequest</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">resolve</span><span class="p">();</span>
                    <span class="p">};</span>
                    <span class="nx">onFail</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">error</span><span class="p">));</span>
                    <span class="p">};</span>
                    <span class="nx">donationService</span><span class="p">.</span><span class="nx">validateDonationRequest</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFail</span><span class="p">)</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="c1">// this function validate all required fields of donation page</span>
            <span class="kd">function</span> <span class="nx">validateFormClientSide</span><span class="p">()</span> <span class="p">{</span>

                <span class="nx">$</span><span class="p">(</span><span class="s2">".validation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">errs</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
                <span class="c1">//Amount</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">getDonationAmount</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Gift amount is not valid.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Last Name</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#lastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Last name is required.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Email Address</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">validateEmail</span><span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#emailAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">()))</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Email is not valid.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Street Address</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#streetAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="nx">addressLinesCaption</span> <span class="o">+</span> <span class="s2">" is required.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//City</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#city"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="nx">cityCaption</span> <span class="o">+</span> <span class="s2">" is required.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Postal Code</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#postalCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="nx">postCodeCaption</span> <span class="o">+</span> <span class="s2">" is required.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Phone</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">validatePhone</span><span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#phone"</span><span class="p">).</span><span class="nx">val</span><span class="p">()))</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Phone is not valid.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">// Organization name</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isCorporate"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#organizationName"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Company name is required if this donation is on behalf of a company"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">// No Of Installation</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#number-of-installments"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Number Of installments should be greater than 1 in case of recurring gift."</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Payment Method</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentCreditCard"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentDirectDebit"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Select Payment Method"</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recOneTime"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentCreditCard"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentBillMeLater"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Select Payment Method"</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">errs</span> <span class="o">===</span> <span class="s2">""</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">errs</span><span class="p">);</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".validation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** CONSENT VALIDATION FUNCTIONS - SECTION START ***************************************/</span>

            <span class="kd">function</span> <span class="nx">consentValidation</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">".consentValidation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">errs</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
                <span class="c1">// Consent info</span>
                <span class="kd">var</span> <span class="nx">solicitCodeCount</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">).</span><span class="nx">length</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">solicitCodeCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">solicitCodeCount</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"isrequired"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"true"</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">find</span><span class="p">(</span><span class="s1">':checked'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">errs</span> <span class="o">+=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">find</span><span class="p">(</span><span class="s2">"label"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerHTML</span> <span class="o">+</span> <span class="s2">" is required.&lt;br/&gt;"</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">errs</span> <span class="o">===</span> <span class="s2">""</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">setConsentValidationMessage</span><span class="p">(</span><span class="nx">errs</span><span class="p">);</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">setConsentValidationMessage</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">".consentValidation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** CONSENT VALIDATION FUNCTIONS - SECTION END ***************************************/</span>

            <span class="cm">/*------------------------------------------- JAVASCRIPT - VALIDATION FUNCTIONS - SECTION END -------------------------------------------*/</span>

            <span class="cm">/*------------------------------------------- JAVASCRIPT FUNCTIONS - SECTION START -------------------------------------------*/</span>

            <span class="kd">function</span> <span class="nx">convertErrorToString</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">Message</span><span class="p">)</span> <span class="k">return</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Message</span><span class="p">;</span>
                    <span class="k">switch</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">ErrorCode</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">case</span> <span class="mi">101</span><span class="p">:</span>
                            <span class="k">return</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Field</span> <span class="o">+</span> <span class="s2">" is required."</span><span class="p">;</span>
                        <span class="k">case</span> <span class="mi">105</span><span class="p">:</span>
                            <span class="k">return</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Field</span> <span class="o">+</span> <span class="s2">" is not valid."</span><span class="p">;</span>
                        <span class="k">case</span> <span class="mi">106</span><span class="p">:</span>
                            <span class="k">return</span> <span class="s2">"Record for "</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Field</span> <span class="o">+</span> <span class="s2">" was not found."</span><span class="p">;</span>
                        <span class="k">case</span> <span class="mi">203</span><span class="p">:</span>
                            <span class="k">return</span> <span class="s2">"Donation not completed on BBSP."</span><span class="p">;</span>
                        <span class="k">case</span> <span class="mi">107</span><span class="p">:</span>
                            <span class="k">return</span> <span class="s2">"Max length for "</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Field</span> <span class="o">+</span> <span class="s2">" exceeded."</span><span class="p">;</span>
                        <span class="nl">default</span><span class="p">:</span>
                            <span class="k">return</span> <span class="s2">"Error code "</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">+</span> <span class="s2">"."</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">errors</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">message</span> <span class="o">=</span> <span class="s2">"Unknown error.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">errors</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">message</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
                    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">errors</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">message</span> <span class="o">=</span> <span class="nx">message</span> <span class="o">+</span> <span class="nx">convertErrorToString</span><span class="p">(</span><span class="nx">errors</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">+</span> <span class="s2">"&lt;br/&gt;"</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">message</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">// Extract the data entered by the user and fill the result object for transaction processing.</span>
            <span class="kd">function</span> <span class="nx">extractDataFromForm</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">paymentMethod</span><span class="p">,</span>
                    <span class="nx">result</span><span class="p">,</span>
                    <span class="nx">organizationName</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span>
                    <span class="nx">consentOptions</span><span class="p">,</span>
                    <span class="nx">solicitCodeCount</span><span class="p">;</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isCorporate"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">organizationName</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#organizationName"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="nx">paymentMethod</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[name='paymentMethod']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="nx">result</span> <span class="o">=</span> <span class="p">{};</span>
                <span class="c1">// Donor information</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="na">Title</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#title"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">FirstName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#firstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">MiddleName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#middleName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">LastName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#lastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">EmailAddress</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#emailAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">Phone</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#phone"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
                        <span class="na">Country</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">State</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">City</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#city"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#streetAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#postalCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                    <span class="p">},</span>
                    <span class="na">OrganizationName</span><span class="p">:</span> <span class="nx">organizationName</span>
                <span class="p">};</span>
                <span class="c1">// Consent Information</span>
                <span class="nx">consentOptions</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="nx">solicitCodeCount</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">solicitCodeCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">solicitCodeCount</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">consentOptions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                            <span class="na">SolicitCodeID</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">id</span><span class="p">,</span>
                            <span class="na">IsRequired</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">isrequired</span><span class="p">,</span>
                            <span class="na">ConsentPreferenceCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">find</span><span class="p">(</span><span class="s1">':checked'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                        <span class="p">});</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">ContactConsents</span> <span class="o">=</span> <span class="p">{</span> <span class="na">ConsentPartId</span><span class="p">:</span> <span class="nx">consentPartId</span><span class="p">,</span> <span class="na">SolicitCodes</span><span class="p">:</span> <span class="nx">consentOptions</span> <span class="p">};</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="na">PaymentMethod</span><span class="p">:</span> <span class="nx">paymentMethod</span><span class="p">,</span>
                    <span class="na">Designations</span><span class="p">:</span> <span class="p">[{</span>
                        <span class="na">Amount</span><span class="p">:</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">?</span> <span class="nx">installmentAmt</span> <span class="p">:</span> <span class="nx">getDonationAmount</span><span class="p">(),</span>
                        <span class="na">DesignationId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#designation"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                    <span class="p">}],</span>
                    <span class="na">FinderNumber</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#finderNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
					<span class="na">Comments</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#comments"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">CreateGiftAidDeclaration</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#createGiftAidDeclaration"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">),</span>
                    <span class="na">IsAnonymous</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isAnonymous"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">),</span>
                    <span class="na">IsCorporate</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isCorporate"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span>
                <span class="p">};</span>
                <span class="c1">// Recurring Gift Information</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="na">DayOfMonth</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#day-of-month'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">Month</span><span class="p">:</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"2"</span> <span class="o">||</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"3"</span><span class="p">)</span> <span class="p">?</span> <span class="s2">""</span> <span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#month'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">Frequency</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">StartDate</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#start-date"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">EndDate</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#end-date"</span><span class="p">).</span><span class="nx">text</span><span class="p">(),</span>
                        <span class="na">DayOfWeek</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#day-of-week"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">ProcessNow</span><span class="p">:</span> <span class="nx">isProcessNow</span><span class="p">()</span>
                    <span class="p">};</span>
                <span class="p">}</span>
                <span class="c1">// Tribute Information</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeTribue"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">kind</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[name='radioTribute']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">kind</span> <span class="o">===</span> <span class="s2">"1"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Tribute</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="na">TributeId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeID"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                        <span class="p">};</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Tribute</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="na">TributeDefinition</span><span class="p">:</span> <span class="p">{</span>
                                <span class="na">Name</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeFirstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeLastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                                <span class="na">FirstName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeFirstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                                <span class="na">LastName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeLastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                                <span class="na">Type</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeType"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                                <span class="na">Description</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeDescription"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                            <span class="p">}</span>
                        <span class="p">};</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAcknowledgee"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Tribute</span><span class="p">.</span><span class="nx">Acknowledgee</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="na">FirstName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeFirstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">LastName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeLastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">Country</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">AddressLines</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeAddressLines"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">City</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeCity"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">State</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeePostalCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">Phone</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeePhone"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">Email</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeEmail"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                        <span class="p">};</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="c1">// Attribute Information</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute1"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span> <span class="o">||</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute2"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Attributes</span> <span class="o">=</span> <span class="p">[];</span>
                    <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute1"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Attributes</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="na">AttributeId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute1ID"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">Value</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute1Value"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                        <span class="p">};</span>
                        <span class="nx">index</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute2"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Attributes</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="na">AttributeId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute2ID"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">Value</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute2Value"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                        <span class="p">};</span>
                        <span class="nx">index</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="c1">// Fetching Direct Debit related information</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">paymentMethod</span> <span class="o">===</span> <span class="s2">"2"</span> <span class="o">&amp;&amp;</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentDirectDebit"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span> <span class="o">=</span> <span class="p">{};</span>
                    <span class="kd">var</span> <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#country :selected"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">bankingType</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#ddlBankingSystemType :selected"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">FinancialInstitution</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtFinancialInstitution"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">BranchName</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtBranchName"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountHolderName</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtAccountHolder"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">BankingType</span> <span class="o">=</span> <span class="nx">bankingType</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"USA"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">RoutingNumber</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtRoutingNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">TransitNumber</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtCanTransitNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">RoutingNumber</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtRoutingNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Aus_NZ"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountNumber</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtAccountNumberNZ"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">SuffixNo</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtSuffixNZ"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountNumber</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtAccountNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Europe"</span> <span class="o">||</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Other"</span> <span class="o">||</span> <span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"USA"</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountType</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#ddlAccountType :selected"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountType</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">Origin</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="na">PageId</span><span class="p">:</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">pageInformation</span><span class="p">.</span><span class="nx">pageId</span><span class="p">,</span>
                    <span class="na">AppealId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#appealId"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">PartId</span><span class="p">:</span> <span class="nx">partInstanceId</span><span class="p">,</span>
                    <span class="na">ClientSitesID</span><span class="p">:</span> <span class="nx">ClientSitesID</span>
                <span class="p">};</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">BBSPTemplateSitePageId</span> <span class="o">=</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">pageInformation</span><span class="p">.</span><span class="nx">pageId</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">paymentMethod</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">BBSPReturnUri</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">MerchantAccountId</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">MerchantAccountId</span><span class="p">;</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">PartId</span> <span class="o">=</span> <span class="nx">partInstanceId</span><span class="p">;</span>
                <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">// this function submit Donation using CreateDonation() of donationService</span>
            <span class="kd">function</span> <span class="nx">submitDonationToServer</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">// For Pledge, go ahead and show the confirmation.  For credit card, you will be redirected to BBSP already.</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">Donation</span><span class="p">.</span><span class="nx">TransactionStatus</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".form"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                        <span class="nx">getConfirmationHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">Donation</span><span class="p">.</span><span class="nx">Id</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">Donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">PaymentMethod</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">+</span> <span class="s2">"?t="</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Donation</span><span class="p">.</span><span class="nx">Id</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">};</span>
                <span class="nx">onFail</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">));</span>
                <span class="p">};</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">data</span><span class="p">.</span><span class="nx">Donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">State</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#state :selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFail</span><span class="p">);</span>

            <span class="p">}</span>

            <span class="c1">// Success Callback from Secure Payment Page</span>
            <span class="kd">function</span> <span class="nx">completeBBSPPayment</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="s1">'&lt;%Session["'</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Id</span> <span class="o">+</span> <span class="s1">'"] = "'</span> <span class="o">+</span> <span class="kc">true</span> <span class="o">+</span> <span class="s1">'"; %&gt;'</span><span class="p">;</span>
                    <span class="nx">getConfirmationHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">Id</span><span class="p">);</span>
                <span class="p">};</span>
                <span class="nx">onFail</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">));</span>
                <span class="p">};</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">completeBBSPDonation</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFail</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">// Display the Final Confirmation screen after Successful Doantion</span>
            <span class="kd">function</span> <span class="nx">getConfirmationHtml</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
                <span class="p">};</span>
                <span class="nx">onFail</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">));</span>
                <span class="p">};</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">getDonationConfirmationHtml</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFail</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">// bind the Designation</span>
            <span class="kd">function</span> <span class="nx">bindDesignationDropdown</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">queryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">QueryService</span><span class="p">();</span>
                <span class="nx">statusFilter</span> <span class="o">=</span> <span class="p">{</span> <span class="na">columnName</span><span class="p">:</span> <span class="s1">'Is active'</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="s1">'True'</span> <span class="p">};</span>
                <span class="nx">queryService</span><span class="p">.</span><span class="nx">getResults</span><span class="p">(</span><span class="nx">designationQueryId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Rows</span><span class="p">;</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">rows</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s1">'Values'</span><span class="p">];</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#designation"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]));</span>
                    <span class="p">});</span>
                <span class="p">},</span> <span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="nx">statusFilter</span><span class="p">]);</span>
            <span class="p">}</span>

            <span class="c1">// populate the Title Dropdown with available list of Title</span>
            <span class="kd">function</span> <span class="nx">bindTitleDropdown</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">codeTableService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CodeTableService</span><span class="p">();</span>
                <span class="nx">codeTableService</span><span class="p">.</span><span class="nx">getTitles</span><span class="p">(</span><span class="s1">'456FFD4C-0FBF-49DB-A503-0726F86E2A39'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#title"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]));</span>
                    <span class="p">});</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="c1">// bind the Linked user Details to the HTML Controls of Page, when we logged in with Linked User</span>
            <span class="kd">function</span> <span class="nx">bindUserData</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">userService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">UserService</span><span class="p">();</span>
                <span class="nx">userService</span><span class="p">.</span><span class="nx">getProfile</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#firstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"FirstName"</span><span class="p">]);</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#lastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"LastName"</span><span class="p">]);</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#phone"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"Phone"</span><span class="p">]);</span>
                    <span class="c1">// only bind the Primary Address of Linked user</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">Addresses</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Addresses</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">ads</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Addresses</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">IsPrimary</span> <span class="o">===</span> <span class="kc">true</span><span class="p">;</span>
                        <span class="p">});</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">ads</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">ads</span><span class="p">[</span><span class="s2">"Country"</span><span class="p">]);</span>
                            <span class="nx">bindStateDropdown</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="nx">ads</span><span class="p">[</span><span class="s2">"State"</span><span class="p">]);</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#city"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">ads</span><span class="p">[</span><span class="s2">"City"</span><span class="p">]);</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#streetAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">ads</span><span class="p">[</span><span class="s2">"StreetAddress"</span><span class="p">]);</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#postalCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">ads</span><span class="p">[</span><span class="s2">"PostalCode"</span><span class="p">]);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="c1">// only bind the Primary Email Address of Linked user</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">EmailAddresses</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">EmailAddresses</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">email</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">EmailAddresses</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">IsPrimary</span> <span class="o">===</span> <span class="kc">true</span><span class="p">;</span>
                        <span class="p">});</span>

                        <span class="k">if</span> <span class="p">(</span><span class="nx">email</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#emailAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">email</span><span class="p">[</span><span class="s2">"EmailAddress"</span><span class="p">]);</span>
                        <span class="p">}</span>

                    <span class="p">}</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="c1">// change the Address related Label of Page, when change the Country from Country dropdown</span>
            <span class="kd">function</span> <span class="nx">updateAddressLabels</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">countryId</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">":selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">);</span>
                <span class="nx">countryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
                <span class="nx">countryService</span><span class="p">.</span><span class="nx">getAddressCaptions</span><span class="p">(</span><span class="nx">countryId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!!</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">addressLinesCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"AddressLines"</span><span class="p">];</span>
                        <span class="nx">cityCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"City"</span><span class="p">];</span>
                        <span class="nx">stateCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"State"</span><span class="p">];</span>
                        <span class="nx">postCodeCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"PostCode"</span><span class="p">];</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">addressLinesCaption</span> <span class="o">=</span> <span class="s2">"Address lines"</span><span class="p">;</span>
                        <span class="nx">cityCaption</span> <span class="o">=</span> <span class="s2">"City"</span><span class="p">;</span>
                        <span class="nx">stateCaption</span> <span class="o">=</span> <span class="s2">"State/Providence"</span><span class="p">;</span>
                        <span class="nx">postCodeCaption</span> <span class="o">=</span> <span class="s2">"Zip/Postal code"</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#streetAddressLabel"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">addressLinesCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#cityLabel"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">cityCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#stateLabel"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">stateCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#postalCodeLabel"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">postCodeCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                <span class="p">},</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="c1">// change the Tribute Acknowledge Address related Label of Page, when change the Tribute Acknowledge Country from Country dropdown</span>
            <span class="kd">function</span> <span class="nx">updateAcknowledgeeAddressLabels</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">countryId</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">":selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">);</span>
                <span class="nx">countryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
                <span class="nx">countryService</span><span class="p">.</span><span class="nx">getAddressCaptions</span><span class="p">(</span><span class="nx">countryId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!!</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">addressLinesCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"AddressLines"</span><span class="p">];</span>
                        <span class="nx">cityCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"City"</span><span class="p">];</span>
                        <span class="nx">stateCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"State"</span><span class="p">];</span>
                        <span class="nx">postCodeCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"PostCode"</span><span class="p">];</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">addressLinesCaption</span> <span class="o">=</span> <span class="s2">"Address lines"</span><span class="p">;</span>
                        <span class="nx">cityCaption</span> <span class="o">=</span> <span class="s2">"City"</span><span class="p">;</span>
                        <span class="nx">stateCaption</span> <span class="o">=</span> <span class="s2">"State/Providence"</span><span class="p">;</span>
                        <span class="nx">postCodeCaption</span> <span class="o">=</span> <span class="s2">"Zip/Postal code"</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#streetAddressLabelAcknowledgee"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">addressLinesCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#cityLabelAcknowledgee"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">cityCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#stateLabelAcknowledgee"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">stateCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#postalCodeLabelAcknowledgee"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">postCodeCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                <span class="p">},</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="p">});</span>
            <span class="p">}</span>


            <span class="cm">/*************************************** RECURRENCE FUNCTIONS - SECTION START ***************************************/</span>

            <span class="kd">function</span> <span class="nx">showHideRecurrenceDiv</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divRecurringGift"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divRecurringGift"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#directDebitInformation"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">updateEverythingPossible</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">donationAmount</span> <span class="o">=</span> <span class="nx">getDonationAmount</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">numberOfInstallments</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#number-of-installments"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">installmentAmount</span> <span class="o">=</span> <span class="nx">donationService</span><span class="p">.</span><span class="nx">getRecurringGiftInstallmentAmount</span><span class="p">(</span><span class="nx">donationAmount</span><span class="p">,</span> <span class="nx">numberOfInstallments</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">startDate</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#start-date"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">frequency</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">dayOfMonth</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#day-of-month'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">dayOfWeek</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#day-of-week"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">month</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#month'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">numberOfInstallments</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="s2">"Number Of installments should be greater than 1 in case of recurring gift."</span><span class="p">);</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="c1">//Weekly</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">||</span> <span class="nx">frequency</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span><span class="c1">//Monthly| Quarterly</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span><span class="c1">//Annually</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"inline"</span><span class="p">);</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="p">{</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="p">}</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span>    <span class="c1">//Every4Weeks</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">validateStartDate</span><span class="p">(</span><span class="nx">startDate</span><span class="p">))</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="kd">var</span> <span class="nx">StartDate1</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">startDate</span><span class="p">);</span>
                            <span class="kd">var</span> <span class="nx">dayOfStartDate</span> <span class="o">=</span> <span class="nx">StartDate1</span><span class="p">.</span><span class="nx">getDay</span><span class="p">();</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">dayOfStartDate</span> <span class="o">!=</span> <span class="nx">dayOfWeek</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">dayOfWeek</span><span class="p">,</span> <span class="mi">10</span><span class="p">)))</span> <span class="p">{</span>
                                <span class="kd">var</span> <span class="nx">startDateCopy</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">StartDate1</span><span class="p">);</span>
                                <span class="kd">var</span> <span class="nx">firstDayOfCurrentWeek</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">startDate</span><span class="p">);</span>
                                <span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">setHours</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                                <span class="c1">// if start date's day of week is not monday then calculate the first day(i.e. monday) of the week of start date</span>
                                <span class="c1">//{0-Sunday,1-Monday,2-Tuesday,3-Wednesday,4-Thursday,5-Friday,6-Saturday}</span>
                                <span class="k">if</span> <span class="p">(</span><span class="nx">dayOfStartDate</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">StartDate1</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">-</span> <span class="nx">dayOfStartDate</span> <span class="o">+</span> <span class="p">(</span><span class="nx">dayOfStartDate</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">?</span> <span class="o">-</span><span class="mi">6</span> <span class="p">:</span> <span class="mi">1</span><span class="p">));</span>
                                <span class="p">}</span>
                                <span class="c1">// if the installment's day of week is not same as start date's day of week , then adjust the start date.</span>
                                <span class="k">while</span> <span class="p">(</span><span class="nx">firstDayOfCurrentWeek</span> <span class="o">&lt;</span> <span class="nx">startDateCopy</span> <span class="o">||</span>
                                    <span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()</span> <span class="o">!=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">dayOfWeek</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="p">{</span>
                                    <span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
                                <span class="p">}</span>
                                <span class="c1">// set the start date's to the expected day of week</span>
                                <span class="nx">StartDate1</span> <span class="o">=</span> <span class="nx">firstDayOfCurrentWeek</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="kd">var</span> <span class="nx">endDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">StartDate1</span><span class="p">);</span>
                            <span class="nx">endDate</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">StartDate1</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="mi">7</span> <span class="o">*</span> <span class="p">(</span><span class="nx">numberOfInstallments</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)));</span>
                            <span class="kd">var</span> <span class="nx">endDateFormatted</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">endDate</span><span class="p">)</span> <span class="p">{</span>
                                <span class="kd">var</span> <span class="nx">monthNames</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"January"</span><span class="p">,</span> <span class="s2">"February"</span><span class="p">,</span> <span class="s2">"March"</span><span class="p">,</span> <span class="s2">"April"</span><span class="p">,</span> <span class="s2">"May"</span><span class="p">,</span> <span class="s2">"June"</span><span class="p">,</span> <span class="s2">"July"</span><span class="p">,</span> <span class="s2">"August"</span><span class="p">,</span> <span class="s2">"September"</span><span class="p">,</span> <span class="s2">"October"</span><span class="p">,</span> <span class="s2">"November"</span><span class="p">,</span> <span class="s2">"December"</span><span class="p">];</span>
                                <span class="nx">endDateFormatted</span> <span class="o">=</span> <span class="nx">monthNames</span><span class="p">[</span><span class="nx">endDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">endDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="s2">", "</span> <span class="o">+</span> <span class="nx">endDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="p">{</span>
                            <span class="kd">var</span> <span class="nx">endDate</span> <span class="o">=</span> <span class="nx">donationService</span><span class="p">.</span><span class="nx">getRecurringGiftLastPaymentDate</span><span class="p">(</span><span class="nx">numberOfInstallments</span><span class="p">,</span> <span class="nx">frequency</span><span class="p">,</span> <span class="nx">startDate</span><span class="p">,</span> <span class="nx">month</span><span class="p">,</span> <span class="nx">dayOfMonth</span><span class="p">,</span> <span class="nx">dayOfWeek</span><span class="p">);</span>
                            <span class="kd">var</span> <span class="nx">endDateFormatted</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">endDate</span><span class="p">)</span> <span class="p">{</span>
                                <span class="kd">var</span> <span class="nx">monthNames</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"January"</span><span class="p">,</span> <span class="s2">"February"</span><span class="p">,</span> <span class="s2">"March"</span><span class="p">,</span> <span class="s2">"April"</span><span class="p">,</span> <span class="s2">"May"</span><span class="p">,</span> <span class="s2">"June"</span><span class="p">,</span> <span class="s2">"July"</span><span class="p">,</span> <span class="s2">"August"</span><span class="p">,</span> <span class="s2">"September"</span><span class="p">,</span> <span class="s2">"October"</span><span class="p">,</span> <span class="s2">"November"</span><span class="p">,</span> <span class="s2">"December"</span><span class="p">];</span>
                                <span class="nx">endDateFormatted</span> <span class="o">=</span> <span class="nx">monthNames</span><span class="p">[</span><span class="nx">endDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">endDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="s2">", "</span> <span class="o">+</span> <span class="nx">endDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#installment-amount"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">"$"</span> <span class="o">+</span> <span class="nx">installmentAmount</span><span class="p">);</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#end-date"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">endDateFormatted</span><span class="p">);</span>
                    <span class="nx">installmentAmt</span> <span class="o">=</span> <span class="nx">installmentAmount</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">//to check for recurring gift that is to be processed today or not (this is check for call stored card payment api)</span>
            <span class="kd">function</span> <span class="nx">isProcessNow</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">recStartDate</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#start-date"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">frequency</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">dayOfMonth</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#day-of-month'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">dayOfWeek</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#day-of-week"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">month</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#month'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">startDateIsTodayDate</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="nx">recurrrentStartDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">recStartDate</span><span class="p">),</span>
                    <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="nx">serverDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">ServerDate</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="nx">recurrrentStartDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">===</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
                    <span class="nx">recurrrentStartDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">===</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
                    <span class="nx">recurrrentStartDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">===</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span>
                <span class="p">)</span> <span class="p">{</span>
                    <span class="nx">startDateIsTodayDate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Weekly Frequency</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="nx">startDateIsTodayDate</span> <span class="o">&amp;&amp;</span> <span class="nx">dayOfWeek</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDay</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="c1">//Mothly and Quarterly frequency</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">||</span> <span class="nx">frequency</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="nx">startDateIsTodayDate</span> <span class="o">&amp;&amp;</span> <span class="nx">dayOfMonth</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="c1">//Annually frequency</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">isProcessedNow</span> <span class="o">=</span>
                        <span class="nx">startDateIsTodayDate</span>
                        <span class="o">&amp;&amp;</span> <span class="nx">dayOfMonth</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span>
                        <span class="o">&amp;&amp;</span> <span class="nx">month</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Every 4 weeks</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="nx">startDateIsTodayDate</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">isProcessedNow</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="cm">/*************************************** RECURRENCE FUNCTIONS - SECTION END ***************************************/</span>

            <span class="cm">/*************************************** CONSENT FUNCTIONS - SECTION START ***************************************/</span>

            <span class="kd">function</span> <span class="nx">bindConsentOption</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">consentOptionService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">ConsentOptionService</span><span class="p">();</span>
                <span class="nx">consentOptionService</span><span class="p">.</span><span class="nx">getConsentOptions</span><span class="p">(</span><span class="nx">consentPartId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">cnstType</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">SolicitCodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span> <span class="p">}</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentTitle"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">"&lt;b&gt;&lt;/b&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"Title"</span><span class="p">]);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMSolicitCode"</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#hdnCRMSolicitCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMSolicitCode"</span><span class="p">]);</span> <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMConsentSolicitCode"</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#hdnCRMConsentSolicitCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMConsentSolicitCode"</span><span class="p">]);</span> <span class="p">}</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentStatement"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"ConsentStatement"</span><span class="p">]);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"PrivacyPolicy"</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#privacylink"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"onclick"</span><span class="p">,</span> <span class="s2">"javascript:window.open('"</span> <span class="o">+</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"PrivacyPolicy"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"', '_blank' ,height=600, width=800, resizable='yes', scrollbars='yes' )"</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#privacylink"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span> <span class="p">}</span>
                    <span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">SolicitCodes</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;tr&gt;&lt;/tr&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">])</span>
                                <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td colspan='3' style='width:100%;text-align:left; font-weight:bold;'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]))</span>
                            <span class="p">);</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[id="</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"background-color"</span><span class="p">,</span> <span class="s2">"#efefef"</span><span class="p">);</span> <span class="p">}</span>
                            <span class="nx">count</span> <span class="o">=</span> <span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;tr&gt;&lt;/tr&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td style='width:35%'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"1"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)))</span>
                                <span class="p">);</span>
                                <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[id="</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"background-color"</span><span class="p">,</span> <span class="s2">"#efefef"</span><span class="p">);</span> <span class="p">}</span>
                                <span class="nx">count</span> <span class="o">=</span> <span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;tr&gt;&lt;/tr&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td style='width:35%'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"1"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)))</span>
                                <span class="p">);</span>
                                <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[id="</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"background-color"</span><span class="p">,</span> <span class="s2">"#efefef"</span><span class="p">);</span> <span class="p">}</span>
                                <span class="nx">count</span> <span class="o">=</span> <span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;tr&gt;&lt;/tr&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td  style='width:35%'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td colspan='2'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"checkbox"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
                                <span class="p">);</span>
                                <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[id="</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"background-color"</span><span class="p">,</span> <span class="s2">"#efefef"</span><span class="p">);</span> <span class="p">}</span>
                                <span class="nx">count</span> <span class="o">=</span> <span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                    <span class="kd">var</span> <span class="nx">requiredRows</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[IsRequired]"</span><span class="p">);</span>
                    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">requiredRows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="nx">requiredRows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"true"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[id="</span> <span class="o">+</span> <span class="nx">requiredRows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">"id"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">"td:first"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">"&lt;span style='color:red;'&gt;*&lt;/span&gt;"</span><span class="p">);</span> <span class="p">}</span> <span class="p">}</span>
                <span class="p">});</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">cnstType</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span> <span class="s2">"display"</span><span class="p">:</span> <span class="s2">"none"</span><span class="p">,</span> <span class="s2">"align"</span><span class="p">:</span> <span class="s2">"center"</span> <span class="p">});</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"width"</span><span class="p">,</span> <span class="s2">"600px"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentTitle"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"class"</span><span class="p">,</span> <span class="s2">"BBListingHeading DonationListingHeading"</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"cnstFilled"</span><span class="p">,</span> <span class="s2">"0"</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">//this function open overlay Consent dialog on screen</span>
            <span class="kd">function</span> <span class="nx">openDialog</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[isRequired]"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">"td:first"</span><span class="p">);</span>
                <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">rows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="s2">"60%"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">dialog</span><span class="p">({</span>
                        <span class="na">dialogClass</span><span class="p">:</span> <span class="s2">"no-close"</span><span class="p">,</span>
                        <span class="na">modal</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="na">autoOpen</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                        <span class="na">maxHeight</span><span class="p">:</span> <span class="mi">393</span><span class="p">,</span>
                        <span class="na">maxWidth</span><span class="p">:</span> <span class="mi">474</span>
                    <span class="p">});</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">dialog</span><span class="p">(</span><span class="s1">'open'</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span> <span class="s2">"position"</span><span class="p">:</span> <span class="s2">"fixed"</span><span class="p">,</span> <span class="s2">"top"</span><span class="p">:</span> <span class="s2">"25%"</span><span class="p">,</span> <span class="s2">"background-color"</span><span class="p">:</span> <span class="s2">"white"</span><span class="p">,</span> <span class="s2">"overflow"</span><span class="p">:</span> <span class="s2">"auto"</span><span class="p">,</span> <span class="s2">"max-height"</span><span class="p">:</span> <span class="s2">"393px"</span><span class="p">,</span> <span class="s2">"max-width"</span><span class="p">:</span> <span class="s2">"473px"</span><span class="p">,</span> <span class="s2">"z-index"</span><span class="p">:</span> <span class="s2">"101"</span> <span class="p">});</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s1">'.ui-widget-overlay'</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span> <span class="s2">"position"</span><span class="p">:</span> <span class="s2">"fixed"</span><span class="p">,</span> <span class="s2">"width"</span><span class="p">:</span> <span class="s2">"100%"</span><span class="p">,</span> <span class="s2">"height"</span><span class="p">:</span> <span class="s2">"100%"</span><span class="p">,</span> <span class="s2">"background-color"</span><span class="p">:</span> <span class="s2">"gray"</span><span class="p">,</span> <span class="s2">"opacity"</span><span class="p">:</span> <span class="s2">"0.6"</span><span class="p">,</span> <span class="s2">"top"</span><span class="p">:</span> <span class="s2">"0%"</span><span class="p">,</span> <span class="s2">"left"</span><span class="p">:</span> <span class="s2">"0%"</span> <span class="p">});</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"width"</span><span class="p">,</span> <span class="s2">"100%"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption th"</span><span class="p">).</span><span class="nx">attr</span><span class="p">({</span> <span class="s2">"border"</span><span class="p">:</span> <span class="s2">"1px solid black"</span><span class="p">,</span> <span class="s2">"border-color"</span><span class="p">:</span> <span class="s2">"#efefef"</span> <span class="p">})</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** CONSENT FUNCTIONS - SECTION END ***************************************/</span>

            <span class="cm">/*************************************** COUNTRY/STATE FUNCTIONS - SECTION START ***************************************/</span>

            <span class="c1">// bind the List of Country to Donor Country &amp; Tribute Acknowledgee Country Dropdown</span>
            <span class="kd">function</span> <span class="nx">bindCountryDropdown</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">countryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
                <span class="nx">countryService</span><span class="p">.</span><span class="nx">getCountries</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                    <span class="p">});</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">"option[value='United States']"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"selected"</span><span class="p">,</span> <span class="s2">"selected"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">bindStateDropdown</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">});</span>
                    <span class="nx">bindStateDropdown</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">);</span>

                    <span class="c1">// if you are going to add Tribute Acknowledgee Section then add below line of code</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">"option[value='United States']"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"selected"</span><span class="p">,</span> <span class="s2">"selected"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">bindAcknowledgeeStateDropdown</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">});</span>
                    <span class="nx">bindAcknowledgeeStateDropdown</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">);</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">bindStateDropdown</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">countryId</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">":selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">);</span>
                <span class="nx">countryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
                <span class="nx">countryService</span><span class="p">.</span><span class="nx">getStates</span><span class="p">(</span><span class="nx">countryId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="k">switch</span> <span class="p">(</span><span class="nx">countryId</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">())</span> <span class="p">{</span>
                            <span class="k">case</span> <span class="s1">'D81CEF85-7569-4B2E-8F2E-F7CF998A3342'</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'D9EE54CD-2183-490C-A3AD-11152B271335'</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'F189F24C-2538-46A1-8458-1E3F3967B843'</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="nl">default</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                        <span class="p">}</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]));</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                    <span class="nx">updateAddressLabels</span><span class="p">();</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">bindUserData</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="c1">// Bind the State after changing the Tribute Acknowledgee Country value</span>
            <span class="kd">function</span> <span class="nx">bindAcknowledgeeStateDropdown</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">countryId</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">":selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">);</span>
                <span class="nx">countryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
                <span class="nx">countryService</span><span class="p">.</span><span class="nx">getStates</span><span class="p">(</span><span class="nx">countryId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="k">switch</span> <span class="p">(</span><span class="nx">countryId</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">())</span> <span class="p">{</span>
                            <span class="k">case</span> <span class="s1">'D81CEF85-7569-4B2E-8F2E-F7CF998A3342'</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'D9EE54CD-2183-490C-A3AD-11152B271335'</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'F189F24C-2538-46A1-8458-1E3F3967B843'</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="nl">default</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                    <span class="nx">updateAcknowledgeeAddressLabels</span><span class="p">();</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">getCountryMappings</span><span class="p">()</span> <span class="p">{</span>
                <span class="c1">//this is use for direct debit validations</span>
                <span class="nx">countryData</span> <span class="o">=</span> <span class="p">{};</span>
                <span class="nx">countryService</span><span class="p">.</span><span class="nx">getCountries</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">tmpData</span> <span class="o">=</span> <span class="p">{};</span>
                        <span class="nx">tmpData</span><span class="p">.</span><span class="nx">Id</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">];</span>
                        <span class="nx">tmpData</span><span class="p">.</span><span class="nx">Abbreviation</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">];</span>
                        <span class="nx">tmpData</span><span class="p">.</span><span class="nx">Description</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">];</span>
                        <span class="k">switch</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">].</span><span class="nx">toUpperCase</span><span class="p">())</span> <span class="p">{</span>
                            <span class="k">case</span> <span class="s1">'D81CEF85-7569-4B2E-8F2E-F7CF998A3342'</span><span class="p">:</span>
                                <span class="nx">countryData</span><span class="p">.</span><span class="nx">USA</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'A2ECC209-3D20-4DDA-BC4C-7585C8E2E701'</span><span class="p">:</span>
                                <span class="nx">countryData</span><span class="p">.</span><span class="nx">UK</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'D9EE54CD-2183-490C-A3AD-11152B271335'</span><span class="p">:</span>
                                <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'F189F24C-2538-46A1-8458-1E3F3967B843'</span><span class="p">:</span>
                                <span class="nx">countryData</span><span class="p">.</span><span class="nx">AUS</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'DA42443E-AB81-40EE-A239-91ED699C0801'</span><span class="p">:</span>
                                <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                                <span class="k">break</span><span class="p">;</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** COUNTRY/STATE FUNCTIONS - SECTION END ***************************************/</span>

            <span class="cm">/*************************************** DIRECT DEBIT FUNCTIONS - SECTION START ***************************************/</span>

            <span class="kd">function</span> <span class="nx">showHideDirectDebitDiv</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentDirectDebit"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#directDebitInformation"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                    <span class="nx">hideAndVisible_BankingTypeField</span><span class="p">();</span>
                    <span class="nx">addCountryHandler</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#directDebitInformation"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">hideAndVisible_BankingTypeField</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"] option'</span><span class="p">).</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s1">'#tr_BankingSystemType'</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s1">'display'</span><span class="p">,</span> <span class="s1">'none'</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s1">'#tr_BankingSystemType'</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s1">'display'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">bindDirectDebitData</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">getBankingTypeData</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#ddlBankingSystemType"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]));</span>
                    <span class="p">});</span>
                <span class="p">});</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">getAccountTypeData</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#ddlAccountType"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]));</span>
                    <span class="p">});</span>
                <span class="p">});</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">getOriginIdAndTime</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#lbl_CurrentDate"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"Time"</span><span class="p">]);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#lbl_OrigNumber"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"OriginId"</span><span class="p">]);</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="c1">// handling the functionality, when chnage the Country from Country Dropdown</span>
            <span class="kd">function</span> <span class="nx">addCountryHandler</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">bankingSystemType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"]'</span><span class="p">),</span> <span class="nx">addrCtl</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[id='country'] :selected"</span><span class="p">),</span> <span class="nx">selectBankingOption</span><span class="p">,</span> <span class="nx">exists</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">bankingOptions</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">bankingSystemType</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">bankingOptions</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"] option'</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">bankingOptions</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">bankingOptions</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span><span class="p">)</span> <span class="o">||</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">AUS</span><span class="p">)))</span> <span class="p">{</span>
                                <span class="nx">selectBankingOption</span> <span class="o">=</span> <span class="s2">"Aus_NZ"</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">UK</span><span class="p">))</span> <span class="p">{</span>
                                <span class="nx">selectBankingOption</span> <span class="o">=</span> <span class="s2">"UK"</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">||</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">USA</span><span class="p">))</span> <span class="p">{</span>
                                <span class="nx">selectBankingOption</span> <span class="o">=</span> <span class="s2">"USA"</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="nx">exists</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">!==</span> <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'option[value="'</span> <span class="o">+</span> <span class="nx">selectBankingOption</span> <span class="o">+</span> <span class="s1">'"]'</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">exists</span> <span class="o">&amp;&amp;</span> <span class="nx">exists</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="nx">selectBankingOption</span><span class="p">);</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s2">"Please Select"</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="c1">//bind event so when ever ddl change we can reset the field</span>
                    <span class="nx">hideAndVisible_DirectDebitFields</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">hideAndVisible_DirectDebitFields</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">bankingType</span> <span class="o">=</span> <span class="s2">"Please Select"</span><span class="p">,</span> <span class="nx">htmlElement</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">routingNumberTextBoxLabel</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">routingNumberTextBox</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">transitNumberBox</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span>
                    <span class="nx">routingNumber</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="txtRoutingNumber"]'</span><span class="p">),</span>
                    <span class="nx">transitNumber</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="txtCanTransitNumber"]'</span><span class="p">),</span>
                    <span class="nx">routingNumberLabel</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lblRoutNumLBL"]'</span><span class="p">),</span>
                    <span class="nx">addressCTL</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[id='country'] :selected"</span><span class="p">),</span>
                    <span class="nx">bankingSystemLabel</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lblBankingSystemType"]'</span><span class="p">),</span>
                    <span class="nx">bankingSystemType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"] :selected'</span><span class="p">),</span>
                    <span class="nx">accountType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_AccountType"],[id*="DC_AccountType"]'</span><span class="p">),</span>
                    <span class="nx">accountNo</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="spn_AccountNo"]'</span><span class="p">),</span>
                    <span class="nx">accountNoNZ</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="spn_AccountNoNZ"]'</span><span class="p">),</span>
                    <span class="nx">financialInstitution</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lblFinancialLBL"]'</span><span class="p">),</span>
                    <span class="nx">accountNoLabel</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lblAccountNumber"]'</span><span class="p">),</span>
                    <span class="nx">routingNumberHelpSymbol</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lnk_BankHelp"]'</span><span class="p">),</span>
                    <span class="nx">requiredFieldAccountType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="RequiredFieldAccountType"]'</span><span class="p">),</span>
                    <span class="nx">ukFields</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_DDInstructions"], [id="tr_OrigNumber"], [id="tr_CurrentDate"], [id="tr_DDBankInstructions"], [id="tr_DDPDFInstructions"], [id="tr_DDPDFInstructions2"],[id="DC_DDInstructions"],[id="DC_OrigNumber"],[id="DC_CurrentDate"],[id="DC_DDBankInstructions"],[id="DC_DDPDFInstructions"],[id="DC_DDPDFInstructions2"]'</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">routingNumber</span> <span class="o">||</span> <span class="nx">routingNumber</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">bankingSystemType</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">bankingType</span> <span class="o">=</span> <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"Value"</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">routingNumber</span> <span class="o">&amp;&amp;</span> <span class="nx">routingNumber</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">routingNumberTextBox</span> <span class="o">=</span> <span class="nx">routingNumber</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">addressCTL</span> <span class="o">&amp;&amp;</span> <span class="nx">addressCTL</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="nx">addressCTL</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">routingNumberLabel</span> <span class="o">&amp;&amp;</span> <span class="nx">routingNumberLabel</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">routingNumberTextBoxLabel</span> <span class="o">=</span> <span class="nx">routingNumberLabel</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">transitNumber</span> <span class="o">&amp;&amp;</span> <span class="nx">transitNumber</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">transitNumberBox</span> <span class="o">=</span> <span class="nx">transitNumber</span><span class="p">;</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_CanadaTransitNum"]'</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">accountNo</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                <span class="nx">accountNoLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Account Number:"</span><span class="p">);</span>
                <span class="nx">routingNumberHelpSymbol</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">ukFields</span> <span class="o">&amp;&amp;</span> <span class="nx">ukFields</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">ukFields</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">'display'</span><span class="p">,</span> <span class="s1">'none'</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">transitNumberBox</span> <span class="o">&amp;&amp;</span> <span class="nx">transitNumberBox</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"USA"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Institution ID:"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"4"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                    <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                    <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_CanadaTransitNum"]'</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">!==</span> <span class="s2">"Please Select"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"USA"</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Routing Number:"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"9"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                            <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                            <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"UK"</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Sort Code:"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"6"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                            <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                            <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">ukFields</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">ukFields</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">'display'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Europe"</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"BIC:"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"11"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                            <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                            <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                            <span class="nx">routingNumberHelpSymbol</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Aus_NZ"</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"BSB Number:"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"6"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                            <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                            <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span><span class="p">))</span> <span class="p">{</span>
                                <span class="nx">accountNo</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                                <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                                <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Bank/Branch No.:"</span><span class="p">);</span>
                                <span class="nx">accountNoLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Account No./Suffix:"</span><span class="p">);</span>
                                <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"7"</span><span class="p">);</span>
                                <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Other"</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Bank Code:"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"25"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                            <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                            <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                            <span class="nx">routingNumberHelpSymbol</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="p">{</span>
                            <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Routing Number:"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"9"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                            <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                            <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Routing Number:"</span><span class="p">);</span>
                        <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"9"</span><span class="p">);</span>
                        <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                        <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">donationBankHelp</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">sFeatures</span> <span class="o">=</span> <span class="s1">'WIDTH=392px,HEIGHT=400px,RESIZABLE=YES,SCROLLBARS=NO,TOOLBAR=NO,LEFT=5,TOP=20,location=No;status=No'</span><span class="p">,</span> <span class="nx">oPopUp</span><span class="p">,</span>
                    <span class="nx">bankingType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"] :selected'</span><span class="p">),</span> <span class="nx">addressCTL</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[id='country'] :selected"</span><span class="p">),</span> <span class="nx">selectedValue</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">selectedValue</span> <span class="o">=</span> <span class="nx">bankingType</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"Value"</span><span class="p">);;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">addressCTL</span> <span class="o">&amp;&amp;</span> <span class="nx">addressCTL</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="nx">addressCTL</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">AUS</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">selectedValue</span> <span class="o">===</span> <span class="s1">'Aus_NZ'</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">qParam</span> <span class="o">=</span> <span class="s1">'AUS'</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">selectedValue</span> <span class="o">===</span> <span class="s1">'Aus_NZ'</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">qParam</span> <span class="o">=</span> <span class="s1">'NZ'</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">selectedValue</span> <span class="o">===</span> <span class="s1">'USA'</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_CanadaTransitNum"]'</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_CanadaTransitNum"]'</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">qParam</span> <span class="o">=</span> <span class="s1">'CAD'</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">switch</span> <span class="p">(</span><span class="nx">selectedValue</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">case</span> <span class="s1">'USA'</span><span class="p">:</span>
                            <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">"USA"</span><span class="p">;</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="k">case</span> <span class="s2">"Aus_NZ"</span><span class="p">:</span>
                            <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">"AUS"</span><span class="p">;</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="k">case</span> <span class="s2">"UK"</span><span class="p">:</span>
                            <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">"UK"</span><span class="p">;</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="nl">default</span><span class="p">:</span>
                            <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">"USA"</span><span class="p">;</span>
                            <span class="k">break</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="nx">oPopUp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PopUpDialogBB</span><span class="p">(</span><span class="s1">'~/Admin/DonationHelp.ascx'</span><span class="p">,</span> <span class="s1">'_blank'</span><span class="p">,</span> <span class="nx">sFeatures</span><span class="p">,</span> <span class="s1">'&amp;mode=2&amp;displayfor='</span> <span class="o">+</span> <span class="nx">qParam</span><span class="p">);</span>
                <span class="nx">oPopUp</span><span class="p">.</span><span class="nx">Show</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** DIRECT DEBIT FUNCTIONS - SECTION END ***************************************/</span>

            <span class="c1">// gift aid declaration</span>
            <span class="kd">function</span> <span class="nx">dDGuarantee</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">sFeatures</span> <span class="o">=</span> <span class="s1">'WIDTH=650px,HEIGHT=415px,RESIZABLE=YES,SCROLLBARS=NO,TOOLBAR=NO,LEFT=5,TOP=20,location=No;status=No'</span><span class="p">,</span>
                    <span class="nx">oPopUp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PopUpDialogBB</span><span class="p">(</span><span class="s1">'~/Admin/DonationHelp.ascx'</span><span class="p">,</span> <span class="s1">'_blank'</span><span class="p">,</span> <span class="nx">sFeatures</span><span class="p">,</span> <span class="s1">'&amp;mode=3'</span><span class="p">);</span>
                <span class="nx">oPopUp</span><span class="p">.</span><span class="nx">Show</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="c1">// return the donation amount</span>
            <span class="kd">function</span> <span class="nx">getDonationAmount</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#amtOther"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtAmount"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[name='radioAmount']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">// return which payment method is selected on the page</span>
            <span class="kd">function</span> <span class="nx">GetPaymentType</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">paymentMethod</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[name='paymentMethod']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="k">return</span> <span class="nx">paymentMethod</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** PROCESSING PAYMENT FUNCTIONS - SECTION START ***************************************/</span>

            <span class="c1">// calls the payment api to open the checkout pop up with all the parameters</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">makePayment</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">donor</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Donor</span><span class="p">,</span>
                    <span class="nx">selectedcountry</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#country :selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">),</span>
                    <span class="nx">selectedstate</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#state :selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">selectedcountry</span> <span class="o">&amp;&amp;</span> <span class="nx">selectedcountry</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"gb"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">selectedcountry</span> <span class="o">=</span> <span class="s2">"UK"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">Amount</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Designations</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">Amount</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressCity</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">City</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressCountry</span> <span class="o">=</span> <span class="nx">selectedcountry</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressLine</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">StreetAddress</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressPostCode</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">PostalCode</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressState</span> <span class="o">=</span> <span class="nx">selectedstate</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressEmail</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">EmailAddress</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressFirstName</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">FirstName</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="p">(</span><span class="nx">donor</span><span class="p">.</span><span class="nx">MiddleName</span> <span class="p">?</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">MiddleName</span> <span class="p">:</span> <span class="s2">""</span><span class="p">);</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">BillingAddressLastName</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">LastName</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">Cardholder</span> <span class="o">=</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">FirstName</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">LastName</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">UseVisaCheckout</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">);</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">UseMasterpass</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">);</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">UseApplePay</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">);</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TransactionType</span> <span class="o">=</span> <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">TransactionType</span><span class="p">.</span><span class="nx">Card_Not_Present</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">CardToken</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">ProcessNow</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">CardToken</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">DataKey</span><span class="p">;</span>
                    <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TransactionType</span> <span class="o">=</span> <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">TransactionType</span><span class="p">.</span><span class="nx">Store_Card</span><span class="p">;</span> <span class="c1">//Store card transactions</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">)</span> <span class="p">{</span>      <span class="c1">//Set CardToken value only in case of recurring gifts.</span>
                    <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">CardToken</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">DataKey</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Set Donor Info so that it will be passed to finish the transaction at the end.</span>
                <span class="nx">data</span><span class="p">.</span><span class="nx">DonationSource</span> <span class="o">=</span> <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">DonationSource</span><span class="p">.</span><span class="nx">ADF</span><span class="p">;</span>
                <span class="nx">data</span><span class="p">.</span><span class="nx">Type</span> <span class="o">=</span> <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TranType</span><span class="p">.</span><span class="nx">Donation</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">DonorInfo</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">openCheckout</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="c1">// call ProcessCCPayment(), submitDonationToServer(data) for further Donation Procesing</span>
            <span class="kd">function</span> <span class="nx">sendData</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">CheckoutModel</span> <span class="o">&amp;&amp;</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">MACheckoutSupported</span> <span class="o">&amp;&amp;</span> <span class="nx">GetPaymentType</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">ProcessCCPayment</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">data</span><span class="p">;</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
                    <span class="nx">setConsentValidationMessage</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
                    <span class="nx">data</span> <span class="o">=</span> <span class="nx">extractDataFromForm</span><span class="p">();</span>
                    <span class="nx">submitDonationToServer</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">// use this method for credit card payment through popup</span>
            <span class="kd">function</span> <span class="nx">ProcessCCPayment</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">data</span> <span class="o">=</span> <span class="nx">extractDataFromForm</span><span class="p">();</span>
                <span class="nx">onValidationSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">makePayment</span><span class="p">();</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">};</span>
                <span class="nx">onValidationFailed</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">error</span><span class="p">));</span>
                <span class="p">};</span>
                <span class="c1">//check Client validation</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">validateDonationRequest</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">onValidationSuccess</span><span class="p">,</span> <span class="nx">onValidationFailed</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">// call when we click on "Donate" button</span>
            <span class="kd">function</span> <span class="nx">onSubmitClick</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">validateFormClientSide</span><span class="p">())</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">cnstType</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">$</span><span class="p">(</span><span class="s2">"#overlay"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span>
                            <span class="nx">openDialog</span><span class="p">();</span>
                            <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal button"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span>
                            <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal button"</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">"click"</span><span class="p">);</span>
                            <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal button"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

                                <span class="k">if</span> <span class="p">(</span><span class="nx">consentValidation</span><span class="p">())</span> <span class="p">{</span>
                                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"cnstFilled"</span><span class="p">,</span> <span class="s2">"1"</span><span class="p">);</span>
                                    <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">dialog</span><span class="p">(</span><span class="s1">'close'</span><span class="p">);</span>
                                    <span class="nx">sendData</span><span class="p">();</span>
                                <span class="p">}</span>
                            <span class="p">});</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="p">{</span>
                            <span class="nx">$</span><span class="p">(</span><span class="s2">"#inline"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">validateFormClientSide</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">consentValidation</span><span class="p">())</span> <span class="p">{</span>
                                <span class="nx">sendData</span><span class="p">();</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">sendData</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** PROCESSING PAYMENT FUNCTIONS - SECTION END ***************************************/</span>

            <span class="c1">// Initialize all properties which required for Checkout pop-up by creating new object BBCheckoutProcessor()</span>
            <span class="kd">function</span> <span class="nx">InitializeBBCheckout</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">bbcheckout</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BBCheckoutProcessor</span><span class="p">(</span><span class="nx">checkoutFunctions</span><span class="p">(),</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">APIControllerName</span><span class="p">,</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">TokenId</span><span class="p">,</span> <span class="s1">'[class*="donationForm"]'</span><span class="p">);</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">Key</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">PublicKey</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TransactionType</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">TransactionType</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">ClientAppName</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">ClientAppName</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">MerchantAccountId</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">MerchantAccountId</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">IsEmailRequired</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">IsEmailRequired</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">IsNameVisible</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">IsNameVisible</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">PrimaryColor</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">PrimaryColor</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">SecondaryColor</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">SecondaryColor</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">FontFamily</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">FontFamily</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">UseCaptcha</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">UseCaptcha</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">WorkflowType</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">WorkFlowType</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">HandleBrowserClosing</span> <span class="o">=</span> <span class="p">(</span><span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">HandleBrowserClosing</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">?</span> <span class="s2">"True"</span> <span class="p">:</span> <span class="s2">"False"</span><span class="p">);</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">APITokenID</span> <span class="o">=</span> <span class="nx">CheckoutModel</span><span class="p">.</span><span class="nx">TokenId</span><span class="p">;</span>
                <span class="c1">// You can add your own message to display on screen, after checkout pop-up close</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">Configuration</span><span class="p">.</span><span class="nx">TempConfirmationHtml</span> <span class="o">=</span> <span class="s2">"Thank you for your contribution, please wait while we process your transaction."</span><span class="p">;</span>
                <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">intializeCheckout</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">checkoutFunctions</span><span class="p">()</span> <span class="p">{</span>
                <span class="c1">// If you want to override the functionality of any below mentioned events, then you can write your required code in respective Checkout Events Block</span>
                <span class="nx">checkoutEvents</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="na">checkoutComplete</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">// Invoke after Payment will successfully Completed</span>
                        <span class="nx">bbcheckout</span><span class="p">.</span><span class="nx">postCheckoutFinish</span><span class="p">();</span>
                    <span class="p">},</span>
                    <span class="na">checkoutError</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">//Place any code if you want to do anything on error.</span>
                    <span class="p">},</span>
                    <span class="na">checkoutExpired</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="c1">// If your Checkout modal dialog will expire, due to inactivity on page. Then write code in this block.</span>
                    <span class="p">},</span>
                    <span class="na">checkoutReady</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="c1">// If your Checkout modal dialog will Ready for Loading, after Donate button click. Then write code in this block.</span>
                    <span class="p">},</span>
                    <span class="na">browserClose</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="c1">// If you Close the Browser. Then write code in this block.</span>
                    <span class="p">},</span>
                    <span class="na">checkoutCancel</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="c1">// If your Cancel the Checkout modal dialog. Then write code in this block.</span>
                    <span class="p">},</span>
                    <span class="na">checkoutLoaded</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="c1">// If your Checkout modal dialog will Load on page. Then write code in this block.</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">checkoutEvents</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="cm">/*------------------------------------------- JAVASCRIPT FUNCTIONS - SECTION END -------------------------------------------*/</span>

            <span class="c1">// this function set-up/bind all required controls of Donation Form on Page Load</span>
            <span class="kd">function</span> <span class="nx">setupForm</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">bindDesignationDropdown</span><span class="p">();</span>
                <span class="nx">bindCountryDropdown</span><span class="p">();</span>
                <span class="nx">bindTitleDropdown</span><span class="p">();</span>
                <span class="c1">//bindUserData();</span>
                <span class="nx">bindConsentOption</span><span class="p">();</span>
                <span class="nx">getCountryMappings</span><span class="p">();</span>
                <span class="nx">bindDirectDebitData</span><span class="p">();</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".submit"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">onSubmitClick</span><span class="p">();</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtAmount"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#amtOther"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="s2">"checked"</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">updateEverythingPossible</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isCorporate"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#organizationNameDiv"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeTribue"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tribute"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAcknowledgee"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgee"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">addCountryHandler</span><span class="p">();</span> <span class="p">})</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#number-of-installments"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#start-date"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#day-of-month"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#month"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#day-of-week"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">showHideRecurrenceDiv</span><span class="p">();</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#billMeLater"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#directDebit"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recOneTime"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">showHideRecurrenceDiv</span><span class="p">();</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#billMeLater"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#directDebit"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentDirectDebit"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">showHideDirectDebitDiv</span><span class="p">();</span> <span class="p">})</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#ddlBankingSystemType"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">hideAndVisible_DirectDebitFields</span><span class="p">();</span> <span class="p">})</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">addCountryHandler</span><span class="p">();</span> <span class="p">})</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentCreditCard"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#directDebitInformation"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#lnk_BankHelp"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">donationBankHelp</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#lnk_DDGuarantee"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">dDGuarantee</span><span class="p">();</span> <span class="p">});</span>
                <span class="kd">function</span> <span class="nx">tributeKindChange</span><span class="p">()</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">kind</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[name='radioTribute']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">kind</span> <span class="o">===</span> <span class="s2">"1"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#specificTribute"</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#generalTribute"</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#generalTribute"</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#specificTribute"</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#kindGeneral"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">tributeKindChange</span><span class="p">);</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#kindSpecific"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">tributeKindChange</span><span class="p">);</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute1"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute1"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute2"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute2"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                <span class="p">});</span>
                <span class="c1">//Make sure this default HTML is configured for use:</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">designationQueryId</span> <span class="o">===</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span> <span class="o">||</span> <span class="nx">merchantAccountId</span> <span class="o">===</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="s2">"DesignationQueryId and MerchantAccountId must be configured before this form can be used."</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="cm">/*------------------------------------------- PAGE LOAD METHOD - START -------------------------------------------*/</span>

            <span class="kd">function</span> <span class="nx">PageLoad</span><span class="p">()</span> <span class="p">{</span>
                <span class="c1">//Wait until the blockUI script is loaded before we start loading the page.</span>
                <span class="kd">var</span> <span class="nx">t</span><span class="p">;</span>
                <span class="nx">blocked</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="nx">part</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">".donationForm"</span><span class="p">),</span>
                    <span class="nx">partInstanceId</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"data-partid"</span><span class="p">),</span>
                    <span class="nx">ClientSitesID</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"ClientSitesID"</span><span class="p">),</span>
                    <span class="nx">CheckoutModel</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">checkoutData</span><span class="p">),</span>
                    <span class="nx">serverMonth</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"serverMonth"</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="nx">serverDay</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"serverDay"</span><span class="p">),</span>
                    <span class="nx">serverYear</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"serverYear"</span><span class="p">);</span>
                <span class="nx">ServerDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">serverYear</span><span class="p">,</span> <span class="nx">serverMonth</span><span class="p">,</span> <span class="nx">serverDay</span><span class="p">);</span>
                <span class="c1">// Create an instance of the DonationService</span>
                <span class="nx">donationService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span><span class="nx">partInstanceId</span><span class="p">);</span>

                <span class="c1">// Initialize the all checkout related property</span>
                <span class="nx">InitializeBBCheckout</span><span class="p">();</span>

                <span class="nx">t</span> <span class="o">=</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">querystring</span><span class="p">.</span><span class="nx">getQueryStringValue</span><span class="p">(</span><span class="s2">"t"</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".form"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                    <span class="nx">completeBBSPPayment</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".form"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                    <span class="nx">setupForm</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">PageLoad</span><span class="p">();</span>

            <span class="cm">/*------------------------------------------- PAGE LOAD METHOD - END -------------------------------------------*/</span>

        <span class="p">}());</span></code></pre></div> </div> <div class="tab-pane" id="example-complete-SP25-css"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* Currently using Bootstrap styles and some default style */</span>
	<span class="nc">.no-close</span> <span class="nc">.ui-dialog-titlebar</span> <span class="p">{</span>
            <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="nf">#privacylink</span> <span class="p">{</span>
            <span class="nl">color</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>
            <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="nf">#privacylink</span><span class="nd">:hover</span> <span class="p">{</span>
		<span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="nc">.donationForm</span> <span class="nc">.validation</span> <span class="p">{</span>
            <span class="nl">color</span><span class="p">:</span> <span class="n">Red</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="nc">.consentValidation</span> <span class="p">{</span>
		<span class="nl">color</span><span class="p">:</span> <span class="n">Red</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="nc">.donationForm</span> <span class="nt">ul</span> <span class="p">{</span>
		<span class="nl">list-style-type</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="nc">.donationForm</span> <span class="nc">.DonationListingHeading</span> <span class="p">{</span>
            <span class="nl">font-size</span><span class="p">:</span> <span class="nb">large</span><span class="p">;</span>
            <span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
    <span class="p">}</span>
	
    <span class="nc">.donationForm</span> <span class="nc">.confirmation</span> <span class="p">{</span>
            <span class="nl">min-height</span><span class="p">:</span> <span class="m">400px</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="nc">.donationForm</span> <span class="nc">.invisible</span> <span class="p">{</span>
		<span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="nc">.DonationListingHeading</span> <span class="p">{</span>
            <span class="nl">height</span><span class="p">:</span> <span class="m">2.25em</span> <span class="cp">!important</span><span class="p">;</span>
    <span class="p">}</span></code></pre></div> </div> </div> ï»¿<h3 id="example-complete-legacy">ADF - Complete Example(Legacy)</h3> <p> This example will continue to work with Service Pack 25 release, however, it will not utilize the transaction workflow optimization code included as part of that release. Please refer to <a href="/bbis/guide/advanced-donation-form/#example-complete-SP25">Example - Complete (New)</a> for updated sample that incorporates the optimized Blackbaud Checkout Code. </p> <p>All our other examples available on the Developer Site are designed to be inserted into an Advanced Donation Form Part; however the following example is designed as a complete standalone solution â applicable even on a different server than the one serving your BBIS website.</p> <p>Please note you will need to update the references in the example below to your BBIS installation.</p> <ol> <li> The following ADF JS is only valid for BBSP, Checkout pop-up and IATS. This is not applicable for Payment 2.0.</li> <li> If you change the ID of any HTML control, then you will need to update/change all instances of that ID in both HTML and JS.</li> <li> Ensure you are using all the validations and If conditions and pass all the values in the same format as mentioned in the sample.</li> <li> <b>Changing the visual appearance of page</b> : Modify the default CSS Class written under the CSS tab as per your own requirements.</li> <li> <b>Configuring Designation</b> : Change the value of variable - designationQueryId="" : <ol type="i"><li> Use of this variable to display All Available Designation(s) on UI.</li> <li> In the PART CONFIGURATION SECTION, Change the value of the variable - designationQueryId="". This value can be found using SQL against your application Database by executing query (Select * from ADHOCQUERY Where NAME = '{your respective CRM application Ad-hoc Query Name of Designation Record Type}') on table. In this table you can copy the ID column value.</li></ol></li> <li> <b>Add/Remove Feature Section</b> : In this example we have two types of feature section. The first being the HTML tab, used for Controls available on Page UI. Secondly, the JAVASCRIPT tab, used for handling functionality of these HTML Controls. <ol type="i"><li> For adding Recurring Gift capability, add the HTML content between "RECURRING GIFT - SECTION START AND RECURRING GIFT - SECTION END" under HTML tab. Also add JAVASCRIPT between "RECURRENCE FUNCTIONS - SECTION START AND RECURRENCE FUNCTIONS - SECTION END" under JAVASCRIPT tab.</li> <li> For adding Gift Amount, choose HTML DESIGN between "GIFT AMOUNT - SECTION START AND GIFT AMOUNT - SECTION END" under HTML tab. Also add JAVASCRIPT between "RECURRENCE FUNCTIONS - SECTION START AND RECURRENCE FUNCTIONS - SECTION END" under JAVASCRIPT tab.</li> <li> For adding Consent capability, choose HTML DESIGN between "CONSENT - SECTION START AND CONSENT - SECTION END" under HTML tab. Also add JAVASCRIPT between "CONSENT VALIDATION FUNCTIONS - SECTION START AND CONSENT VALIDATION FUNCTIONS - SECTION END" under JAVASCRIPT tab.</li></ol></li> </ol> <ul class="nav nav-tabs"> <li class="active"><a href="#example-complete-legacy-html" data-toggle="tab">HTML</a></li> <li><a href="#example-complete-legacy-js" data-toggle="tab">JS</a></li> <li><a href="#example-complete-legacy-css" data-toggle="tab">CSS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-complete-legacy-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
  
  <span class="nt">&lt;title&gt;</span>ADF - Complete Example(Legacy)<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="nt">&gt;</span>
  
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"</span><span class="nt">&gt;</span>
    
  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>

        <span class="cm">/*------------------------------------------- PART CONFIGURATION - SECTION START -------------------------------------------*/</span>

        <span class="kd">var</span> <span class="nx">designationQueryId</span> <span class="o">=</span> <span class="s2">"8d9fccdf-dea8-4590-8ec2-355a4c59df04"</span><span class="p">;</span>  <span class="cm">/* Ad-hoc Query of Designation Type With Enable query for CMS REST API */</span>

        <span class="kd">var</span> <span class="nx">consentPartId</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">cnstType</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'cnsttype'</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"True"</span><span class="p">);</span>

        <span class="cm">/*------------------------------------------- PART CONFIGURATION - SECTION END -------------------------------------------*/</span>

  <span class="nt">&lt;/script&gt;</span>
	
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"bbspLoadingOverlay"</span> <span class="na">class=</span><span class="s">"bbspLoadingOverlay"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"images/FormEngine/Loading.gif"</span> <span class="na">alt=</span><span class="s">""</span> <span class="na">class=</span><span class="s">"bbspLoadingImage"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"donationForm container"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"alert"</span> <span class="na">style=</span><span class="s">"background-color:#b6cbe5;"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;h3&gt;</span>Advanced Donation Form <span class="nt">&lt;small&gt;</span>Complete Example(Legacy)<span class="nt">&lt;/small&gt;&lt;/h3&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"validation"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentValidation"</span> <span class="na">id=</span><span class="s">"inline"</span> <span class="na">style=</span><span class="s">"display:none"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">"donationInformation"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Gift Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="c">&lt;!-- *********************************************** GIFT AMOUNT - SECTION START *********************************************** --&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"giftAmount"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"required"</span><span class="nt">&gt;</span>Select Gift Amount:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"list-group"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt1000"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"1000"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt1000"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Platinum<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$1,000<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt500"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"500"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt500"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Gold<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$500<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt100"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"100"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt100"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Silver<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$100<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt25"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"25"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt25"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Bronze<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$25<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"other"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amtOther"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"-1"</span> <span class="na">checked=</span><span class="s">"checked"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amtOther"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Enter an amount<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"txtAmount"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">placeholder=</span><span class="s">"$"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                            <span class="nt">&lt;/ul&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="c">&lt;!-- *********************************************** GIFT AMOUNT - SECTION END *********************************************** --&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"recurrence"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"required"</span><span class="nt">&gt;</span>Recurrence:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"list-group"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"recOneTime"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioRecurrence"</span> <span class="na">value=</span><span class="s">"0"</span> <span class="na">checked=</span><span class="s">"checked"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"recOneTime"</span><span class="nt">&gt;</span>
                                        Make a one time gift.
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"recMonthly"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioRecurrence"</span> <span class="na">value=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"recMonthly"</span><span class="nt">&gt;</span>
                                        Recurring Gift.
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                            <span class="nt">&lt;/ul&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>

                        <span class="c">&lt;!-- *********************************************** RECURRING GIFT - SECTION START *********************************************** --&gt;</span>

                        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divRecurringGift"</span> <span class="na">style=</span><span class="s">"display:none;"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;h5&gt;</span>What's good?<span class="nt">&lt;/h5&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-9"</span><span class="nt">&gt;</span>
                                    I want to pledge above amount to the Avengers Initiative in
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"number-of-installments"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-1"</span><span class="nt">&gt;</span>
                                    installments.
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    I pledge to pay
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"installment-amount"</span><span class="nt">&gt;</span>$0.00<span class="nt">&lt;/label&gt;</span> every
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divFrequency"</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                                            <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"frequency"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select Frequency<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Weekly<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>Monthly<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Quarterly<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>Annually<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7"</span><span class="nt">&gt;</span>Every4Weeks<span class="nt">&lt;/option&gt;</span>
                                            <span class="nt">&lt;/select&gt;</span>
                                        <span class="nt">&lt;/div&gt;</span>
                                        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divDayOfWeek"</span> <span class="na">class=</span><span class="s">"col-sm-6"</span> <span class="na">style=</span><span class="s">"display:none;"</span><span class="nt">&gt;</span>
                                            <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"day-of-week"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select Day-of-Week<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"0"</span><span class="nt">&gt;</span>Sunday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Monday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>Tuesday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Wednesday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>Thursday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>Friday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6"</span><span class="nt">&gt;</span>Saturday<span class="nt">&lt;/option&gt;</span>
                                            <span class="nt">&lt;/select&gt;</span>
                                        <span class="nt">&lt;/div&gt;</span>
                                    <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    on the
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divDayOfMonth"</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"day-of-month"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select Day-Of-Month<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>1<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>2<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>3<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>4<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>5<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>6<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>7<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>8<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>9<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>10<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>11<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>12<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>13<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>14<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>15<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>16<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>17<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>18<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>19<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>20<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>21<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>22<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>23<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>24<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>25<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>26<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>27<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>28<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>29<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>30<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>31<span class="nt">&lt;/option&gt;</span>
                                    <span class="nt">&lt;/select&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-1"</span><span class="nt">&gt;</span>
                                    of
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divMonth"</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"month"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Month<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>January<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>February<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>March<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>April<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>May<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6"</span><span class="nt">&gt;</span>June<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7"</span><span class="nt">&gt;</span>July<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"8"</span><span class="nt">&gt;</span>August<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"9"</span><span class="nt">&gt;</span>September<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"10"</span><span class="nt">&gt;</span>October<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"11"</span><span class="nt">&gt;</span>November<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"12"</span><span class="nt">&gt;</span>December<span class="nt">&lt;/option&gt;</span>
                                    <span class="nt">&lt;/select&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    starting on
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"start-date"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"mm/dd/yyyy"</span> <span class="nt">/&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
                                    . My final payment will be made on <span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"end-date"</span> <span class="na">class=</span><span class="s">"col-form-label"</span> <span class="nt">/&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>

                            <span class="c">&lt;!-- *********************************************** RECURRING GIFT - SECTION END *********************************************** --&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>

            <span class="nt">&lt;fieldset&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Additional Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"isAnonymous"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"isAnonymous"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Make this gift anonymously
                        <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"createGiftAidDeclaration"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"createGiftAidDeclaration"</span> <span class="na">class=</span><span class="s">"col-form-label checkbox-inline"</span><span class="nt">&gt;</span>
                            Create gift aid declaration
                        <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>

                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"Comments"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Comments:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"comments"</span> <span class="na">id=</span><span class="s">"comments"</span> <span class="na">maxlength=</span><span class="s">"400"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"appealId"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Appeal ID:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"appealId"</span> <span class="na">maxlength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter an appeal GUID"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"designation"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Designation:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"designation"</span> <span class="na">name=</span><span class="s">" "</span><span class="nt">&gt;&lt;/select&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>
            <span class="c">&lt;!-- *********************************************** CONSENT - SECTION START *********************************************** --&gt;</span>

            <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"myModal"</span> <span class="na">class=</span><span class="s">"modal-content"</span> <span class="na">style=</span><span class="s">"display:none"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentValidation"</span> <span class="na">id=</span><span class="s">"overlay"</span> <span class="na">style=</span><span class="s">"display:none;padding: 7px 0px 8px 7px"</span><span class="nt">&gt;&lt;/div&gt;</span>
                    <span class="nt">&lt;fieldset</span> <span class="na">style=</span><span class="s">"border:none;"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;legend&gt;</span>
                            <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"consentTitle"</span><span class="nt">&gt;</span>Consent Start<span class="nt">&lt;/span&gt;&lt;br</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;hr</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"consentStatement"</span> <span class="na">style=</span><span class="s">"text-align:center;"</span><span class="nt">&gt;&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;/legend&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">value=</span><span class="s">""</span> <span class="na">id=</span><span class="s">"hdnCRMConsentSolicitCode"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">value=</span><span class="s">""</span> <span class="na">id=</span><span class="s">"hdnCRMSolicitCode"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"consentOption"</span> <span class="na">class=</span><span class="s">"table"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;tr&gt;</span>
                                <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"border:1px solid black;border-color:#efefef;"</span><span class="nt">&gt;</span>Communication Type<span class="nt">&lt;/th&gt;</span>
                                <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"border:1px solid black;border-color:#efefef;"</span><span class="nt">&gt;</span>Opt-in<span class="nt">&lt;/th&gt;</span>
                                <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"border:1px solid black;border-color:#efefef;"</span><span class="nt">&gt;</span>Opt-out<span class="nt">&lt;/th&gt;</span>
                            <span class="nt">&lt;/tr&gt;</span>
                        <span class="nt">&lt;/table&gt;</span>
                        <span class="nt">&lt;legend&gt;</span>
                            <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"privacylink"</span><span class="nt">&gt;</span>View Privacy Policy<span class="nt">&lt;/a&gt;&lt;br</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;button</span> <span class="na">style=</span><span class="s">"display:none"</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span> <span class="na">type=</span><span class="s">"button"</span><span class="nt">&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
                        <span class="nt">&lt;/legend&gt;</span>
                    <span class="nt">&lt;/fieldset&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>

            <span class="c">&lt;!-- *********************************************** CONSENT - SECTION END *********************************************** --&gt;</span>
            <span class="c">&lt;!-- *********************************************** BILLING/DONOR INFORMATION - SECTION START *********************************************** --&gt;</span>

            <span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">"billingInformation"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Finder Number<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"finderNumber"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Finder number:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"finderNumber"</span> <span class="na">maxlength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter a finder number"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Billing Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"title"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Title:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"title"</span> <span class="na">name=</span><span class="s">" "</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span> <span class="na">selected=</span><span class="s">"selected"</span><span class="nt">&gt;</span>select a value<span class="nt">&lt;/option&gt;</span>
                        <span class="nt">&lt;/select&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"firstName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            First name:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"firstName"</span> <span class="na">maxlength=</span><span class="s">"30"</span> <span class="na">placeholder=</span><span class="s">"enter your first name"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"middleName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Middle name:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"middleName"</span> <span class="na">maxlength=</span><span class="s">"30"</span> <span class="na">placeholder=</span><span class="s">"enter your middle name"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"lastName"</span> <span class="na">class=</span><span class="s">"required col-form-label"</span><span class="nt">&gt;</span>
                            Last name:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"lastName"</span> <span class="na">maxlength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter your last name"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"country"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span><span class="nt">&gt;</span>
                            Country:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"country"</span><span class="nt">&gt;&lt;/select&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"streetAddress"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span> <span class="na">id=</span><span class="s">"streetAddressLabel"</span><span class="nt">&gt;</span>
                            Address:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"streetAddress"</span> <span class="na">cols=</span><span class="s">"20"</span> <span class="na">rows=</span><span class="s">"1"</span><span class="nt">&gt;&lt;/textarea&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"city"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span> <span class="na">id=</span><span class="s">"cityLabel"</span><span class="nt">&gt;</span>
                            City:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"city"</span> <span class="na">maxlength=</span><span class="s">"50"</span> <span class="na">placeholder=</span><span class="s">"enter a city"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"state"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span> <span class="na">id=</span><span class="s">"stateLabel"</span><span class="nt">&gt;</span>
                            State/Province:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"state"</span><span class="nt">&gt;&lt;/select&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"postalCode"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span> <span class="na">id=</span><span class="s">"postalCodeLabel"</span><span class="nt">&gt;</span>
                            ZIP/Postal code:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"postalCode"</span> <span class="na">maxlength=</span><span class="s">"10"</span> <span class="na">placeholder=</span><span class="s">"enter a zip code"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"emailAddress"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span><span class="nt">&gt;</span>
                            Email:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"email"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"emailAddress"</span> <span class="na">maxlength=</span><span class="s">"120"</span> <span class="na">placeholder=</span><span class="s">"enter an email"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"phone"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Phone:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"phone"</span> <span class="na">placeholder=</span><span class="s">"enter a phone"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>

                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Payment Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow required"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"list-group"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;li</span> <span class="na">id=</span><span class="s">"creditCard"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"paymentCreditCard"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"paymentMethod"</span> <span class="na">value=</span><span class="s">"0"</span> <span class="na">checked=</span><span class="s">"checked"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"paymentCreditCard"</span><span class="nt">&gt;</span>
                                        Credit Card
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li</span> <span class="na">id=</span><span class="s">"billMeLater"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"paymentBillMeLater"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"paymentMethod"</span> <span class="na">value=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"paymentBillMeLater"</span><span class="nt">&gt;</span>
                                        Bill Me Later
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li</span> <span class="na">id=</span><span class="s">"directDebit"</span> <span class="na">style=</span><span class="s">"display:none;"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"paymentDirectDebit"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"paymentMethod"</span> <span class="na">value=</span><span class="s">"2"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"paymentDirectDebit"</span><span class="nt">&gt;</span>
                                        DirectDebit
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                            <span class="nt">&lt;/ul&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Matching Gifts<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"isCorporate"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"isCorporate"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            This donation if on behalf of a company
                        <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row required invisible"</span> <span class="na">id=</span><span class="s">"organizationNameDiv"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"organizationName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Company name:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"organizationName"</span> <span class="na">maxLength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter your company name"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>

            <span class="c">&lt;!-- *********************************************** BILLING/DONOR INFORMATION - SECTION END *********************************************** --&gt;</span>
            <span class="c">&lt;!-- *********************************************** TRIBUTE - SECTION START *********************************************** --&gt;</span>

            <span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">"tribueInformation"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Tribute /Acknowledgee Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">row=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                            <span class="ni">&amp;nbsp;&amp;nbsp;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"includeTribue"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"includeTribue"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                Include tribute:
                            <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"tribute"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"required"</span><span class="nt">&gt;</span>What kind of tribute:<span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"pagination"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;li&gt;</span>
                                        <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"kindSpecific"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioTribute"</span> <span class="na">value=</span><span class="s">"1"</span> <span class="na">checked=</span><span class="s">"checked"</span> <span class="nt">/&gt;</span>
                                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"kindSpecific"</span><span class="nt">&gt;</span>
                                            <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Specific<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;/li&gt;</span>
                                    <span class="nt">&lt;li&gt;</span>
                                        <span class="ni">&amp;nbsp;&amp;nbsp;&amp;nbsp;</span>
                                        <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"kindGeneral"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioTribute"</span> <span class="na">value=</span><span class="s">"2"</span> <span class="nt">/&gt;</span>
                                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"kindGeneral"</span><span class="nt">&gt;</span>
                                            <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>General<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;/ul&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"specificTribute"</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeID"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Tribute ID:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeID"</span> <span class="na">maxlength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter a tribute GUID"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"generalTribute"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeFirstName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        First name:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeFirstName"</span> <span class="na">placeholder=</span><span class="s">"enter a first name"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeLastName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Last name:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeLastName"</span> <span class="na">placeholder=</span><span class="s">"enter a last name"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeType"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Type:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeType"</span> <span class="na">placeholder=</span><span class="s">"enter a tribute type"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeDescription"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Description:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeDescription"</span> <span class="na">placeholder=</span><span class="s">"enter a description"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"includeAcknowledgee"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"includeAcknowledgee"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Include acknowledgee:
                                <span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"acknowledgee"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeFirstName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        First name:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeeFirstName"</span> <span class="na">placeholder=</span><span class="s">"enter a first name"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeLastName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Last name:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeeLastName"</span> <span class="na">placeholder=</span><span class="s">"enter a last name"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeCountry"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Country:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"adfSelect form-control required"</span> <span class="na">id=</span><span class="s">"acknowledgeeCountry"</span><span class="nt">&gt;&lt;/select&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeAddressLines"</span> <span class="na">id=</span><span class="s">"streetAddressLabelAcknowledgee"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Address lines:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeeAddressLines"</span> <span class="na">placeholder=</span><span class="s">"enter address lines"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeCity"</span> <span class="na">id=</span><span class="s">"cityLabelAcknowledgee"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        City:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeeCity"</span> <span class="na">placeholder=</span><span class="s">"enter city"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeState"</span> <span class="na">id=</span><span class="s">"stateLabelAcknowledgee"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        State:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"adfSelect form-control required"</span> <span class="na">placeholder=</span><span class="s">"State"</span> <span class="na">id=</span><span class="s">"acknowledgeeState"</span><span class="nt">&gt;&lt;/select&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeePostalCode"</span> <span class="na">id=</span><span class="s">"postalCodeLabelAcknowledgee"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Postal code:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeePostalCode"</span> <span class="na">placeholder=</span><span class="s">"enter postal code"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeEmail"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Email:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeeEmail"</span> <span class="na">placeholder=</span><span class="s">"enter email"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeePhone"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Phone:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeePhone"</span> <span class="na">placeholder=</span><span class="s">"enter phone"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>

            <span class="c">&lt;!-- *********************************************** TRIBUTE - SECTION END *********************************************** --&gt;</span>
            <span class="c">&lt;!-- *********************************************** ATTRIBUTE INFORMATION - SECTION START *********************************************** --&gt;</span>

            <span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">"attributeInformation"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Attributes<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"includeAttribute1"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"includeAttribute1"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                Include attribute 1:
                            <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"attribute1"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"attribute1ID"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Attribute ID:
                                <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"attribute1ID"</span> <span class="na">placeholder=</span><span class="s">"enter attribute GUID"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"attribute1Value"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Value:
                                <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"attribute1Value"</span> <span class="na">placeholder=</span><span class="s">"enter value"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"includeAttribute2"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"includeAttribute2"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                Include attribute 2:
                            <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"attribute2"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"attribute2ID"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Attribute ID:
                                <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"attribute2ID"</span> <span class="na">placeholder=</span><span class="s">"enter attribute GUID"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"attribute2Value"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Value:
                                <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"attribute2Value"</span> <span class="na">placeholder=</span><span class="s">"enter value"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>

            <span class="c">&lt;!-- *********************************************** ATTRIBUTE INFORMATION - SECTION END *********************************************** --&gt;</span>
            <span class="c">&lt;!-- *********************************************** DIRECT DEBIT - SECTION START *********************************************** --&gt;</span>

            <span class="nt">&lt;fieldset</span> <span class="na">id=</span><span class="s">"directDebitInformation"</span> <span class="na">style=</span><span class="s">"display:none;"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Direct Debit<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"directDebitSection"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span> <span class="na">id=</span><span class="s">"tr_DDPDFInstructions"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12 text-justify"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;span&gt;</span>
                                <span class="nt">&lt;i&gt;</span>
                                    In order to set up a Direct Debit instruction online, you must be the account holder of
                                    a personal bank or building society account. If you are not the only required signatory
                                    on your account or you would rather send us a paper version please
                                    <span class="nt">&lt;a</span> <span class="na">ID=</span><span class="s">"lnkDDPDF"</span> <span class="na">title=</span><span class="s">"Direct Debit PDF"</span> <span class="na">href=</span><span class="s">"#"</span>
                                       <span class="na">Target=</span><span class="s">"_blank"</span> <span class="na">rel=</span><span class="s">"noopener noreferrer"</span><span class="nt">&gt;</span>click here<span class="nt">&lt;/a&gt;</span>
                                <span class="nt">&lt;/i&gt;</span>
                            <span class="nt">&lt;/span&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblFinancialLBL"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Financial Institution:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtFinancialInstitution"</span> <span class="na">MaxLength=</span><span class="s">"100"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblBranchName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Branch Name:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtBranchName"</span> <span class="na">MaxLength=</span><span class="s">"100"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span> <span class="na">id=</span><span class="s">"tr_BankingSystemType"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblBankingSystemType"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Banking System Type:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;select</span> <span class="na">ID=</span><span class="s">"ddlBankingSystemType"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;&lt;/select&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblRoutNumLBL"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Routing Number:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtRoutingNumber"</span> <span class="na">MaxLength=</span><span class="s">"9"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;a</span> <span class="na">ID=</span><span class="s">"lnk_BankHelp"</span> <span class="na">title=</span><span class="s">"Display help details in another window"</span> <span class="na">style=</span><span class="s">"cursor:pointer;"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">"help"</span> <span class="na">title=</span><span class="s">"Help"</span> <span class="na">style=</span><span class="s">"height:32px;width:36px;vertical-align:bottom; border:0;"</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;/a&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblAccountNumber"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Account Number:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"spn_AccountNo"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtAccountNumber"</span> <span class="na">MaxLength=</span><span class="s">"20"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;/span&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span> <span class="na">id=</span><span class="s">"tr_CanadaTransitNum"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblCanadaTransitNum"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Transit Number:<span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtCanTransitNumber"</span> <span class="na">MaxLength=</span><span class="s">"5"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-8"</span> <span class="na">id=</span><span class="s">"spn_AccountNoNZ"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;table&gt;</span>
                                        <span class="nt">&lt;tr&gt;</span>
                                            <span class="nt">&lt;td&gt;</span>
                                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtAccountNumberNZ"</span> <span class="na">MaxLength=</span><span class="s">"7"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                                            <span class="nt">&lt;/td&gt;</span>
                                            <span class="nt">&lt;td&gt;</span>
                                                <span class="nt">&lt;span&gt;</span>-<span class="nt">&lt;/span&gt;</span>
                                            <span class="nt">&lt;/td&gt;</span>
                                            <span class="nt">&lt;td&gt;</span>
                                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtSuffixNZ"</span> <span class="na">MaxLength=</span><span class="s">"3"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                                            <span class="nt">&lt;/td&gt;</span>
                                            <span class="nt">&lt;td&gt;</span>
                                                <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblSuffixNZ"</span> <span class="na">Visible=</span><span class="s">"false"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;&lt;/label&gt;</span>
                                            <span class="nt">&lt;/td&gt;</span>
                                        <span class="nt">&lt;/tr&gt;</span>
                                    <span class="nt">&lt;/table&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span> <span class="na">id=</span><span class="s">"tr_AccountType"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblAccountType"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Account Type:<span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;select</span> <span class="na">ID=</span><span class="s">"ddlAccountType"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;&lt;/select&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblAccountHolderName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Account Holder's Name:<span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ID=</span><span class="s">"txtAccountHolder"</span> <span class="na">MaxLength=</span><span class="s">"50"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span> <span class="na">id=</span><span class="s">"tr_CurrentDate"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblDebitDate"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Date :<span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lbl_CurrentDate"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;&lt;/label&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span> <span class="na">id=</span><span class="s">"tr_OrigNumber"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lblOriginatorID"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>Service user's ID number :<span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lbl_OrigNumber"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;&lt;/label&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"tr_DDBankInstructions"</span> <span class="na">class=</span><span class="s">"text-justify"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;span</span> <span class="na">colspan=</span><span class="s">"3"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label&gt;&lt;b&gt;</span>Instruction to your Bank or Building Society<span class="nt">&lt;/b&gt;&lt;/label&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">ID=</span><span class="s">"lbl_DDBankInstructions"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;i&gt;</span>
                                Please pay %1 Direct Debits from the account detailed in this Instruction subject to the safeguards assured by
                                the Direct Debit Guarantee. I understand that this Instruction may remain with %1 and, if so, details will be passed
                                electronically to my Bank/Building Society.
                            <span class="nt">&lt;/i&gt;</span>
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;label&gt;</span>
                            <span class="nt">&lt;i&gt;</span>Banks and Building Societies may not accept Direct Debit Instructions for some types of account.<span class="nt">&lt;/i&gt;</span>
                        <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"tr_DDInstructions"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;span</span> <span class="na">colspan=</span><span class="s">"3"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">"Direct Debit"</span> <span class="na">title=</span><span class="s">"Direct Debit"</span> <span class="na">style=</span><span class="s">"text-align: center;"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;a</span> <span class="na">ID=</span><span class="s">"lnk_DDGuarantee"</span> <span class="na">title=</span><span class="s">"Display the Direct Debit Guarantee in another window"</span> <span class="na">href=</span><span class="s">"#"</span>
                           <span class="na">style=</span><span class="s">"cursor:pointer;color:blue;text-decoration:underline;"</span><span class="nt">&gt;</span>The Direct Debit Guarantee<span class="nt">&lt;/a&gt;</span>
                    <span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"tr_DDPDFInstructions2"</span> <span class="na">class=</span><span class="s">"text-justify"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;span</span> <span class="na">colspan=</span><span class="s">"2"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label&gt;</span>
                            <span class="nt">&lt;i&gt;</span>By clicking 'Donate Now' you are confirming that you are the account holder and that you are the only person required to authorize debits from this account.<span class="nt">&lt;/i&gt;</span>
                        <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>

            <span class="c">&lt;!-- *********************************************** DIRECT DEBIT - SECTION END *********************************************** --&gt;</span>
            <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
            <span class="c">&lt;!-- This is the final 'Donate' button, when Donor fill the all required field of page after that press this button for Submit Donation. --&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"donate"</span> <span class="na">class=</span><span class="s">"submit btn btn-success form-control"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">value=</span><span class="s">"Donate"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"btn btn-danger form-control"</span> <span class="na">type=</span><span class="s">"reset"</span> <span class="na">value=</span><span class="s">"Reset"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>

        <span class="nt">&lt;/div&gt;</span>

        <span class="c">&lt;!-- Its a compulsory div, it display the Confirmation screen with Donor details after successful donation. --&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"confirmation container"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-complete-legacy-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
		
		<span class="cm">/*------------------------------------------- VARIABLE DECLARATION - SECTION START -------------------------------------------*/</span>

        <span class="kd">var</span> <span class="nx">IsPopUpLoaded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nx">blocked</span><span class="p">,</span>
            <span class="nx">donationService</span><span class="p">,</span>
            <span class="nx">part</span><span class="p">,</span>
            <span class="nx">partInstanceId</span><span class="p">,</span>
            <span class="nx">addressLinesCaption</span><span class="p">,</span>
            <span class="nx">cityCaption</span><span class="p">,</span>
            <span class="nx">stateCaption</span><span class="p">,</span>
            <span class="nx">postCodeCaption</span><span class="p">,</span>
            <span class="nx">installmentAmt</span><span class="p">,</span>
            <span class="nx">SrtDt</span><span class="p">,</span>
            <span class="nx">publicKey</span><span class="p">,</span>
            <span class="nx">merchantAccountId</span><span class="p">,</span>
            <span class="nx">donationData</span><span class="p">,</span>
            <span class="nx">EditorContent</span><span class="p">,</span>
            <span class="nx">ServerDate</span><span class="p">,</span>
            <span class="nx">checkoutGenericError</span> <span class="o">=</span> <span class="s2">"There was an error while performing the operation.The page will be refreshed."</span><span class="p">;</span>

        <span class="cm">/*------------------------------------------- VARIABLE DECLARATION - SECTION END -------------------------------------------*/</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">transactionID</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

            <span class="c1">//Checkout Payment pop-up is loaded in this form</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'form[data-formtype="bbCheckout"]'</span><span class="p">).</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="s1">'&lt;form method=</span><span class="se">\'</span><span class="s1">get</span><span class="se">\'</span><span class="s1"> id=</span><span class="err">\</span><span class="s1">"paymentForm</span><span class="err">\</span><span class="s1">" data-formtype=</span><span class="se">\'</span><span class="s1">bbCheckout</span><span class="se">\'</span><span class="s1"> data-disable-submit=</span><span class="se">\'</span><span class="s1">false</span><span class="se">\'</span><span class="s1"> novalidate&gt;&lt;</span><span class="err">\</span><span class="s1">/form&gt;'</span><span class="p">;</span>
                <span class="nx">$</span><span class="p">(</span><span class="s1">'body'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">form</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="nx">$</span><span class="p">(</span><span class="s2">"#paymentForm"</span><span class="p">).</span><span class="nx">submit</span><span class="p">(</span><span class="kd">function</span> <span class="nx">paymentComplete</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// prevent form from refreshing and show the transaction token</span>
                <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
            <span class="p">});</span>

            <span class="cm">/*------------------------------------------- JAVASCRIPT - VALIDATION FUNCTIONS - SECTION START -------------------------------------------*/</span>

            <span class="kd">function</span> <span class="nx">validateEmail</span><span class="p">(</span><span class="nx">email</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">re</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">(([^</span><span class="sr">&lt;&gt;()[</span><span class="se">\]\\</span><span class="sr">.,;:</span><span class="se">\s</span><span class="sr">@</span><span class="se">\"]</span><span class="sr">+</span><span class="se">(\.[^</span><span class="sr">&lt;&gt;()[</span><span class="se">\]\\</span><span class="sr">.,;:</span><span class="se">\s</span><span class="sr">@</span><span class="se">\"]</span><span class="sr">+</span><span class="se">)</span><span class="sr">*</span><span class="se">)</span><span class="sr">|</span><span class="se">(\"</span><span class="sr">.+</span><span class="se">\"))</span><span class="sr">@</span><span class="se">((\[[</span><span class="sr">0-9</span><span class="se">]{1,3}\.[</span><span class="sr">0-9</span><span class="se">]{1,3}\.[</span><span class="sr">0-9</span><span class="se">]{1,3}\.[</span><span class="sr">0-9</span><span class="se">]{1,3}\])</span><span class="sr">|</span><span class="se">(([</span><span class="sr">a-zA-Z</span><span class="se">\-</span><span class="sr">0-9</span><span class="se">]</span><span class="sr">+</span><span class="se">\.)</span><span class="sr">+</span><span class="se">[</span><span class="sr">a-zA-Z</span><span class="se">]{2,}))</span><span class="sr">$/</span><span class="p">;</span>
                <span class="k">return</span> <span class="nx">re</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">validatePhone</span><span class="p">(</span><span class="nx">phone</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">phone</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">re</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">[</span><span class="sr">0-9 </span><span class="se">\+\)\(\-]{6,20}\s?((([</span><span class="sr">xX</span><span class="se">]</span><span class="sr">|</span><span class="se">[</span><span class="sr">eE</span><span class="se">][</span><span class="sr">xX</span><span class="se">][</span><span class="sr">tT</span><span class="se">])\.?\s</span><span class="sr">*</span><span class="se">(\d</span><span class="sr">+</span><span class="se">))</span><span class="sr">*</span><span class="se">)</span><span class="sr">$/</span><span class="p">;</span>
                    <span class="k">return</span> <span class="nx">re</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">phone</span><span class="p">);</span>

                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

                    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>

            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">country</span><span class="p">,</span> <span class="nx">ctryData</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">country</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">ctryData</span><span class="p">.</span><span class="nx">Id</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">||</span> <span class="nx">country</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">ctryData</span><span class="p">.</span><span class="nx">Abbreviation</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">||</span> <span class="nx">country</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">ctryData</span><span class="p">.</span><span class="nx">Description</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">())</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">validateStartDate</span><span class="p">(</span><span class="nx">startDate</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">startDate</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">pattern</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">([</span><span class="sr">0-9</span><span class="se">]{2})\/([</span><span class="sr">0-9</span><span class="se">]{2})\/([</span><span class="sr">0-9</span><span class="se">]{4})</span><span class="sr">$/</span><span class="p">;</span>
                    <span class="k">return</span> <span class="nx">pattern</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">startDate</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">ValidateDonationRequest</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">resolve</span><span class="p">();</span>
                    <span class="p">};</span>
                    <span class="nx">onFail</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">error</span><span class="p">));</span>
                    <span class="p">};</span>
                    <span class="nx">donationService</span><span class="p">.</span><span class="nx">validateDonationRequest</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFail</span><span class="p">)</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="c1">// this function validate all required fields of donation page</span>
            <span class="kd">function</span> <span class="nx">validateFormClientSide</span><span class="p">()</span> <span class="p">{</span>

                <span class="nx">$</span><span class="p">(</span><span class="s2">".validation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">errs</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
                <span class="c1">//Amount</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">getDonationAmount</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Gift amount is not valid.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Last Name</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#lastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Last name is required.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Email Address</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">validateEmail</span><span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#emailAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">()))</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Email is not valid.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Street Address</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#streetAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="nx">addressLinesCaption</span> <span class="o">+</span> <span class="s2">" is required.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//City</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#city"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="nx">cityCaption</span> <span class="o">+</span> <span class="s2">" is required.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Postal Code</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#postalCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="nx">postCodeCaption</span> <span class="o">+</span> <span class="s2">" is required.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Phone</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">validatePhone</span><span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#phone"</span><span class="p">).</span><span class="nx">val</span><span class="p">()))</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Phone is not valid.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">// Organization name</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isCorporate"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#organizationName"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Company name is required if this donation is on behalf of a company"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">// No Of Installation</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#number-of-installments"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Number Of installments should be greater than 1 in case of recurring gift."</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Payment Method</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentCreditCard"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentDirectDebit"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Select Payment Method"</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recOneTime"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentCreditCard"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentBillMeLater"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Select Payment Method"</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">errs</span> <span class="o">===</span> <span class="s2">""</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">errs</span><span class="p">);</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".validation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** CONSENT VALIDATION FUNCTIONS - SECTION START ***************************************/</span>

            <span class="kd">function</span> <span class="nx">consentValidation</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">".consentValidation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">errs</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
                <span class="c1">// Consent info</span>
                <span class="kd">var</span> <span class="nx">solicitCodeCount</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">).</span><span class="nx">length</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">solicitCodeCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">solicitCodeCount</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"isrequired"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"true"</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">find</span><span class="p">(</span><span class="s1">':checked'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">errs</span> <span class="o">+=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">find</span><span class="p">(</span><span class="s2">"label"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerHTML</span> <span class="o">+</span> <span class="s2">" is required.&lt;br/&gt;"</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">errs</span> <span class="o">===</span> <span class="s2">""</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">setConsentValidationMessage</span><span class="p">(</span><span class="nx">errs</span><span class="p">);</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">setConsentValidationMessage</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">".consentValidation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** CONSENT VALIDATION FUNCTIONS - SECTION END ***************************************/</span>

            <span class="cm">/*------------------------------------------- JAVASCRIPT - VALIDATION FUNCTIONS - SECTION END -------------------------------------------*/</span>

            <span class="cm">/*------------------------------------------- JAVASCRIPT FUNCTIONS - SECTION START -------------------------------------------*/</span>

            <span class="kd">function</span> <span class="nx">convertErrorToString</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">Message</span><span class="p">)</span> <span class="k">return</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Message</span><span class="p">;</span>
                    <span class="k">switch</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">ErrorCode</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">case</span> <span class="mi">101</span><span class="p">:</span>
                            <span class="k">return</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Field</span> <span class="o">+</span> <span class="s2">" is required."</span><span class="p">;</span>
                        <span class="k">case</span> <span class="mi">105</span><span class="p">:</span>
                            <span class="k">return</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Field</span> <span class="o">+</span> <span class="s2">" is not valid."</span><span class="p">;</span>
                        <span class="k">case</span> <span class="mi">106</span><span class="p">:</span>
                            <span class="k">return</span> <span class="s2">"Record for "</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Field</span> <span class="o">+</span> <span class="s2">" was not found."</span><span class="p">;</span>
                        <span class="k">case</span> <span class="mi">203</span><span class="p">:</span>
                            <span class="k">return</span> <span class="s2">"Donation not completed on BBSP."</span><span class="p">;</span>
                        <span class="k">case</span> <span class="mi">107</span><span class="p">:</span>
                            <span class="k">return</span> <span class="s2">"Max length for "</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Field</span> <span class="o">+</span> <span class="s2">" exceeded."</span><span class="p">;</span>
                        <span class="nl">default</span><span class="p">:</span>
                            <span class="k">return</span> <span class="s2">"Error code "</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">+</span> <span class="s2">"."</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">errors</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">message</span> <span class="o">=</span> <span class="s2">"Unknown error.&lt;br/&gt;"</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">errors</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">message</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
                    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">errors</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">message</span> <span class="o">=</span> <span class="nx">message</span> <span class="o">+</span> <span class="nx">convertErrorToString</span><span class="p">(</span><span class="nx">errors</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">+</span> <span class="s2">"&lt;br/&gt;"</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">message</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">// Extract the data entered by the user and fill the result object for transaction processing.</span>
            <span class="kd">function</span> <span class="nx">extractDataFromForm</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">paymentMethod</span><span class="p">,</span>
                    <span class="nx">result</span><span class="p">,</span>
                    <span class="nx">organizationName</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span>
                    <span class="nx">consentOptions</span><span class="p">,</span>
                    <span class="nx">solicitCodeCount</span><span class="p">;</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isCorporate"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">organizationName</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#organizationName"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="nx">paymentMethod</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[name='paymentMethod']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="nx">result</span> <span class="o">=</span> <span class="p">{};</span>
                <span class="c1">// Donor information</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="na">Title</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#title"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">FirstName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#firstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">MiddleName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#middleName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">LastName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#lastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">EmailAddress</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#emailAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">Phone</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#phone"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">Address</span><span class="p">:</span> <span class="p">{</span>
                        <span class="na">Country</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">State</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">City</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#city"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">StreetAddress</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#streetAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#postalCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                    <span class="p">},</span>
                    <span class="na">OrganizationName</span><span class="p">:</span> <span class="nx">organizationName</span>
                <span class="p">};</span>
                <span class="c1">// Consent Information</span>
                <span class="nx">consentOptions</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="nx">solicitCodeCount</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">solicitCodeCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">solicitCodeCount</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">consentOptions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                            <span class="na">SolicitCodeID</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">id</span><span class="p">,</span>
                            <span class="na">IsRequired</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">isrequired</span><span class="p">,</span>
                            <span class="na">ConsentPreferenceCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">find</span><span class="p">(</span><span class="s1">':checked'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                        <span class="p">});</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">ContactConsents</span> <span class="o">=</span> <span class="p">{</span> <span class="na">ConsentPartId</span><span class="p">:</span> <span class="nx">consentPartId</span><span class="p">,</span> <span class="na">SolicitCodes</span><span class="p">:</span> <span class="nx">consentOptions</span> <span class="p">};</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">=</span> <span class="p">{</span>                    
                    <span class="na">PaymentMethod</span><span class="p">:</span> <span class="nx">paymentMethod</span><span class="p">,</span>
                    <span class="na">Designations</span><span class="p">:</span> <span class="p">[{</span>
                        <span class="na">Amount</span><span class="p">:</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">?</span> <span class="nx">installmentAmt</span> <span class="p">:</span> <span class="nx">getDonationAmount</span><span class="p">(),</span>
                        <span class="na">DesignationId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#designation"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                    <span class="p">}],</span>
                    <span class="na">FinderNumber</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#finderNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>                    
                    <span class="na">Comments</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#comments"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">CreateGiftAidDeclaration</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#createGiftAidDeclaration"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">),</span>
                    <span class="na">IsAnonymous</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isAnonymous"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">),</span>
                    <span class="na">IsCorporate</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isCorporate"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span>
                <span class="p">};</span>
                <span class="c1">// Recurring Gift Information</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="na">DayOfMonth</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#day-of-month'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">Month</span><span class="p">:</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"2"</span> <span class="o">||</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"3"</span><span class="p">)</span> <span class="p">?</span> <span class="s2">""</span> <span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#month'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">Frequency</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">StartDate</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#start-date"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">EndDate</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#end-date"</span><span class="p">).</span><span class="nx">text</span><span class="p">(),</span>
                        <span class="na">DayOfWeek</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#day-of-week"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                        <span class="na">ProcessNow</span><span class="p">:</span> <span class="nx">isProcessNow</span><span class="p">()</span>
                    <span class="p">};</span>
                <span class="p">}</span>
                <span class="c1">// Tribute Information</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeTribue"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">kind</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[name='radioTribute']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">kind</span> <span class="o">===</span> <span class="s2">"1"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Tribute</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="na">TributeId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeID"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                        <span class="p">};</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Tribute</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="na">TributeDefinition</span><span class="p">:</span> <span class="p">{</span>
                                <span class="na">Name</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeFirstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeLastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                                <span class="na">FirstName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeFirstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                                <span class="na">LastName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeLastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                                <span class="na">Type</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeType"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                                <span class="na">Description</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeDescription"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                            <span class="p">}</span>
                        <span class="p">};</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAcknowledgee"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Tribute</span><span class="p">.</span><span class="nx">Acknowledgee</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="na">FirstName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeFirstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">LastName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeLastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">Country</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">AddressLines</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeAddressLines"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">City</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeCity"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">State</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeePostalCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">Phone</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeePhone"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">Email</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeEmail"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                        <span class="p">};</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="c1">// Attribute Information</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute1"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span> <span class="o">||</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute2"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Attributes</span> <span class="o">=</span> <span class="p">[];</span>
                    <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute1"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Attributes</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="na">AttributeId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute1ID"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">Value</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute1Value"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                        <span class="p">};</span>
                        <span class="nx">index</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute2"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Attributes</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="na">AttributeId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute2ID"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                            <span class="na">Value</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute2Value"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                        <span class="p">};</span>
                        <span class="nx">index</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="c1">// Fetching Direct Debit related information</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">paymentMethod</span> <span class="o">===</span> <span class="s2">"2"</span> <span class="o">&amp;&amp;</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentDirectDebit"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span> <span class="o">=</span> <span class="p">{};</span>
                    <span class="kd">var</span> <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#country :selected"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">bankingType</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#ddlBankingSystemType :selected"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">FinancialInstitution</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtFinancialInstitution"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">BranchName</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtBranchName"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountHolderName</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtAccountHolder"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">BankingType</span> <span class="o">=</span> <span class="nx">bankingType</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"USA"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">RoutingNumber</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtRoutingNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">TransitNumber</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtCanTransitNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">RoutingNumber</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtRoutingNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Aus_NZ"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountNumber</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtAccountNumberNZ"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">SuffixNo</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtSuffixNZ"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountNumber</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtAccountNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Europe"</span> <span class="o">||</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Other"</span> <span class="o">||</span> <span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"USA"</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountType</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#ddlAccountType :selected"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">DirectDebitInformation</span><span class="p">.</span><span class="nx">AccountType</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">Origin</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="na">PageId</span><span class="p">:</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">pageInformation</span><span class="p">.</span><span class="nx">pageId</span><span class="p">,</span>
                    <span class="na">AppealId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#appealId"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="na">PartId</span><span class="p">:</span> <span class="nx">partInstanceId</span>
                <span class="p">};</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">BBSPTemplateSitePageId</span> <span class="o">=</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">pageInformation</span><span class="p">.</span><span class="nx">pageId</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">paymentMethod</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">result</span><span class="p">.</span><span class="nx">BBSPReturnUri</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">MerchantAccountId</span> <span class="o">=</span> <span class="nx">merchantAccountId</span><span class="p">;</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">PartId</span> <span class="o">=</span> <span class="nx">partInstanceId</span><span class="p">;</span>
                <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">// this function submit Donation using CreateDonation() of donationService</span>
            <span class="kd">function</span> <span class="nx">submitDonationToServer</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">// For Pledge, go ahead and show the confirmation.  For credit card, you will be redirected to BBSP already.</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">Donation</span><span class="p">.</span><span class="nx">TransactionStatus</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".form"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                        <span class="nx">getConfirmationHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">Donation</span><span class="p">.</span><span class="nx">Id</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">Donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">PaymentMethod</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">+</span> <span class="s2">"?t="</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Donation</span><span class="p">.</span><span class="nx">Id</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">};</span>
                <span class="nx">onFail</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">));</span>
                <span class="p">};</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">data</span><span class="p">.</span><span class="nx">Donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">State</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#state :selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFail</span><span class="p">);</span>

            <span class="p">}</span>

            <span class="c1">// Success Callback from Secure Payment Page</span>
            <span class="kd">function</span> <span class="nx">completeBBSPPayment</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="s1">'&lt;%Session["'</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Id</span> <span class="o">+</span> <span class="s1">'"] = "'</span> <span class="o">+</span> <span class="kc">true</span> <span class="o">+</span> <span class="s1">'"; %&gt;'</span><span class="p">;</span>
                    <span class="nx">getConfirmationHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">Id</span><span class="p">);</span>
                <span class="p">};</span>
                <span class="nx">onFail</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">));</span>
                <span class="p">};</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">completeBBSPDonation</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFail</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">// Display the Final Confirmation screen after Successful Doantion</span>
            <span class="kd">function</span> <span class="nx">getConfirmationHtml</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
                <span class="p">};</span>
                <span class="nx">onFail</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">));</span>
                <span class="p">};</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">getDonationConfirmationHtml</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFail</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">// bind the Designation</span>
            <span class="kd">function</span> <span class="nx">bindDesignationDropdown</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">queryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">QueryService</span><span class="p">();</span>
                <span class="nx">statusFilter</span> <span class="o">=</span> <span class="p">{</span> <span class="na">columnName</span><span class="p">:</span> <span class="s1">'Is active'</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="s1">'True'</span> <span class="p">};</span>
                <span class="nx">queryService</span><span class="p">.</span><span class="nx">getResults</span><span class="p">(</span><span class="nx">designationQueryId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Rows</span><span class="p">;</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">rows</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s1">'Values'</span><span class="p">];</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#designation"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]));</span>
                    <span class="p">});</span>
                <span class="p">},</span> <span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="nx">statusFilter</span><span class="p">]);</span>
            <span class="p">}</span>

            <span class="c1">// populate the Title Dropdown with available list of Title</span>
            <span class="kd">function</span> <span class="nx">bindTitleDropdown</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">codeTableService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CodeTableService</span><span class="p">();</span>
                <span class="nx">codeTableService</span><span class="p">.</span><span class="nx">getTitles</span><span class="p">(</span><span class="s1">'456FFD4C-0FBF-49DB-A503-0726F86E2A39'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#title"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]));</span>
                    <span class="p">});</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="c1">// bind the Linked user Details to the HTML Controls of Page, when we logged in with Linked User</span>
            <span class="kd">function</span> <span class="nx">bindUserData</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">userService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">UserService</span><span class="p">();</span>
                <span class="nx">userService</span><span class="p">.</span><span class="nx">getProfile</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#firstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"FirstName"</span><span class="p">]);</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#lastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"LastName"</span><span class="p">]);</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#phone"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"Phone"</span><span class="p">]);</span>
                    <span class="c1">// only bind the Primary Address of Linked user</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">Addresses</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Addresses</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">ads</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Addresses</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">IsPrimary</span> <span class="o">===</span> <span class="kc">true</span><span class="p">;</span>
                        <span class="p">});</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">ads</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">ads</span><span class="p">[</span><span class="s2">"Country"</span><span class="p">]);</span>
                            <span class="nx">bindStateDropdown</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="nx">ads</span><span class="p">[</span><span class="s2">"State"</span><span class="p">]);</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#city"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">ads</span><span class="p">[</span><span class="s2">"City"</span><span class="p">]);</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#streetAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">ads</span><span class="p">[</span><span class="s2">"StreetAddress"</span><span class="p">]);</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#postalCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">ads</span><span class="p">[</span><span class="s2">"PostalCode"</span><span class="p">]);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="c1">// only bind the Primary Email Address of Linked user</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">EmailAddresses</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">EmailAddresses</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">email</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">EmailAddresses</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
                            <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">IsPrimary</span> <span class="o">===</span> <span class="kc">true</span><span class="p">;</span>
                        <span class="p">});</span>

                        <span class="k">if</span> <span class="p">(</span><span class="nx">email</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#emailAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">email</span><span class="p">[</span><span class="s2">"EmailAddress"</span><span class="p">]);</span>
                        <span class="p">}</span>

                    <span class="p">}</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="c1">// change the Address related Label of Page, when change the Country from Country dropdown</span>
            <span class="kd">function</span> <span class="nx">updateAddressLabels</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">countryId</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">":selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">);</span>
                <span class="nx">countryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
                <span class="nx">countryService</span><span class="p">.</span><span class="nx">getAddressCaptions</span><span class="p">(</span><span class="nx">countryId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!!</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">addressLinesCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"AddressLines"</span><span class="p">];</span>
                        <span class="nx">cityCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"City"</span><span class="p">];</span>
                        <span class="nx">stateCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"State"</span><span class="p">];</span>
                        <span class="nx">postCodeCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"PostCode"</span><span class="p">];</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">addressLinesCaption</span> <span class="o">=</span> <span class="s2">"Address lines"</span><span class="p">;</span>
                        <span class="nx">cityCaption</span> <span class="o">=</span> <span class="s2">"City"</span><span class="p">;</span>
                        <span class="nx">stateCaption</span> <span class="o">=</span> <span class="s2">"State/Providence"</span><span class="p">;</span>
                        <span class="nx">postCodeCaption</span> <span class="o">=</span> <span class="s2">"Zip/Postal code"</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#streetAddressLabel"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">addressLinesCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#cityLabel"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">cityCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#stateLabel"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">stateCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#postalCodeLabel"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">postCodeCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                <span class="p">},</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="c1">// change the Tribute Acknowledge Address related Label of Page, when change the Tribute Acknowledge Country from Country dropdown</span>
            <span class="kd">function</span> <span class="nx">updateAcknowledgeeAddressLabels</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">countryId</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">":selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">);</span>
                <span class="nx">countryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
                <span class="nx">countryService</span><span class="p">.</span><span class="nx">getAddressCaptions</span><span class="p">(</span><span class="nx">countryId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!!</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">addressLinesCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"AddressLines"</span><span class="p">];</span>
                        <span class="nx">cityCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"City"</span><span class="p">];</span>
                        <span class="nx">stateCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"State"</span><span class="p">];</span>
                        <span class="nx">postCodeCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"PostCode"</span><span class="p">];</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">addressLinesCaption</span> <span class="o">=</span> <span class="s2">"Address lines"</span><span class="p">;</span>
                        <span class="nx">cityCaption</span> <span class="o">=</span> <span class="s2">"City"</span><span class="p">;</span>
                        <span class="nx">stateCaption</span> <span class="o">=</span> <span class="s2">"State/Providence"</span><span class="p">;</span>
                        <span class="nx">postCodeCaption</span> <span class="o">=</span> <span class="s2">"Zip/Postal code"</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#streetAddressLabelAcknowledgee"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">addressLinesCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#cityLabelAcknowledgee"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">cityCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#stateLabelAcknowledgee"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">stateCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#postalCodeLabelAcknowledgee"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">postCodeCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
                <span class="p">},</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="p">});</span>
            <span class="p">}</span>


            <span class="cm">/*************************************** RECURRENCE FUNCTIONS - SECTION START ***************************************/</span>

            <span class="kd">function</span> <span class="nx">showHideRecurrenceDiv</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divRecurringGift"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divRecurringGift"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#directDebitInformation"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">updateEverythingPossible</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">donationAmount</span> <span class="o">=</span> <span class="nx">getDonationAmount</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">numberOfInstallments</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#number-of-installments"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">installmentAmount</span> <span class="o">=</span> <span class="nx">donationService</span><span class="p">.</span><span class="nx">getRecurringGiftInstallmentAmount</span><span class="p">(</span><span class="nx">donationAmount</span><span class="p">,</span> <span class="nx">numberOfInstallments</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">startDate</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#start-date"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">frequency</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">dayOfMonth</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#day-of-month'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">dayOfWeek</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#day-of-week"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">month</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#month'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">numberOfInstallments</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="s2">"Number Of installments should be greater than 1 in case of recurring gift."</span><span class="p">);</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="c1">//Weekly</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">||</span> <span class="nx">frequency</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span><span class="c1">//Monthly| Quarterly</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span><span class="c1">//Annually</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"inline"</span><span class="p">);</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="p">{</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="p">}</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span>    <span class="c1">//Every4Weeks</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">validateStartDate</span><span class="p">(</span><span class="nx">startDate</span><span class="p">))</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                            <span class="kd">var</span> <span class="nx">StartDate1</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">startDate</span><span class="p">);</span>
                            <span class="kd">var</span> <span class="nx">dayOfStartDate</span> <span class="o">=</span> <span class="nx">StartDate1</span><span class="p">.</span><span class="nx">getDay</span><span class="p">();</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">dayOfStartDate</span> <span class="o">!=</span> <span class="nx">dayOfWeek</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">dayOfWeek</span><span class="p">,</span> <span class="mi">10</span><span class="p">)))</span> <span class="p">{</span>
                                <span class="kd">var</span> <span class="nx">startDateCopy</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">StartDate1</span><span class="p">);</span>
                                <span class="kd">var</span> <span class="nx">firstDayOfCurrentWeek</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">startDate</span><span class="p">);</span>
                                <span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">setHours</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                                <span class="c1">// if start date's day of week is not monday then calculate the first day(i.e. monday) of the week of start date</span>
                                <span class="c1">//{0-Sunday,1-Monday,2-Tuesday,3-Wednesday,4-Thursday,5-Friday,6-Saturday}</span>
                                <span class="k">if</span> <span class="p">(</span><span class="nx">dayOfStartDate</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                                    <span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">StartDate1</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">-</span> <span class="nx">dayOfStartDate</span> <span class="o">+</span> <span class="p">(</span><span class="nx">dayOfStartDate</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">?</span> <span class="o">-</span><span class="mi">6</span> <span class="p">:</span> <span class="mi">1</span><span class="p">));</span>
                                <span class="p">}</span>
                                <span class="c1">// if the installment's day of week is not same as start date's day of week , then adjust the start date.</span>
                                <span class="k">while</span> <span class="p">(</span><span class="nx">firstDayOfCurrentWeek</span> <span class="o">&lt;</span> <span class="nx">startDateCopy</span> <span class="o">||</span>
                                    <span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()</span> <span class="o">!=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">dayOfWeek</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="p">{</span>
                                    <span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
                                <span class="p">}</span>
                                <span class="c1">// set the start date's to the expected day of week</span>
                                <span class="nx">StartDate1</span> <span class="o">=</span> <span class="nx">firstDayOfCurrentWeek</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="kd">var</span> <span class="nx">endDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">StartDate1</span><span class="p">);</span>
                            <span class="nx">endDate</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">StartDate1</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="mi">7</span> <span class="o">*</span> <span class="p">(</span><span class="nx">numberOfInstallments</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)));</span>
                            <span class="kd">var</span> <span class="nx">endDateFormatted</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">endDate</span><span class="p">)</span> <span class="p">{</span>
                                <span class="kd">var</span> <span class="nx">monthNames</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"January"</span><span class="p">,</span> <span class="s2">"February"</span><span class="p">,</span> <span class="s2">"March"</span><span class="p">,</span> <span class="s2">"April"</span><span class="p">,</span> <span class="s2">"May"</span><span class="p">,</span> <span class="s2">"June"</span><span class="p">,</span> <span class="s2">"July"</span><span class="p">,</span> <span class="s2">"August"</span><span class="p">,</span> <span class="s2">"September"</span><span class="p">,</span> <span class="s2">"October"</span><span class="p">,</span> <span class="s2">"November"</span><span class="p">,</span> <span class="s2">"December"</span><span class="p">];</span>
                                <span class="nx">endDateFormatted</span> <span class="o">=</span> <span class="nx">monthNames</span><span class="p">[</span><span class="nx">endDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">endDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="s2">", "</span> <span class="o">+</span> <span class="nx">endDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="p">{</span>
                            <span class="kd">var</span> <span class="nx">endDate</span> <span class="o">=</span> <span class="nx">donationService</span><span class="p">.</span><span class="nx">getRecurringGiftLastPaymentDate</span><span class="p">(</span><span class="nx">numberOfInstallments</span><span class="p">,</span> <span class="nx">frequency</span><span class="p">,</span> <span class="nx">startDate</span><span class="p">,</span> <span class="nx">month</span><span class="p">,</span> <span class="nx">dayOfMonth</span><span class="p">,</span> <span class="nx">dayOfWeek</span><span class="p">);</span>
                            <span class="kd">var</span> <span class="nx">endDateFormatted</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">endDate</span><span class="p">)</span> <span class="p">{</span>
                                <span class="kd">var</span> <span class="nx">monthNames</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"January"</span><span class="p">,</span> <span class="s2">"February"</span><span class="p">,</span> <span class="s2">"March"</span><span class="p">,</span> <span class="s2">"April"</span><span class="p">,</span> <span class="s2">"May"</span><span class="p">,</span> <span class="s2">"June"</span><span class="p">,</span> <span class="s2">"July"</span><span class="p">,</span> <span class="s2">"August"</span><span class="p">,</span> <span class="s2">"September"</span><span class="p">,</span> <span class="s2">"October"</span><span class="p">,</span> <span class="s2">"November"</span><span class="p">,</span> <span class="s2">"December"</span><span class="p">];</span>
                                <span class="nx">endDateFormatted</span> <span class="o">=</span> <span class="nx">monthNames</span><span class="p">[</span><span class="nx">endDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">endDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="s2">", "</span> <span class="o">+</span> <span class="nx">endDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#installment-amount"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">"$"</span> <span class="o">+</span> <span class="nx">installmentAmount</span><span class="p">);</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#end-date"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">endDateFormatted</span><span class="p">);</span>
                    <span class="nx">installmentAmt</span> <span class="o">=</span> <span class="nx">installmentAmount</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">//to check for recurring gift that is to be processed today or not (this is check for call stored card payment api)</span>
            <span class="kd">function</span> <span class="nx">isProcessNow</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">recStartDate</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#start-date"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">frequency</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">dayOfMonth</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#day-of-month'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">dayOfWeek</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#day-of-week"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">month</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#month'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
                    <span class="nx">startDateIsTodayDate</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="nx">recurrrentStartDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">recStartDate</span><span class="p">),</span>
                    <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="nx">serverDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">ServerDate</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="nx">recurrrentStartDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">===</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
                    <span class="nx">recurrrentStartDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">===</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
                    <span class="nx">recurrrentStartDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">===</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span>
                <span class="p">)</span> <span class="p">{</span>
                    <span class="nx">startDateIsTodayDate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Weekly Frequency</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="nx">startDateIsTodayDate</span> <span class="o">&amp;&amp;</span> <span class="nx">dayOfWeek</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDay</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="c1">//Mothly and Quarterly frequency</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">||</span> <span class="nx">frequency</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="nx">startDateIsTodayDate</span> <span class="o">&amp;&amp;</span> <span class="nx">dayOfMonth</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="c1">//Annually frequency</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">isProcessedNow</span> <span class="o">=</span>
                        <span class="nx">startDateIsTodayDate</span>
                        <span class="o">&amp;&amp;</span> <span class="nx">dayOfMonth</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span>
                        <span class="o">&amp;&amp;</span> <span class="nx">month</span> <span class="o">==</span> <span class="nx">serverDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//Every 4 weeks</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="nx">startDateIsTodayDate</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">isProcessedNow</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">isProcessedNow</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="cm">/*************************************** RECURRENCE FUNCTIONS - SECTION END ***************************************/</span>

            <span class="cm">/*************************************** CONSENT FUNCTIONS - SECTION START ***************************************/</span>

            <span class="kd">function</span> <span class="nx">bindConsentOption</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">consentOptionService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">ConsentOptionService</span><span class="p">();</span>
                <span class="nx">consentOptionService</span><span class="p">.</span><span class="nx">getConsentOptions</span><span class="p">(</span><span class="nx">consentPartId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">cnstType</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">SolicitCodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span> <span class="p">}</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentTitle"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">"&lt;b&gt;&lt;/b&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"Title"</span><span class="p">]);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMSolicitCode"</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#hdnCRMSolicitCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMSolicitCode"</span><span class="p">]);</span> <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMConsentSolicitCode"</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#hdnCRMConsentSolicitCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMConsentSolicitCode"</span><span class="p">]);</span> <span class="p">}</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentStatement"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"ConsentStatement"</span><span class="p">]);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"PrivacyPolicy"</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#privacylink"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"onclick"</span><span class="p">,</span> <span class="s2">"javascript:window.open('"</span> <span class="o">+</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"PrivacyPolicy"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"', '_blank' ,height=600, width=800, resizable='yes', scrollbars='yes' )"</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#privacylink"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span> <span class="p">}</span>
                    <span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">SolicitCodes</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;tr&gt;&lt;/tr&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">])</span>
                                <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td colspan='3' style='width:100%;text-align:left; font-weight:bold;'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]))</span>
                            <span class="p">);</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[id="</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"background-color"</span><span class="p">,</span> <span class="s2">"#efefef"</span><span class="p">);</span> <span class="p">}</span>
                            <span class="nx">count</span> <span class="o">=</span> <span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;tr&gt;&lt;/tr&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td style='width:35%'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"1"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)))</span>
                                <span class="p">);</span>
                                <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[id="</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"background-color"</span><span class="p">,</span> <span class="s2">"#efefef"</span><span class="p">);</span> <span class="p">}</span>
                                <span class="nx">count</span> <span class="o">=</span> <span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;tr&gt;&lt;/tr&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td style='width:35%'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"1"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)))</span>
                                <span class="p">);</span>
                                <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[id="</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"background-color"</span><span class="p">,</span> <span class="s2">"#efefef"</span><span class="p">);</span> <span class="p">}</span>
                                <span class="nx">count</span> <span class="o">=</span> <span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;tr&gt;&lt;/tr&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td  style='width:35%'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
                                    <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td colspan='2'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"checkbox"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
                                <span class="p">);</span>
                                <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[id="</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"background-color"</span><span class="p">,</span> <span class="s2">"#efefef"</span><span class="p">);</span> <span class="p">}</span>
                                <span class="nx">count</span> <span class="o">=</span> <span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                    <span class="kd">var</span> <span class="nx">requiredRows</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[IsRequired]"</span><span class="p">);</span>
                    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">requiredRows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="nx">requiredRows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"true"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[id="</span> <span class="o">+</span> <span class="nx">requiredRows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">"id"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">"td:first"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">"&lt;span style='color:red;'&gt;*&lt;/span&gt;"</span><span class="p">);</span> <span class="p">}</span> <span class="p">}</span>
                <span class="p">});</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">cnstType</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span> <span class="s2">"display"</span><span class="p">:</span> <span class="s2">"none"</span><span class="p">,</span> <span class="s2">"align"</span><span class="p">:</span> <span class="s2">"center"</span> <span class="p">});</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"width"</span><span class="p">,</span> <span class="s2">"600px"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentTitle"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"class"</span><span class="p">,</span> <span class="s2">"BBListingHeading DonationListingHeading"</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"cnstFilled"</span><span class="p">,</span> <span class="s2">"0"</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">//this function open overlay Consent dialog on screen</span>
            <span class="kd">function</span> <span class="nx">openDialog</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[isRequired]"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">"td:first"</span><span class="p">);</span>
                <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">rows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="s2">"60%"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">dialog</span><span class="p">({</span>
                        <span class="na">dialogClass</span><span class="p">:</span> <span class="s2">"no-close"</span><span class="p">,</span>
                        <span class="na">modal</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="na">autoOpen</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                        <span class="na">maxHeight</span><span class="p">:</span> <span class="mi">393</span><span class="p">,</span>
                        <span class="na">maxWidth</span><span class="p">:</span> <span class="mi">474</span>
                    <span class="p">});</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">dialog</span><span class="p">(</span><span class="s1">'open'</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span> <span class="s2">"position"</span><span class="p">:</span> <span class="s2">"fixed"</span><span class="p">,</span> <span class="s2">"top"</span><span class="p">:</span> <span class="s2">"25%"</span><span class="p">,</span> <span class="s2">"background-color"</span><span class="p">:</span> <span class="s2">"white"</span><span class="p">,</span> <span class="s2">"overflow"</span><span class="p">:</span> <span class="s2">"auto"</span><span class="p">,</span> <span class="s2">"max-height"</span><span class="p">:</span> <span class="s2">"393px"</span><span class="p">,</span> <span class="s2">"max-width"</span><span class="p">:</span> <span class="s2">"473px"</span><span class="p">,</span> <span class="s2">"z-index"</span><span class="p">:</span> <span class="s2">"101"</span> <span class="p">});</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s1">'.ui-widget-overlay'</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span> <span class="s2">"position"</span><span class="p">:</span> <span class="s2">"fixed"</span><span class="p">,</span> <span class="s2">"width"</span><span class="p">:</span> <span class="s2">"100%"</span><span class="p">,</span> <span class="s2">"height"</span><span class="p">:</span> <span class="s2">"100%"</span><span class="p">,</span> <span class="s2">"background-color"</span><span class="p">:</span> <span class="s2">"gray"</span><span class="p">,</span> <span class="s2">"opacity"</span><span class="p">:</span> <span class="s2">"0.6"</span><span class="p">,</span> <span class="s2">"top"</span><span class="p">:</span> <span class="s2">"0%"</span><span class="p">,</span> <span class="s2">"left"</span><span class="p">:</span> <span class="s2">"0%"</span> <span class="p">});</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"width"</span><span class="p">,</span> <span class="s2">"100%"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption th"</span><span class="p">).</span><span class="nx">attr</span><span class="p">({</span> <span class="s2">"border"</span><span class="p">:</span> <span class="s2">"1px solid black"</span><span class="p">,</span> <span class="s2">"border-color"</span><span class="p">:</span> <span class="s2">"#efefef"</span> <span class="p">})</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** CONSENT FUNCTIONS - SECTION END ***************************************/</span>

            <span class="cm">/*************************************** COUNTRY/STATE FUNCTIONS - SECTION START ***************************************/</span>

            <span class="c1">// bind the List of Country to Donor Country &amp; Tribute Acknowledgee Country Dropdown</span>
            <span class="kd">function</span> <span class="nx">bindCountryDropdown</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">countryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
                <span class="nx">countryService</span><span class="p">.</span><span class="nx">getCountries</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                    <span class="p">});</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">"option[value='United States']"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"selected"</span><span class="p">,</span> <span class="s2">"selected"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">bindStateDropdown</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">});</span>
                    <span class="nx">bindStateDropdown</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">);</span>

                    <span class="c1">// if you are going to add Tribute Acknowledgee Section then add below line of code</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">"option[value='United States']"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"selected"</span><span class="p">,</span> <span class="s2">"selected"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">bindAcknowledgeeStateDropdown</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">});</span>
                    <span class="nx">bindAcknowledgeeStateDropdown</span><span class="p">(</span><span class="kc">true</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">);</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">bindStateDropdown</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">countryId</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">":selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">);</span>
                <span class="nx">countryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
                <span class="nx">countryService</span><span class="p">.</span><span class="nx">getStates</span><span class="p">(</span><span class="nx">countryId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="k">switch</span> <span class="p">(</span><span class="nx">countryId</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">())</span> <span class="p">{</span>
                            <span class="k">case</span> <span class="s1">'D81CEF85-7569-4B2E-8F2E-F7CF998A3342'</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'D9EE54CD-2183-490C-A3AD-11152B271335'</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'F189F24C-2538-46A1-8458-1E3F3967B843'</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="nl">default</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                        <span class="p">}</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]));</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                    <span class="nx">updateAddressLabels</span><span class="p">();</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">bindUserData</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="c1">// Bind the State after changing the Tribute Acknowledgee Country value</span>
            <span class="kd">function</span> <span class="nx">bindAcknowledgeeStateDropdown</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">countryId</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">":selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">);</span>
                <span class="nx">countryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
                <span class="nx">countryService</span><span class="p">.</span><span class="nx">getStates</span><span class="p">(</span><span class="nx">countryId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="k">switch</span> <span class="p">(</span><span class="nx">countryId</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">())</span> <span class="p">{</span>
                            <span class="k">case</span> <span class="s1">'D81CEF85-7569-4B2E-8F2E-F7CF998A3342'</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'D9EE54CD-2183-490C-A3AD-11152B271335'</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'F189F24C-2538-46A1-8458-1E3F3967B843'</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="nl">default</span><span class="p">:</span>
                                <span class="nx">$</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ISO"</span><span class="p">]));</span>
                                <span class="k">break</span><span class="p">;</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                    <span class="nx">updateAcknowledgeeAddressLabels</span><span class="p">();</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">getCountryMappings</span><span class="p">()</span> <span class="p">{</span>
                <span class="c1">//this is use for direct debit validations</span>
                <span class="nx">countryData</span> <span class="o">=</span> <span class="p">{};</span>
                <span class="nx">countryService</span><span class="p">.</span><span class="nx">getCountries</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="kd">var</span> <span class="nx">tmpData</span> <span class="o">=</span> <span class="p">{};</span>
                        <span class="nx">tmpData</span><span class="p">.</span><span class="nx">Id</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">];</span>
                        <span class="nx">tmpData</span><span class="p">.</span><span class="nx">Abbreviation</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">];</span>
                        <span class="nx">tmpData</span><span class="p">.</span><span class="nx">Description</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">];</span>
                        <span class="k">switch</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">].</span><span class="nx">toUpperCase</span><span class="p">())</span> <span class="p">{</span>
                            <span class="k">case</span> <span class="s1">'D81CEF85-7569-4B2E-8F2E-F7CF998A3342'</span><span class="p">:</span>
                                <span class="nx">countryData</span><span class="p">.</span><span class="nx">USA</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'A2ECC209-3D20-4DDA-BC4C-7585C8E2E701'</span><span class="p">:</span>
                                <span class="nx">countryData</span><span class="p">.</span><span class="nx">UK</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'D9EE54CD-2183-490C-A3AD-11152B271335'</span><span class="p">:</span>
                                <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'F189F24C-2538-46A1-8458-1E3F3967B843'</span><span class="p">:</span>
                                <span class="nx">countryData</span><span class="p">.</span><span class="nx">AUS</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                                <span class="k">break</span><span class="p">;</span>
                            <span class="k">case</span> <span class="s1">'DA42443E-AB81-40EE-A239-91ED699C0801'</span><span class="p">:</span>
                                <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span> <span class="o">=</span> <span class="nx">tmpData</span><span class="p">;</span>
                                <span class="k">break</span><span class="p">;</span>
                        <span class="p">}</span>
                    <span class="p">});</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** COUNTRY/STATE FUNCTIONS - SECTION END ***************************************/</span>

            <span class="cm">/*************************************** DIRECT DEBIT FUNCTIONS - SECTION START ***************************************/</span>

            <span class="kd">function</span> <span class="nx">showHideDirectDebitDiv</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentDirectDebit"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#directDebitInformation"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                    <span class="nx">hideAndVisible_BankingTypeField</span><span class="p">();</span>
                    <span class="nx">addCountryHandler</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#directDebitInformation"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">hideAndVisible_BankingTypeField</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"] option'</span><span class="p">).</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s1">'#tr_BankingSystemType'</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s1">'display'</span><span class="p">,</span> <span class="s1">'none'</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s1">'#tr_BankingSystemType'</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s1">'display'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">bindDirectDebitData</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">getBankingTypeData</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#ddlBankingSystemType"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]));</span>
                    <span class="p">});</span>
                <span class="p">});</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">getAccountTypeData</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s2">"#ddlAccountType"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]));</span>
                    <span class="p">});</span>
                <span class="p">});</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">getOriginIdAndTime</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#lbl_CurrentDate"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"Time"</span><span class="p">]);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#lbl_OrigNumber"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"OriginId"</span><span class="p">]);</span>
                <span class="p">});</span>
            <span class="p">}</span>

            <span class="c1">// handling the functionality, when chnage the Country from Country Dropdown</span>
            <span class="kd">function</span> <span class="nx">addCountryHandler</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">bankingSystemType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"]'</span><span class="p">),</span> <span class="nx">addrCtl</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[id='country'] :selected"</span><span class="p">),</span> <span class="nx">selectBankingOption</span><span class="p">,</span> <span class="nx">exists</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">bankingOptions</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">bankingSystemType</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">bankingOptions</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"] option'</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">bankingOptions</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">bankingOptions</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span><span class="p">)</span> <span class="o">||</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">AUS</span><span class="p">)))</span> <span class="p">{</span>
                                <span class="nx">selectBankingOption</span> <span class="o">=</span> <span class="s2">"Aus_NZ"</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">UK</span><span class="p">))</span> <span class="p">{</span>
                                <span class="nx">selectBankingOption</span> <span class="o">=</span> <span class="s2">"UK"</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">||</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">addrCtl</span><span class="p">.</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">USA</span><span class="p">))</span> <span class="p">{</span>
                                <span class="nx">selectBankingOption</span> <span class="o">=</span> <span class="s2">"USA"</span><span class="p">;</span>
                            <span class="p">}</span>
                            <span class="nx">exists</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">!==</span> <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'option[value="'</span> <span class="o">+</span> <span class="nx">selectBankingOption</span> <span class="o">+</span> <span class="s1">'"]'</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">exists</span> <span class="o">&amp;&amp;</span> <span class="nx">exists</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="nx">selectBankingOption</span><span class="p">);</span>
                            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                                <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s2">"Please Select"</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="c1">//bind event so when ever ddl change we can reset the field</span>
                    <span class="nx">hideAndVisible_DirectDebitFields</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">hideAndVisible_DirectDebitFields</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">bankingType</span> <span class="o">=</span> <span class="s2">"Please Select"</span><span class="p">,</span> <span class="nx">htmlElement</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">routingNumberTextBoxLabel</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">routingNumberTextBox</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">transitNumberBox</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span>
                    <span class="nx">routingNumber</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="txtRoutingNumber"]'</span><span class="p">),</span>
                    <span class="nx">transitNumber</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="txtCanTransitNumber"]'</span><span class="p">),</span>
                    <span class="nx">routingNumberLabel</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lblRoutNumLBL"]'</span><span class="p">),</span>
                    <span class="nx">addressCTL</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[id='country'] :selected"</span><span class="p">),</span>
                    <span class="nx">bankingSystemLabel</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lblBankingSystemType"]'</span><span class="p">),</span>
                    <span class="nx">bankingSystemType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"] :selected'</span><span class="p">),</span>
                    <span class="nx">accountType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_AccountType"],[id*="DC_AccountType"]'</span><span class="p">),</span>
                    <span class="nx">accountNo</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="spn_AccountNo"]'</span><span class="p">),</span>
                    <span class="nx">accountNoNZ</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="spn_AccountNoNZ"]'</span><span class="p">),</span>
                    <span class="nx">financialInstitution</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lblFinancialLBL"]'</span><span class="p">),</span>
                    <span class="nx">accountNoLabel</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lblAccountNumber"]'</span><span class="p">),</span>
                    <span class="nx">routingNumberHelpSymbol</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="lnk_BankHelp"]'</span><span class="p">),</span>
                    <span class="nx">requiredFieldAccountType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="RequiredFieldAccountType"]'</span><span class="p">),</span>
                    <span class="nx">ukFields</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_DDInstructions"], [id="tr_OrigNumber"], [id="tr_CurrentDate"], [id="tr_DDBankInstructions"], [id="tr_DDPDFInstructions"], [id="tr_DDPDFInstructions2"],[id="DC_DDInstructions"],[id="DC_OrigNumber"],[id="DC_CurrentDate"],[id="DC_DDBankInstructions"],[id="DC_DDPDFInstructions"],[id="DC_DDPDFInstructions2"]'</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">routingNumber</span> <span class="o">||</span> <span class="nx">routingNumber</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">bankingSystemType</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">bankingType</span> <span class="o">=</span> <span class="nx">bankingSystemType</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"Value"</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">routingNumber</span> <span class="o">&amp;&amp;</span> <span class="nx">routingNumber</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">routingNumberTextBox</span> <span class="o">=</span> <span class="nx">routingNumber</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">addressCTL</span> <span class="o">&amp;&amp;</span> <span class="nx">addressCTL</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="nx">addressCTL</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">routingNumberLabel</span> <span class="o">&amp;&amp;</span> <span class="nx">routingNumberLabel</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">routingNumberTextBoxLabel</span> <span class="o">=</span> <span class="nx">routingNumberLabel</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">transitNumber</span> <span class="o">&amp;&amp;</span> <span class="nx">transitNumber</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">transitNumberBox</span> <span class="o">=</span> <span class="nx">transitNumber</span><span class="p">;</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_CanadaTransitNum"]'</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="nx">accountNo</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                <span class="nx">accountNoLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Account Number:"</span><span class="p">);</span>
                <span class="nx">routingNumberHelpSymbol</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">ukFields</span> <span class="o">&amp;&amp;</span> <span class="nx">ukFields</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">ukFields</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">'display'</span><span class="p">,</span> <span class="s1">'none'</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">transitNumberBox</span> <span class="o">&amp;&amp;</span> <span class="nx">transitNumberBox</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"USA"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Institution ID:"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"4"</span><span class="p">);</span>
                    <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                    <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                    <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                    <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_CanadaTransitNum"]'</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">!==</span> <span class="s2">"Please Select"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"USA"</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Routing Number:"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"9"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                            <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                            <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"UK"</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Sort Code:"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"6"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                            <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                            <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">ukFields</span><span class="p">)</span> <span class="p">{</span>
                                <span class="nx">ukFields</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">'display'</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Europe"</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"BIC:"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"11"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                            <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                            <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                            <span class="nx">routingNumberHelpSymbol</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Aus_NZ"</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"BSB Number:"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"6"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                            <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                            <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span><span class="p">))</span> <span class="p">{</span>
                                <span class="nx">accountNo</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                                <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                                <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Bank/Branch No.:"</span><span class="p">);</span>
                                <span class="nx">accountNoLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Account No./Suffix:"</span><span class="p">);</span>
                                <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"7"</span><span class="p">);</span>
                                <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">===</span> <span class="s2">"Other"</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Bank Code:"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"25"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                            <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                            <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                            <span class="nx">routingNumberHelpSymbol</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="p">{</span>
                            <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Routing Number:"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"9"</span><span class="p">);</span>
                            <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
                            <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                            <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">routingNumberTextBoxLabel</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s2">"Routing Number:"</span><span class="p">);</span>
                        <span class="nx">routingNumberTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"maxlength"</span><span class="p">,</span> <span class="s2">"9"</span><span class="p">);</span>
                        <span class="nx">accountType</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                        <span class="nx">accountNoNZ</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">donationBankHelp</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">sFeatures</span> <span class="o">=</span> <span class="s1">'WIDTH=392px,HEIGHT=400px,RESIZABLE=YES,SCROLLBARS=NO,TOOLBAR=NO,LEFT=5,TOP=20,location=No;status=No'</span><span class="p">,</span> <span class="nx">oPopUp</span><span class="p">,</span>
                    <span class="nx">bankingType</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="ddlBankingSystemType"] :selected'</span><span class="p">),</span> <span class="nx">addressCTL</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"[id='country'] :selected"</span><span class="p">),</span> <span class="nx">selectedValue</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span> <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">bankingType</span> <span class="o">&amp;&amp;</span> <span class="nx">bankingType</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">selectedValue</span> <span class="o">=</span> <span class="nx">bankingType</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"Value"</span><span class="p">);;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">addressCTL</span> <span class="o">&amp;&amp;</span> <span class="nx">addressCTL</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="nx">addressCTL</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">AUS</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">selectedValue</span> <span class="o">===</span> <span class="s1">'Aus_NZ'</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">qParam</span> <span class="o">=</span> <span class="s1">'AUS'</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">NZ</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">selectedValue</span> <span class="o">===</span> <span class="s1">'Aus_NZ'</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">qParam</span> <span class="o">=</span> <span class="s1">'NZ'</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">countryData</span> <span class="o">&amp;&amp;</span> <span class="nx">validateCountry</span><span class="p">(</span><span class="nx">selectedCountry</span><span class="p">,</span> <span class="nx">countryData</span><span class="p">.</span><span class="nx">CAD</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">selectedValue</span> <span class="o">===</span> <span class="s1">'USA'</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_CanadaTransitNum"]'</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'[id="tr_CanadaTransitNum"]'</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">qParam</span> <span class="o">=</span> <span class="s1">'CAD'</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">switch</span> <span class="p">(</span><span class="nx">selectedValue</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">case</span> <span class="s1">'USA'</span><span class="p">:</span>
                            <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">"USA"</span><span class="p">;</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="k">case</span> <span class="s2">"Aus_NZ"</span><span class="p">:</span>
                            <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">"AUS"</span><span class="p">;</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="k">case</span> <span class="s2">"UK"</span><span class="p">:</span>
                            <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">"UK"</span><span class="p">;</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="nl">default</span><span class="p">:</span>
                            <span class="nx">qParam</span> <span class="o">=</span> <span class="s2">"USA"</span><span class="p">;</span>
                            <span class="k">break</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="nx">oPopUp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PopUpDialogBB</span><span class="p">(</span><span class="s1">'~/Admin/DonationHelp.ascx'</span><span class="p">,</span> <span class="s1">'_blank'</span><span class="p">,</span> <span class="nx">sFeatures</span><span class="p">,</span> <span class="s1">'&amp;mode=2&amp;displayfor='</span> <span class="o">+</span> <span class="nx">qParam</span><span class="p">);</span>
                <span class="nx">oPopUp</span><span class="p">.</span><span class="nx">Show</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** DIRECT DEBIT FUNCTIONS - SECTION END ***************************************/</span>

            <span class="c1">// gift aid declaration</span>
            <span class="kd">function</span> <span class="nx">dDGuarantee</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">sFeatures</span> <span class="o">=</span> <span class="s1">'WIDTH=650px,HEIGHT=415px,RESIZABLE=YES,SCROLLBARS=NO,TOOLBAR=NO,LEFT=5,TOP=20,location=No;status=No'</span><span class="p">,</span>
                    <span class="nx">oPopUp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PopUpDialogBB</span><span class="p">(</span><span class="s1">'~/Admin/DonationHelp.ascx'</span><span class="p">,</span> <span class="s1">'_blank'</span><span class="p">,</span> <span class="nx">sFeatures</span><span class="p">,</span> <span class="s1">'&amp;mode=3'</span><span class="p">);</span>
                <span class="nx">oPopUp</span><span class="p">.</span><span class="nx">Show</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="c1">// return the donation amount</span>
            <span class="kd">function</span> <span class="nx">getDonationAmount</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#amtOther"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtAmount"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[name='radioAmount']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">//return which payment method is selected on the page</span>
            <span class="kd">function</span> <span class="nx">GetPaymentType</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">paymentMethod</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[name='paymentMethod']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                <span class="k">return</span> <span class="nx">paymentMethod</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">//set the public key by using public key service that is used to open the checkout pop up</span>
            <span class="kd">function</span> <span class="nx">GetPublicKey</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">onPublicKeySuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">reply</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">publicKey</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">reply</span><span class="p">.</span><span class="nx">Data</span><span class="p">).</span><span class="nx">PublicKey</span><span class="p">;</span>
                <span class="p">};</span>
                <span class="nx">onPublicKeyFailure</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                <span class="p">};</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">getCheckoutPublicKey</span><span class="p">(</span><span class="nx">onPublicKeySuccess</span><span class="p">,</span> <span class="nx">onPublicKeyFailure</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">//get all the information that is configured on the editor used to open the checkout pop up</span>
            <span class="kd">function</span> <span class="nx">GetEditorInformation</span><span class="p">(</span><span class="nx">partId</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">onEditorContentSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">onSuccess</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">merchantAccountId</span> <span class="o">=</span> <span class="nx">content</span><span class="p">.</span><span class="nx">MerchantAccountID</span><span class="p">;</span>
                    <span class="nx">EditorContent</span> <span class="o">=</span> <span class="nx">content</span><span class="p">;</span>
                <span class="p">};</span>
                <span class="nx">onEditorContentFailure</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">onFail</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                <span class="p">};</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">getADFEditorContentInformation</span><span class="p">(</span><span class="nx">partId</span><span class="p">,</span> <span class="nx">onEditorContentSuccess</span><span class="p">,</span> <span class="nx">onEditorContentFailure</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** PROCESSING PAYMENT FUNCTIONS - SECTION START ***************************************/</span>

            <span class="c1">// calls the payment api to open the checkout pop up with all the parameters</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">makePayment</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="nx">opened</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">checkout</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SecureCheckout</span><span class="p">(</span><span class="nx">handleCheckoutComplete</span><span class="p">,</span> <span class="nx">handleCheckoutError</span><span class="p">,</span> <span class="nx">handleCheckoutCancelled</span><span class="p">,</span> <span class="nx">handleCheckoutLoaded</span><span class="p">),</span>
                    <span class="nx">donor</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Donor</span><span class="p">,</span>
                    <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#country :selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">),</span>
                    <span class="nx">selectedState</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#state :selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"iso"</span><span class="p">);</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">selectedCountry</span> <span class="o">&amp;&amp;</span> <span class="nx">selectedCountry</span> <span class="o">==</span> <span class="s2">"GB"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">selectedCountry</span> <span class="o">=</span> <span class="s2">"UK"</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="nx">donationData</span> <span class="o">=</span> <span class="p">{</span>

                    <span class="s2">"key"</span><span class="p">:</span> <span class="nx">publicKey</span><span class="p">,</span>

                    <span class="s1">'Amount'</span><span class="p">:</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">?</span> <span class="nx">installmentAmt</span> <span class="p">:</span> <span class="nx">getDonationAmount</span><span class="p">(),</span>

                    <span class="s1">'UseCaptcha'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">RecaptchRequired</span><span class="p">,</span>

                    <span class="s1">'BillingAddressCity'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">City</span><span class="p">,</span>

                    <span class="s1">'BillingAddressCountry'</span><span class="p">:</span> <span class="nx">selectedCountry</span><span class="p">,</span>

                    <span class="s1">'BillingAddressLine'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">StreetAddress</span><span class="p">,</span>

                    <span class="s1">'BillingAddressPostCode'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">PostalCode</span><span class="p">,</span>

                    <span class="s1">'BillingAddressState'</span><span class="p">:</span> <span class="nx">selectedState</span><span class="p">,</span>

                    <span class="s1">'BillingAddressEmail'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">EmailAddress</span><span class="p">,</span>

                    <span class="s1">'BillingAddressFirstName'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">FirstName</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">MiddleName</span><span class="p">,</span>

                    <span class="s1">'BillingAddressLastName'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">LastName</span><span class="p">,</span>

                    <span class="s1">'Cardholder'</span><span class="p">:</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">FirstName</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">donor</span><span class="p">.</span><span class="nx">LastName</span><span class="p">,</span>

                    <span class="s1">'ClientAppName'</span><span class="p">:</span> <span class="s1">'BBIS'</span><span class="p">,</span>

                    <span class="s1">'MerchantAccountId'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">MerchantAccountID</span><span class="p">,</span>

                    <span class="s1">'IsEmailRequired'</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

                    <span class="s1">'PrimaryColor'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">PrimaryFontColor</span><span class="p">,</span>

                    <span class="s1">'SecondaryColor'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">SecondaryFontColor</span><span class="p">,</span>

                    <span class="s1">'FontFamily'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">FontType</span><span class="p">,</span>

                    <span class="s1">'IsNameVisible'</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

                    <span class="s1">'UseVisaCheckout'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">UseVisaPass</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">),</span>

                    <span class="s1">'UseMasterpass'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">UseMasterPass</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">),</span>

                    <span class="s1">'UseApplePay'</span><span class="p">:</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">UseApplePay</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">),</span>

                <span class="p">};</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">)</span> <span class="p">{</span>

                    <span class="nx">donationData</span><span class="p">.</span><span class="nx">CardToken</span> <span class="o">=</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">DataKey</span><span class="p">;</span>

                <span class="p">}</span>

                <span class="c1">//check server date and start date here -- if same then make transaction today</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">ProcessNow</span><span class="p">)</span> <span class="p">{</span>

                    <span class="k">return</span> <span class="nx">checkout</span><span class="p">.</span><span class="nx">processStoredCard</span><span class="p">(</span><span class="nx">donationData</span><span class="p">);</span>

                <span class="p">}</span>

                <span class="k">else</span> <span class="p">{</span>

                    <span class="k">return</span> <span class="nx">checkout</span><span class="p">.</span><span class="nx">processCardNotPresent</span><span class="p">(</span><span class="nx">donationData</span><span class="p">);</span>

                <span class="p">}</span>

            <span class="p">}</span>

            <span class="c1">// call ProcessCCPayment(), submitDonationToServer(data) for further Donation Procesing</span>
            <span class="kd">function</span> <span class="nx">sendData</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">EditorContent</span> <span class="o">&amp;&amp;</span> <span class="nx">EditorContent</span><span class="p">.</span><span class="nx">MACheckoutSupported</span> <span class="o">&amp;&amp;</span> <span class="nx">GetPaymentType</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">ProcessCCPayment</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">data</span><span class="p">;</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
                    <span class="nx">setConsentValidationMessage</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
                    <span class="nx">data</span> <span class="o">=</span> <span class="nx">extractDataFromForm</span><span class="p">();</span>
                    <span class="nx">submitDonationToServer</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">// use this method for credit card payment through popup</span>
            <span class="kd">function</span> <span class="nx">ProcessCCPayment</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">data</span> <span class="o">=</span> <span class="nx">extractDataFromForm</span><span class="p">();</span>
                <span class="nx">onValidationSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">makePayment</span><span class="p">();</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">};</span>
                <span class="nx">onValidationFailed</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">error</span><span class="p">));</span>
                <span class="p">};</span>
                <span class="c1">//check Client validation</span>
                <span class="nx">donationService</span><span class="p">.</span><span class="nx">validateDonationRequest</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">onValidationSuccess</span><span class="p">,</span> <span class="nx">onValidationFailed</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">// call when we click on "Donate" button</span>
            <span class="kd">function</span> <span class="nx">onSubmitClick</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">validateFormClientSide</span><span class="p">())</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">cnstType</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">$</span><span class="p">(</span><span class="s2">"#overlay"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span>
                            <span class="nx">openDialog</span><span class="p">();</span>
                            <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal button"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span>
                            <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal button"</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">"click"</span><span class="p">);</span>
                            <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal button"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

                                <span class="k">if</span> <span class="p">(</span><span class="nx">consentValidation</span><span class="p">())</span> <span class="p">{</span>
                                    <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"cnstFilled"</span><span class="p">,</span> <span class="s2">"1"</span><span class="p">);</span>
                                    <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">dialog</span><span class="p">(</span><span class="s1">'close'</span><span class="p">);</span>
                                    <span class="nx">sendData</span><span class="p">();</span>
                                <span class="p">}</span>
                            <span class="p">});</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="p">{</span>
                            <span class="nx">$</span><span class="p">(</span><span class="s2">"#inline"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span>
                            <span class="k">if</span> <span class="p">(</span><span class="nx">validateFormClientSide</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">consentValidation</span><span class="p">())</span> <span class="p">{</span>
                                <span class="nx">sendData</span><span class="p">();</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">sendData</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** PROCESSING PAYMENT FUNCTIONS - SECTION END ***************************************/</span>

            <span class="cm">/*************************************** HANDLE CHECKOUT EVENTS SECTION START ***************************************/</span>

            <span class="c1">//when checkout popup is successfully loaded</span>
            <span class="nx">handleDonationCreated</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">orderID</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Data</span><span class="p">).</span><span class="nx">OrderId</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">//when checkout popup is fail to load</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">handleDonationCreateFailed</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">handleError</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">//when the payment is successfully completed and we have to show the confirnmation screen</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">handlePaymentComplete</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">IsPopUpLoaded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">"#bbspLoadingOverlay"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                <span class="c1">//confirmation message show here</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".form"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">Data</span><span class="p">).</span><span class="nx">confirmationHTML</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">//this function called when the checkout popup is loaded on a page</span>
            <span class="kd">function</span> <span class="nx">handleCheckoutLoaded</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">opened</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">opened</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="nx">IsPopUpLoaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#bbCheckoutPaymentIframe"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s1">'src'</span><span class="p">);</span>
                    <span class="kd">var</span> <span class="nx">tid</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#paymentForm'</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">"input[name*='transactiontoken']"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="c1">//save transaction id in global variable. Will be used throughout the transaction</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">transactionIDl</span> <span class="o">=</span> <span class="nx">tid</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">tid</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">data</span><span class="p">.</span><span class="nx">TokenId</span> <span class="o">=</span> <span class="nx">tid</span><span class="p">;</span>
                        <span class="nx">donationService</span><span class="p">.</span><span class="nx">checkoutDonationCreate</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">handleDonationCreated</span><span class="p">,</span> <span class="nx">handleDonationCreateFailed</span><span class="p">);</span>
                        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">//this is called when the payment is completed</span>
            <span class="kd">function</span> <span class="nx">handleCheckoutComplete</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">tranToken</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">"#bbspLoadingOverlay"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">event</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">detail</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">transactionToken</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">data</span><span class="p">.</span><span class="nx">TokenId</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">transactionToken</span><span class="p">;</span>
                    <span class="nx">donationService</span><span class="p">.</span><span class="nx">checkoutDonationComplete</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">handlePaymentComplete</span><span class="p">,</span> <span class="nx">handleDonationCreateFailed</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">handleError</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="c1">//  donationService.checkoutDonationComplete(data, handlePaymentComplete, handleDonationCreateFailed);</span>
                <span class="nx">UnBindPaymentCheckoutEvents</span><span class="p">();</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">//call when there is any error while doing the payment on checkout pop up</span>
            <span class="nx">handleCheckoutError</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">errorMsg</span><span class="p">,</span> <span class="nx">errorCode</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">handleError</span><span class="p">(</span><span class="nx">errorMsg</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">//Cancel Donation if user close checkout popup</span>
            <span class="kd">function</span> <span class="nx">handleCheckoutCancelled</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">try</span> <span class="p">{</span>
                    <span class="nx">IsPopUpLoaded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                    <span class="nx">donationService</span><span class="p">.</span><span class="nx">checkoutDonationCancel</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFail</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">//do not store this error. Already stored from server side</span>
                <span class="p">}</span>
                <span class="nx">UnBindPaymentCheckoutEvents</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="c1">//Handle Generic error</span>
            <span class="kd">function</span> <span class="nx">handleError</span><span class="p">(</span><span class="nx">errorMessage</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">"#bbspLoadingOverlay"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                <span class="nx">IsPopUpLoaded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="nx">alert</span><span class="p">(</span><span class="nx">checkoutGenericError</span><span class="p">);</span>
                <span class="nx">location</span><span class="p">.</span><span class="nx">reload</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="c1">//when we cancel the payment pop up then unbind all the binded events on checkout popup</span>
            <span class="kd">function</span> <span class="nx">UnBindPaymentCheckoutEvents</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">"checkoutComplete"</span><span class="p">);</span>
                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">"checkoutLoaded"</span><span class="p">);</span>
                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">"checkoutError"</span><span class="p">);</span>
                <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="s2">"checkoutCancel"</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="cm">/*************************************** HANDLE CHECKOUT EVENTS SECTION END ***************************************/</span>

            <span class="cm">/*------------------------------------------- JAVASCRIPT FUNCTIONS - SECTION END -------------------------------------------*/</span>

            <span class="c1">// this function set-up/bind all required controls of Donation Form on Page Load</span>
            <span class="kd">function</span> <span class="nx">setupForm</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">bindDesignationDropdown</span><span class="p">();</span>
                <span class="nx">bindCountryDropdown</span><span class="p">();</span>
                <span class="nx">bindTitleDropdown</span><span class="p">();</span>
                <span class="c1">//bindUserData();</span>
                <span class="nx">bindConsentOption</span><span class="p">();</span>
                <span class="nx">getCountryMappings</span><span class="p">();</span>
                <span class="nx">bindDirectDebitData</span><span class="p">();</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".submit"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">onSubmitClick</span><span class="p">();</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtAmount"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#amtOther"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="s2">"checked"</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">updateEverythingPossible</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isCorporate"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#organizationNameDiv"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeTribue"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tribute"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAcknowledgee"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgee"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">addCountryHandler</span><span class="p">();</span> <span class="p">})</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#number-of-installments"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#start-date"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#day-of-month"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#month"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#day-of-week"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">showHideRecurrenceDiv</span><span class="p">();</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#billMeLater"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#directDebit"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recOneTime"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">showHideRecurrenceDiv</span><span class="p">();</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#billMeLater"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">""</span><span class="p">);</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#directDebit"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentDirectDebit"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">showHideDirectDebitDiv</span><span class="p">();</span> <span class="p">})</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#ddlBankingSystemType"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">hideAndVisible_DirectDebitFields</span><span class="p">();</span> <span class="p">})</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">addCountryHandler</span><span class="p">();</span> <span class="p">})</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#paymentCreditCard"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#directDebitInformation"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#lnk_BankHelp"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">donationBankHelp</span><span class="p">();</span> <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#lnk_DDGuarantee"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">dDGuarantee</span><span class="p">();</span> <span class="p">});</span>
                <span class="kd">function</span> <span class="nx">tributeKindChange</span><span class="p">()</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">kind</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[name='radioTribute']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">kind</span> <span class="o">===</span> <span class="s2">"1"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#specificTribute"</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#generalTribute"</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#generalTribute"</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                        <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#specificTribute"</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#kindGeneral"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">tributeKindChange</span><span class="p">);</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#kindSpecific"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">tributeKindChange</span><span class="p">);</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute1"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute1"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                <span class="p">});</span>
                <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute2"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute2"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
                <span class="p">});</span>
                <span class="c1">//Make sure this default HTML is configured for use:</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">designationQueryId</span> <span class="o">===</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span> <span class="o">||</span> <span class="nx">merchantAccountId</span> <span class="o">===</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">setValidationMessage</span><span class="p">(</span><span class="s2">"DesignationQueryId and MerchantAccountId must be configured before this form can be used."</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="cm">/*------------------------------------------- PAGE LOAD METHOD - START -------------------------------------------*/</span>

            <span class="kd">function</span> <span class="nx">PageLoad</span><span class="p">()</span> <span class="p">{</span>
                <span class="c1">//Wait until the blockUI script is loaded before we start loading the page.</span>
                <span class="kd">var</span> <span class="nx">t</span><span class="p">;</span>
                <span class="nx">part</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">".donationForm"</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">serverMonth</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"serverMonth"</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="nx">serverDay</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"serverDay"</span><span class="p">),</span>
                    <span class="nx">serverYear</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"serverYear"</span><span class="p">);</span>
                <span class="nx">ServerDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">serverYear</span><span class="p">,</span> <span class="nx">serverMonth</span><span class="p">,</span> <span class="nx">serverDay</span><span class="p">);</span>

                <span class="nx">blocked</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="nx">partInstanceId</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"data-partid"</span><span class="p">);</span>
                <span class="c1">// Create an instance of the DonationService</span>
                <span class="nx">donationService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span><span class="nx">partInstanceId</span><span class="p">);</span>

                <span class="nx">GetEditorInformation</span><span class="p">(</span><span class="nx">partInstanceId</span><span class="p">);</span>

                <span class="nx">GetPublicKey</span><span class="p">();</span>

                <span class="nx">t</span> <span class="o">=</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">querystring</span><span class="p">.</span><span class="nx">getQueryStringValue</span><span class="p">(</span><span class="s2">"t"</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".form"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                    <span class="nx">completeBBSPPayment</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".form"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
                    <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
                    <span class="nx">setupForm</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">PageLoad</span><span class="p">();</span>

            <span class="cm">/*------------------------------------------- PAGE LOAD METHOD - END -------------------------------------------*/</span>

        <span class="p">}());</span>

        <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'beforeunload'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">IsPopUpLoaded</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
                    <span class="k">return</span> <span class="s2">""</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">});</span>

        <span class="p">})(</span><span class="nx">$</span><span class="p">);</span></code></pre></div> </div> <div class="tab-pane" id="example-complete-legacy-css"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* Currently using Bootstrap styles and some default style */</span>
    <span class="nc">.no-close</span> <span class="nc">.ui-dialog-titlebar</span> <span class="p">{</span>
            <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="nf">#privacylink</span> <span class="p">{</span>
            <span class="nl">color</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>
            <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="nf">#privacylink</span><span class="nd">:hover</span> <span class="p">{</span>
		<span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="nc">.donationForm</span> <span class="nc">.validation</span> <span class="p">{</span>
            <span class="nl">color</span><span class="p">:</span> <span class="n">Red</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="nc">.consentValidation</span> <span class="p">{</span>
		<span class="nl">color</span><span class="p">:</span> <span class="n">Red</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="nc">.donationForm</span> <span class="nt">ul</span> <span class="p">{</span>
		<span class="nl">list-style-type</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="nc">.donationForm</span> <span class="nc">.DonationListingHeading</span> <span class="p">{</span>
            <span class="nl">font-size</span><span class="p">:</span> <span class="nb">large</span><span class="p">;</span>
            <span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
    <span class="p">}</span>
	
    <span class="nc">.donationForm</span> <span class="nc">.confirmation</span> <span class="p">{</span>
            <span class="nl">min-height</span><span class="p">:</span> <span class="m">400px</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="nc">.donationForm</span> <span class="nc">.invisible</span> <span class="p">{</span>
		<span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="nc">.DonationListingHeading</span> <span class="p">{</span>
            <span class="nl">height</span><span class="p">:</span> <span class="m">2.25em</span> <span class="cp">!important</span><span class="p">;</span>
    <span class="p">}</span></code></pre></div> </div> </div> ï»¿<h3 id="example-complete-payment2-0">ADF - Complete Example(Payment 2.0)</h3> <p>All other examples present on Developer Site are designed to be inserted into an Advanced Donation Form Part; however following example is designed as a complete standalone solution â applicable even on a different server than the one serving your BBIS website. </p> <p>Please note you will need to update the references in the example below to your BBIS installation.</p> <ol> <li> The following ADF JS is only applicable for Payment 2.0. </li> <li> If you change the ID of any HTML control, then you will need to update/change all instances of that ID in both HTML and JS.</li> <li> Ensure you are using all the validations and If conditions, and pass all the values in the same format as mentioned in the sample.</li> <li> <b>Changing the visual appearance of page</b> : Modify the default CSS Class written under the CSS tab as per your own requirements.</li> <li> <b>Configuring Designation</b> : Change the value of variable - designationQueryId="" : <ol type="i"><li> Use of this variable to display All Available Designation(s) on UI.</li> <li> In the PART CONFIGURATION SECTION, Change the value of the variable - designationQueryId="". This value can be found using SQL against your application Database by executing query (Select * from ADHOCQUERY Where NAME = '{your respective CRM application Ad-hoc Query Name of Designation Record Type}') on table. In this table you can copy the ID column value.</li></ol></li> <li> <b>Add/Remove Feature Section</b> : In this example we have two types of feature section. The first being the HTML tab, used for Controls available on Page UI. Secondly, the JAVASCRIPT tab, used for handling functionality of these HTML Controls. <ol type="i"><li> For adding Recurring Gift capability, add the HTML content between "RECURRING GIFT - SECTION START AND RECURRING GIFT - SECTION END" under HTML tab. Also add JAVASCRIPT between "RECURRENCE FUNCTIONS - SECTION START AND RECURRENCE FUNCTIONS - SECTION END" under JAVASCRIPT tab.</li> <li> For adding Gift Amount, choose HTML DESIGN between "GIFT AMOUNT - SECTION START AND GIFT AMOUNT - SECTION END" under HTML tab. Also add JAVASCRIPT between "RECURRENCE FUNCTIONS - SECTION START AND RECURRENCE FUNCTIONS - SECTION END" under JAVASCRIPT tab.</li> <li> For adding Consent capability, choose HTML DESIGN between "CONSENT - SECTION START AND CONSENT - SECTION END" under HTML tab. Also add JAVASCRIPT between "CONSENT VALIDATION FUNCTIONS - SECTION START AND CONSENT VALIDATION FUNCTIONS - SECTION END" under JAVASCRIPT tab.</li></ol></li> </ol> <ul class="nav nav-tabs"> <li class="active"><a href="#example-complete-payment2-html" data-toggle="tab">HTML</a></li> <li><a href="#example-complete-payment2-js" data-toggle="tab">JS</a></li> <li><a href="#example-complete-payment2-css" data-toggle="tab">CSS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-complete-payment2-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>

    <span class="nt">&lt;title&gt;</span>ADF - Complete Example(Payment 2.0)<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"//maxcdn.bootstrapcdn.com/bootstrap/4.2.0/css/bootstrap.min.css"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>

        <span class="cm">/*------------------------------------------- PART CONFIGURATION - SECTION START -------------------------------------------*/</span>

        <span class="kd">var</span> <span class="nx">designationQueryId</span> <span class="o">=</span> <span class="s2">"8d9fccdf-dea8-4590-8ec2-355a4c59df04"</span><span class="p">;</span>  <span class="cm">/* Ad-hoc Query of Designation Type With Enable query for CMS REST API */</span>

        <span class="kd">var</span> <span class="nx">consentPartId</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'partid'</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">cnstType</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.BBDonationApiContainer'</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'cnsttype'</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"True"</span><span class="p">);</span>

            <span class="cm">/*------------------------------------------- PART CONFIGURATION - SECTION END -------------------------------------------*/</span>

    <span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"donationForm container"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"alert"</span> <span class="na">style=</span><span class="s">"background-color:#b6cbe5;"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;h3&gt;</span>Advanced Donation Form <span class="nt">&lt;small&gt;</span>Complete Example(Payment 2.0)<span class="nt">&lt;/small&gt;&lt;/h3&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"validation"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentValidation"</span> <span class="na">id=</span><span class="s">"inline"</span> <span class="na">style=</span><span class="s">"display:none"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">"donationInformation"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Gift Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="c">&lt;!-- *********************************************** GIFT AMOUNT - SECTION START *********************************************** --&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"giftAmount"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"required"</span><span class="nt">&gt;</span>Select Gift Amount:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"list-group"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt1000"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"1000"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt1000"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Platinum<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$1,000<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt500"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"500"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt500"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Gold<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$500<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt100"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"100"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt100"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Silver<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$100<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amt25"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"25"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amt25"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Bronze<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"value"</span><span class="nt">&gt;</span>$25<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"other"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"amtOther"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioAmount"</span> <span class="na">value=</span><span class="s">"-1"</span> <span class="na">checked=</span><span class="s">"checked"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"amtOther"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Enter an amount<span class="nt">&lt;/span&gt;</span>
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"txtAmount"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">placeholder=</span><span class="s">"$"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                            <span class="nt">&lt;/ul&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="c">&lt;!-- *********************************************** GIFT AMOUNT - SECTION END *********************************************** --&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"recurrence"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"required"</span><span class="nt">&gt;</span>Recurrence:<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"list-group"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"recOneTime"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioRecurrence"</span> <span class="na">value=</span><span class="s">"0"</span> <span class="na">checked=</span><span class="s">"checked"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"recOneTime"</span><span class="nt">&gt;</span>
                                        Make a one time gift.
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"recMonthly"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioRecurrence"</span> <span class="na">value=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"recMonthly"</span><span class="nt">&gt;</span>
                                        Recurring Gift.
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                            <span class="nt">&lt;/ul&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>

                        <span class="c">&lt;!-- *********************************************** RECURRING GIFT - SECTION START *********************************************** --&gt;</span>

                        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divRecurringGift"</span> <span class="na">style=</span><span class="s">"display:none;"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;h5&gt;</span>What's good?<span class="nt">&lt;/h5&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-9"</span><span class="nt">&gt;</span>
                                    I want to pledge above amount to the Avengers Initiative in
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"number-of-installments"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="nt">/&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-1"</span><span class="nt">&gt;</span>
                                    installments.
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    I pledge to pay
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"installment-amount"</span><span class="nt">&gt;</span>$0.00<span class="nt">&lt;/label&gt;</span> every
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divFrequency"</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                                            <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"frequency"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select Frequency<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Weekly<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>Monthly<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Quarterly<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>Annually<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7"</span><span class="nt">&gt;</span>Every4Weeks<span class="nt">&lt;/option&gt;</span>
                                            <span class="nt">&lt;/select&gt;</span>
                                        <span class="nt">&lt;/div&gt;</span>
                                        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divDayOfWeek"</span> <span class="na">class=</span><span class="s">"col-sm-6"</span> <span class="na">style=</span><span class="s">"display:none;"</span><span class="nt">&gt;</span>
                                            <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"day-of-week"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select Day-of-Week<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"0"</span><span class="nt">&gt;</span>Sunday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Monday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>Tuesday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Wednesday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>Thursday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>Friday<span class="nt">&lt;/option&gt;</span>
                                                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6"</span><span class="nt">&gt;</span>Saturday<span class="nt">&lt;/option&gt;</span>
                                            <span class="nt">&lt;/select&gt;</span>
                                        <span class="nt">&lt;/div&gt;</span>
                                    <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    on the
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divDayOfMonth"</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"day-of-month"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select Day-Of-Month<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>1<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>2<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>3<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>4<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>5<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>6<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>7<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>8<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>9<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>10<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>11<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>12<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>13<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>14<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>15<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>16<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>17<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>18<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>19<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>20<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>21<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>22<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>23<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>24<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>25<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>26<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>27<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>28<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>29<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>30<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option&gt;</span>31<span class="nt">&lt;/option&gt;</span>
                                    <span class="nt">&lt;/select&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-1"</span><span class="nt">&gt;</span>
                                    of
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divMonth"</span> <span class="na">class=</span><span class="s">"col-sm-5"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"month"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Month<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>January<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>February<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>March<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>April<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>May<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6"</span><span class="nt">&gt;</span>June<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7"</span><span class="nt">&gt;</span>July<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"8"</span><span class="nt">&gt;</span>August<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"9"</span><span class="nt">&gt;</span>September<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"10"</span><span class="nt">&gt;</span>October<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"11"</span><span class="nt">&gt;</span>November<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"12"</span><span class="nt">&gt;</span>December<span class="nt">&lt;/option&gt;</span>
                                    <span class="nt">&lt;/select&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    starting on
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"start-date"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"mm/dd/yyyy"</span> <span class="nt">/&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-7"</span><span class="nt">&gt;</span>
                                    . My final payment will be made on <span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"end-date"</span> <span class="na">class=</span><span class="s">"col-form-label"</span> <span class="nt">/&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>

                            <span class="c">&lt;!-- *********************************************** RECURRING GIFT - SECTION END *********************************************** --&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>

            <span class="nt">&lt;fieldset&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Additional Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"isAnonymous"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"isAnonymous"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Make this gift anonymously
                        <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"createGiftAidDeclaration"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"createGiftAidDeclaration"</span> <span class="na">class=</span><span class="s">"col-form-label checkbox-inline"</span><span class="nt">&gt;</span>
                            Create gift aid declaration
                        <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>

                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"Comments"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Comments:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"comments"</span> <span class="na">id=</span><span class="s">"comments"</span> <span class="na">maxlength=</span><span class="s">"400"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"appealId"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Appeal ID:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"appealId"</span> <span class="na">maxlength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter an appeal GUID"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"designation"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Designation:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"designation"</span> <span class="na">name=</span><span class="s">" "</span><span class="nt">&gt;&lt;/select&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>
            <span class="c">&lt;!-- *********************************************** CONSENT - SECTION START *********************************************** --&gt;</span>

            <span class="nt">&lt;div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"myModal"</span> <span class="na">class=</span><span class="s">"modal-content"</span> <span class="na">style=</span><span class="s">"display:none"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"consentValidation"</span> <span class="na">id=</span><span class="s">"overlay"</span> <span class="na">style=</span><span class="s">"display:none;padding: 7px 0px 8px 7px"</span><span class="nt">&gt;&lt;/div&gt;</span>
                    <span class="nt">&lt;fieldset</span> <span class="na">style=</span><span class="s">"border:none;"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;legend&gt;</span>
                            <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"consentTitle"</span><span class="nt">&gt;</span>Consent Start<span class="nt">&lt;/span&gt;&lt;br</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;hr</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">id=</span><span class="s">"consentStatement"</span> <span class="na">style=</span><span class="s">"text-align:center;"</span><span class="nt">&gt;&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;/legend&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">value=</span><span class="s">""</span> <span class="na">id=</span><span class="s">"hdnCRMConsentSolicitCode"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">value=</span><span class="s">""</span> <span class="na">id=</span><span class="s">"hdnCRMSolicitCode"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;table</span> <span class="na">id=</span><span class="s">"consentOption"</span> <span class="na">class=</span><span class="s">"table"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;tr&gt;</span>
                                <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"border:1px solid black;border-color:#efefef;"</span><span class="nt">&gt;</span>Communication Type<span class="nt">&lt;/th&gt;</span>
                                <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"border:1px solid black;border-color:#efefef;"</span><span class="nt">&gt;</span>Opt-in<span class="nt">&lt;/th&gt;</span>
                                <span class="nt">&lt;th</span> <span class="na">style=</span><span class="s">"border:1px solid black;border-color:#efefef;"</span><span class="nt">&gt;</span>Opt-out<span class="nt">&lt;/th&gt;</span>
                            <span class="nt">&lt;/tr&gt;</span>
                        <span class="nt">&lt;/table&gt;</span>
                        <span class="nt">&lt;legend&gt;</span>
                            <span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"privacylink"</span><span class="nt">&gt;</span>View Privacy Policy<span class="nt">&lt;/a&gt;&lt;br</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>
                            <span class="nt">&lt;button</span> <span class="na">style=</span><span class="s">"display:none"</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span> <span class="na">type=</span><span class="s">"button"</span><span class="nt">&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
                        <span class="nt">&lt;/legend&gt;</span>
                    <span class="nt">&lt;/fieldset&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>

            <span class="c">&lt;!-- *********************************************** CONSENT - SECTION END *********************************************** --&gt;</span>
            <span class="c">&lt;!-- *********************************************** BILLING/DONOR INFORMATION - SECTION START *********************************************** --&gt;</span>

            <span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">"billingInformation"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Finder Number<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"finderNumber"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Finder number:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"finderNumber"</span> <span class="na">maxlength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter a finder number"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Billing Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"title"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Title:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"title"</span> <span class="na">name=</span><span class="s">" "</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span> <span class="na">selected=</span><span class="s">"selected"</span><span class="nt">&gt;</span>select a value<span class="nt">&lt;/option&gt;</span>
                        <span class="nt">&lt;/select&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"firstName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            First name:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"firstName"</span> <span class="na">maxlength=</span><span class="s">"30"</span> <span class="na">placeholder=</span><span class="s">"enter your first name"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"middleName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Middle name:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"middleName"</span> <span class="na">maxlength=</span><span class="s">"30"</span> <span class="na">placeholder=</span><span class="s">"enter your middle name"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"lastName"</span> <span class="na">class=</span><span class="s">"required col-form-label"</span><span class="nt">&gt;</span>
                            Last name:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"lastName"</span> <span class="na">maxlength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter your last name"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"country"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span><span class="nt">&gt;</span>
                            Country:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"country"</span><span class="nt">&gt;&lt;/select&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"streetAddress"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span> <span class="na">id=</span><span class="s">"streetAddressLabel"</span><span class="nt">&gt;</span>
                            Address:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"streetAddress"</span> <span class="na">cols=</span><span class="s">"20"</span> <span class="na">rows=</span><span class="s">"1"</span><span class="nt">&gt;&lt;/textarea&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"city"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span> <span class="na">id=</span><span class="s">"cityLabel"</span><span class="nt">&gt;</span>
                            City:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"city"</span> <span class="na">maxlength=</span><span class="s">"50"</span> <span class="na">placeholder=</span><span class="s">"enter a city"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"state"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span> <span class="na">id=</span><span class="s">"stateLabel"</span><span class="nt">&gt;</span>
                            State/Province:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"state"</span><span class="nt">&gt;&lt;/select&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"postalCode"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span> <span class="na">id=</span><span class="s">"postalCodeLabel"</span><span class="nt">&gt;</span>
                            ZIP/Postal code:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"postalCode"</span> <span class="na">maxlength=</span><span class="s">"10"</span> <span class="na">placeholder=</span><span class="s">"enter a zip code"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4 required"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"emailAddress"</span> <span class="na">class=</span><span class="s">"col-form-label required"</span><span class="nt">&gt;</span>
                            Email:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"email"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"emailAddress"</span> <span class="na">maxlength=</span><span class="s">"120"</span> <span class="na">placeholder=</span><span class="s">"enter an email"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"phone"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Phone:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"phone"</span> <span class="na">placeholder=</span><span class="s">"enter a phone"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>

                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Payment Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>

                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow required"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"list-group"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;li&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"paymentCreditCard"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"paymentMethod"</span> <span class="na">value=</span><span class="s">"0"</span> <span class="na">checked=</span><span class="s">"checked"</span> <span class="nt">/&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"paymentCreditCard"</span><span class="nt">&gt;</span>
                                        Credit Card
                                    <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;/li&gt;</span>
                            <span class="nt">&lt;/ul&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Matching Gifts<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"isCorporate"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"isCorporate"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            This donation if on behalf of a company
                        <span class="nt">&lt;/label&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row required invisible"</span> <span class="na">id=</span><span class="s">"organizationNameDiv"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"organizationName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                            Company name:
                        <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"organizationName"</span> <span class="na">maxLength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter your company name"</span> <span class="na">class=</span><span class="s">"form-control"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>

            <span class="c">&lt;!-- *********************************************** BILLING/DONOR INFORMATION - SECTION END *********************************************** --&gt;</span>
            <span class="c">&lt;!-- *********************************************** TRIBUTE - SECTION START *********************************************** --&gt;</span>

            <span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">"tribueInformation"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Tribute /Acknowledgee Information<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">row=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                            <span class="ni">&amp;nbsp;&amp;nbsp;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"includeTribue"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"includeTribue"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                Include tribute:
                            <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"tribute"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"required"</span><span class="nt">&gt;</span>What kind of tribute:<span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"pagination"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;li&gt;</span>
                                        <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"kindSpecific"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioTribute"</span> <span class="na">value=</span><span class="s">"1"</span> <span class="na">checked=</span><span class="s">"checked"</span> <span class="nt">/&gt;</span>
                                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"kindSpecific"</span><span class="nt">&gt;</span>
                                            <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>Specific<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;/li&gt;</span>
                                    <span class="nt">&lt;li&gt;</span>
                                        <span class="ni">&amp;nbsp;&amp;nbsp;&amp;nbsp;</span>
                                        <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"kindGeneral"</span> <span class="na">type=</span><span class="s">"radio"</span> <span class="na">name=</span><span class="s">"radioTribute"</span> <span class="na">value=</span><span class="s">"2"</span> <span class="nt">/&gt;</span>
                                        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"kindGeneral"</span><span class="nt">&gt;</span>
                                            <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>General<span class="nt">&lt;/span&gt;</span>
                                        <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;/li&gt;</span>
                                <span class="nt">&lt;/ul&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"specificTribute"</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"formrow"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeID"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Tribute ID:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeID"</span> <span class="na">maxlength=</span><span class="s">"60"</span> <span class="na">placeholder=</span><span class="s">"enter a tribute GUID"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"generalTribute"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeFirstName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        First name:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeFirstName"</span> <span class="na">placeholder=</span><span class="s">"enter a first name"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeLastName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Last name:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeLastName"</span> <span class="na">placeholder=</span><span class="s">"enter a last name"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeType"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Type:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeType"</span> <span class="na">placeholder=</span><span class="s">"enter a tribute type"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"tributeDescription"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Description:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"tributeDescription"</span> <span class="na">placeholder=</span><span class="s">"enter a description"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"includeAcknowledgee"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"includeAcknowledgee"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Include acknowledgee:
                                <span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"acknowledgee"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeFirstName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        First name:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeeFirstName"</span> <span class="na">placeholder=</span><span class="s">"enter a first name"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeLastName"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Last name:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeeLastName"</span> <span class="na">placeholder=</span><span class="s">"enter a last name"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeCountry"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Country:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"adfSelect form-control required"</span> <span class="na">id=</span><span class="s">"acknowledgeeCountry"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"ec78fd4f-0c4b-4957-aa3f-2eea818ac1a5"</span><span class="nt">&gt;</span>Argentina<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7956b929-d5c4-464c-a4a1-3890e62a7169"</span><span class="nt">&gt;</span>Australia<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"fee54b28-1e87-471a-8911-3a2d2bd3a495"</span><span class="nt">&gt;</span>Canada<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7abaec6b-9dae-48b6-aefd-ed49a8a17014"</span><span class="nt">&gt;</span>Cyprus<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3b14baef-0885-40b8-b2d3-61952b4ee65f"</span><span class="nt">&gt;</span>Germany<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"9010ab76-fa31-49da-af40-11b55a1a2325"</span><span class="nt">&gt;</span>Italy<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"f56237ae-2818-4709-abe3-9033f0f5f2bc"</span><span class="nt">&gt;</span>Micronesia<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"8b2bfd13-5ba7-4285-b8f5-cb7b66bad0da"</span><span class="nt">&gt;</span>Netherlands<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"b7136318-8d3f-4433-b8a0-5f5243b8e0ca"</span><span class="nt">&gt;</span>New Zealand<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"e6c46278-273b-4cde-80ac-b760bff10d39"</span><span class="nt">&gt;</span>Philippines<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"b6ac77f4-921b-4f06-94a1-71681be655d3"</span><span class="nt">&gt;</span>Switzerland<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4a1fefc1-c1d1-4a07-a574-a45f522c9ea7"</span><span class="nt">&gt;</span>United Kingdom<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"00cb6cdb-f6cf-44e2-9c73-51ddf7965d8f"</span><span class="nt">&gt;</span>United States<span class="nt">&lt;/option&gt;</span>
                                    <span class="nt">&lt;/select&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeAddressLines"</span> <span class="na">id=</span><span class="s">"streetAddressLabelAcknowledgee"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Address lines:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeeAddressLines"</span> <span class="na">placeholder=</span><span class="s">"enter address lines"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeCity"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        City:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"enter city"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeState"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        State:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"adfSelect form-control required"</span> <span class="na">placeholder=</span><span class="s">"State"</span> <span class="na">id=</span><span class="s">"acknowledgeeState"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"b7fdbb29-e38f-4e31-91ca-f18b0a75d6b2"</span><span class="nt">&gt;</span>Alabama<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5ef7a238-bedc-40d3-b75c-989eb359843e"</span><span class="nt">&gt;</span>Alaska<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"fdc812c4-0469-4b18-a8b2-69cf758d5b72"</span><span class="nt">&gt;</span>American Samoa<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7bda2468-7402-4fe8-a79e-976905e0d1d6"</span><span class="nt">&gt;</span>Arizona<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"00347042-1e92-40f4-8c7c-43967a0288b4"</span><span class="nt">&gt;</span>Arkansas<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"9538fd5a-a2b7-41c7-bd36-cd76398f8bdb"</span><span class="nt">&gt;</span>Armed Forces Americas<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"26ff2ab5-265f-4d15-87df-3eb3c47fe016"</span><span class="nt">&gt;</span>Armed Forces Europe/Canada/Middle East/Africa<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"52a39054-3772-4d63-b11b-7b0e1867b2bd"</span><span class="nt">&gt;</span>Armed Forces Pacific<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"c4898e64-c833-40d0-a56d-2910304c1389"</span><span class="nt">&gt;</span>BC<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"622c184d-c9f9-4128-ba77-93c294fbae04"</span><span class="nt">&gt;</span>California<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"8ee83ecc-8782-4bc6-a1f6-44962c469284"</span><span class="nt">&gt;</span>Canal Zone<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"e4456832-9543-48ca-aa8b-44490e558ac4"</span><span class="nt">&gt;</span>Colorado<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"d2bd2357-3300-4859-9df6-f3c68af7439e"</span><span class="nt">&gt;</span>Connecticut<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7af4bbb5-0a3b-45ac-8f15-429c1463bce2"</span><span class="nt">&gt;</span>Delaware<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"09513ecd-d82b-4f86-812b-06e1b1dc07f9"</span><span class="nt">&gt;</span>District of Columbia<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"761ce051-3215-4d17-ba5f-db6be05064a3"</span><span class="nt">&gt;</span>Federated States of Micronesia<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"ea60d50f-2b7c-4863-967a-a9941b23f523"</span><span class="nt">&gt;</span>Florida<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"44d1976c-fcf5-49da-a087-81b3758a96b8"</span><span class="nt">&gt;</span>Georgia<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"39b0a266-edea-4bab-b3b4-35011348a827"</span><span class="nt">&gt;</span>Guam<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"a84bdc99-4ce6-4982-9f62-b9909e3129dd"</span><span class="nt">&gt;</span>Hawaii<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5183c79e-f864-409a-9c5e-f3df27e07f64"</span><span class="nt">&gt;</span>Idaho<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"26d92ff6-7eb9-4408-a992-87215d01edb5"</span><span class="nt">&gt;</span>Illinois<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"a795cfc1-6de2-4a12-9c81-132341cf1be8"</span><span class="nt">&gt;</span>Indiana<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6938e175-b0c8-4c1f-8eda-8530e9140396"</span><span class="nt">&gt;</span>Iowa<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"253b6dd5-79df-4643-b0a9-b4d90892a222"</span><span class="nt">&gt;</span>Kansas<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"12edd14f-9243-4494-aa00-8e7d17a0b325"</span><span class="nt">&gt;</span>Kentucky<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"0ea93967-4c8c-4ad7-8474-e26ee6910b43"</span><span class="nt">&gt;</span>Louisiana<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"c55d6232-d823-446e-9da4-6d2650d99331"</span><span class="nt">&gt;</span>Maine<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"23fd2d13-5760-4f18-b91b-3a542095a732"</span><span class="nt">&gt;</span>Marshall Islands<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"e1ca3663-9e34-4819-b2dc-22d7a1e601fe"</span><span class="nt">&gt;</span>Maryland<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"fc58e48c-ea64-45b7-9f6b-ac2e73b16323"</span><span class="nt">&gt;</span>Massachusetts<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"798463d6-5e40-48d8-8b30-1786513676ce"</span><span class="nt">&gt;</span>Michigan<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4daad583-a1b9-420c-8861-2641a2c04e0f"</span><span class="nt">&gt;</span>Minnesota<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"828412a7-4549-4c89-b9dc-9ddd25c72a4d"</span><span class="nt">&gt;</span>Mississippi<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"c3b88d6e-f2a9-444d-9b42-31d5c0e31538"</span><span class="nt">&gt;</span>Missouri<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"dedf7663-9081-489c-af27-d3c19fef8c53"</span><span class="nt">&gt;</span>Montana<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"04ccbc39-7807-4bc0-b942-2d88cd43e8f6"</span><span class="nt">&gt;</span>Nebraska<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"ce7ac87e-c243-4f84-bd56-e822e2d38b73"</span><span class="nt">&gt;</span>Nevada<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"b50ac14b-0191-4634-bd18-3194292a9d62"</span><span class="nt">&gt;</span>New Hampshire<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"9b952f48-8408-49f0-bbff-6ecbe2cd3d0b"</span><span class="nt">&gt;</span>New Jersey<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6210d152-26df-4332-aad0-559117f6bdf9"</span><span class="nt">&gt;</span>New Mexico<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"76eb36e6-5ae4-4aa5-84ed-966d7f42fa40"</span><span class="nt">&gt;</span>New York<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"75bbdb2b-b060-408e-b97e-e25f62e523c2"</span><span class="nt">&gt;</span>North Carolina<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"83450032-6ddf-4ce3-a21a-3181eede8799"</span><span class="nt">&gt;</span>North Dakota<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"c59c81a3-3e2b-4708-940c-00e198c1ea93"</span><span class="nt">&gt;</span>Northern Mariana Islands<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"b43db303-5388-45d7-adae-c7272d9c563c"</span><span class="nt">&gt;</span>Ohio<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"f576a438-ebe9-4045-9ee7-0e81e9a87909"</span><span class="nt">&gt;</span>Oklahoma<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"c48d061f-20a7-4a63-8557-31b660aa67d4"</span><span class="nt">&gt;</span>Oregon<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"c3628e38-834a-45fe-8784-c6da8c9a3ceb"</span><span class="nt">&gt;</span>Palau<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"72f7ac61-db2f-4888-bde7-16312bc7cf58"</span><span class="nt">&gt;</span>Pennsylvania<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"95076f20-748b-4265-a875-cf1d3a22c1d3"</span><span class="nt">&gt;</span>Puerto Rico<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"9988e83d-9af8-4e7b-b8df-569f58de6ec9"</span><span class="nt">&gt;</span>Rhode Island<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"16f1b713-c4ba-450d-abdd-fb73854566ff"</span><span class="nt">&gt;</span>South Carolina<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1765411d-e578-4492-bc06-7cbc38ae738d"</span><span class="nt">&gt;</span>South Dakota<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"03501976-ea73-472e-b685-a5df251fdea3"</span><span class="nt">&gt;</span>Tennessee<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"d88653af-0b6c-4104-b75e-5987536a38fc"</span><span class="nt">&gt;</span>Texas<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"fbb15fae-1c6b-445b-a435-9b6ce8c50105"</span><span class="nt">&gt;</span>Utah<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"17b17177-af25-4179-9493-2a2db15f0ae6"</span><span class="nt">&gt;</span>Vermont<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"20b0a289-1807-45c2-89b5-614d14b8f5aa"</span><span class="nt">&gt;</span>Virgin Islands<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"cfbc8dce-2cc5-4681-aaf8-8a8c1e5d8d43"</span><span class="nt">&gt;</span>Virginia<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"c56c4d01-363c-4f6b-bb01-17e19aee6504"</span><span class="nt">&gt;</span>Washington<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"67de067a-bed9-4768-b4cc-b24d23b5b94e"</span><span class="nt">&gt;</span>West Virginia<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"dd00a540-1194-4b53-bf88-ada4a6e2a69d"</span><span class="nt">&gt;</span>Wisconsin<span class="nt">&lt;/option&gt;</span>
                                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"65f8f915-56fb-45d9-a85c-37d41e50b7a2"</span><span class="nt">&gt;</span>Wyoming<span class="nt">&lt;/option&gt;</span>
                                    <span class="nt">&lt;/select&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>                            
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeePostalCode"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Postal code:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeePostalCode"</span> <span class="na">placeholder=</span><span class="s">"enter postal code"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeeEmail"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Email:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeeEmail"</span> <span class="na">placeholder=</span><span class="s">"enter email"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"acknowledgeePhone"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                        Phone:
                                    <span class="nt">&lt;/label&gt;</span>
                                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"acknowledgeePhone"</span> <span class="na">placeholder=</span><span class="s">"enter phone"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>

            <span class="c">&lt;!-- *********************************************** TRIBUTE - SECTION END *********************************************** --&gt;</span>
            <span class="c">&lt;!-- *********************************************** ATTRIBUTE INFORMATION - SECTION START *********************************************** --&gt;</span>

            <span class="nt">&lt;fieldset</span> <span class="na">class=</span><span class="s">"attributeInformation"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-12"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"btn form-control"</span> <span class="na">style=</span><span class="s">"background-color: #339;color:#fff;"</span><span class="nt">&gt;</span>Attributes<span class="nt">&lt;/span&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"includeAttribute1"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"includeAttribute1"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                Include attribute 1:
                            <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"attribute1"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"attribute1ID"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Attribute ID:
                                <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"attribute1ID"</span> <span class="na">placeholder=</span><span class="s">"enter attribute GUID"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"attribute1Value"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Value:
                                <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"attribute1Value"</span> <span class="na">placeholder=</span><span class="s">"enter value"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">id=</span><span class="s">"includeAttribute2"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"includeAttribute2"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                Include attribute 2:
                            <span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invisible"</span> <span class="na">id=</span><span class="s">"attribute2"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"attribute2ID"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Attribute ID:
                                <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"attribute2ID"</span> <span class="na">placeholder=</span><span class="s">"enter attribute GUID"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"attribute2Value"</span> <span class="na">class=</span><span class="s">"col-form-label"</span><span class="nt">&gt;</span>
                                    Value:
                                <span class="nt">&lt;/label&gt;</span>
                                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"attribute2Value"</span> <span class="na">placeholder=</span><span class="s">"enter value"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;/div&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/fieldset&gt;</span>

            <span class="c">&lt;!-- *********************************************** ATTRIBUTE INFORMATION - SECTION END *********************************************** --&gt;</span>
            <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
            <span class="c">&lt;!-- This is the final 'Donate' button, when Donor fill the all required field of page after that press this button for Submit Donation. --&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"donate"</span> <span class="na">class=</span><span class="s">"submit btn btn-success form-control"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">value=</span><span class="s">"Donate"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"btn btn-danger form-control"</span> <span class="na">type=</span><span class="s">"reset"</span> <span class="na">value=</span><span class="s">"Reset"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>

        <span class="nt">&lt;/div&gt;</span>

        <span class="c">&lt;!-- Its a compulsory div, it display the Confirmation screen with Donor details after successful donation. --&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"confirmation container"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-complete-payment2-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
	  
	  <span class="cm">/*------------------------------------------- VARIABLE DECLARATION - SECTION START -------------------------------------------*/</span>

      <span class="kd">var</span> <span class="nx">blocked</span><span class="p">,</span>
      <span class="nx">donationService</span><span class="p">,</span>
      <span class="nx">part</span><span class="p">,</span>
      <span class="nx">partInstanceId</span><span class="p">,</span>
      <span class="nx">addressLinesCaption</span><span class="p">,</span>
      <span class="nx">cityCaption</span><span class="p">,</span>
      <span class="nx">stateCaption</span><span class="p">,</span>
      <span class="nx">postCodeCaption</span><span class="p">,</span>
      <span class="nx">installmentAmt</span><span class="p">;</span>

      <span class="cm">/*------------------------------------------- VARIABLE DECLARATION - SECTION END -------------------------------------------*/</span>


      <span class="cm">/*------------------------------------------- JAVASCRIPT - VALIDATION FUNCTIONS - SECTION START -------------------------------------------*/</span>

      <span class="kd">function</span> <span class="nx">validateEmail</span><span class="p">(</span><span class="nx">email</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">re</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">(([^</span><span class="sr">&lt;&gt;()[</span><span class="se">\]\\</span><span class="sr">.,;:</span><span class="se">\s</span><span class="sr">@</span><span class="se">\"]</span><span class="sr">+</span><span class="se">(\.[^</span><span class="sr">&lt;&gt;()[</span><span class="se">\]\\</span><span class="sr">.,;:</span><span class="se">\s</span><span class="sr">@</span><span class="se">\"]</span><span class="sr">+</span><span class="se">)</span><span class="sr">*</span><span class="se">)</span><span class="sr">|</span><span class="se">(\"</span><span class="sr">.+</span><span class="se">\"))</span><span class="sr">@</span><span class="se">((\[[</span><span class="sr">0-9</span><span class="se">]{1,3}\.[</span><span class="sr">0-9</span><span class="se">]{1,3}\.[</span><span class="sr">0-9</span><span class="se">]{1,3}\.[</span><span class="sr">0-9</span><span class="se">]{1,3}\])</span><span class="sr">|</span><span class="se">(([</span><span class="sr">a-zA-Z</span><span class="se">\-</span><span class="sr">0-9</span><span class="se">]</span><span class="sr">+</span><span class="se">\.)</span><span class="sr">+</span><span class="se">[</span><span class="sr">a-zA-Z</span><span class="se">]{2,}))</span><span class="sr">$/</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">re</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">validatePhone</span><span class="p">(</span><span class="nx">phone</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">phone</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">re</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">[</span><span class="sr">0-9 </span><span class="se">\+\)\(\-]{6,20}\s?((([</span><span class="sr">xX</span><span class="se">]</span><span class="sr">|</span><span class="se">[</span><span class="sr">eE</span><span class="se">][</span><span class="sr">xX</span><span class="se">][</span><span class="sr">tT</span><span class="se">])\.?\s</span><span class="sr">*</span><span class="se">(\d</span><span class="sr">+</span><span class="se">))</span><span class="sr">*</span><span class="se">)</span><span class="sr">$/</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">re</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">phone</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">validateStartDate</span><span class="p">(</span><span class="nx">startDate</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">startDate</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">pattern</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">([</span><span class="sr">0-9</span><span class="se">]{2})\/([</span><span class="sr">0-9</span><span class="se">]{2})\/([</span><span class="sr">0-9</span><span class="se">]{4})</span><span class="sr">$/</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">pattern</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">startDate</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="p">}</span>

      <span class="c1">// this function validate all required fields of donation page</span>
      <span class="kd">function</span> <span class="nx">validateFormClientSide</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">$</span><span class="p">(</span><span class="s2">".validation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">errs</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
      <span class="c1">//Amount</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">getDonationAmount</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Gift amount is not valid.&lt;br /&gt;"</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="c1">//Last Name</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#lastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
      <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Last name is required.&lt;br /&gt;"</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="c1">//Email Address</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">validateEmail</span><span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#emailAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">()))</span> <span class="p">{</span>
      <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Email is not valid.&lt;br /&gt;"</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="c1">//Street Address</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#streetAddress"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
      <span class="nx">errs</span> <span class="o">+=</span> <span class="nx">addressLinesCaption</span> <span class="o">+</span> <span class="s2">" is required.&lt;br /&gt;"</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="c1">//City</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#city"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
      <span class="nx">errs</span> <span class="o">+=</span> <span class="nx">cityCaption</span> <span class="o">+</span> <span class="s2">" is required.&lt;br /&gt;"</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="c1">//Postal Code</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#postalCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
      <span class="nx">errs</span> <span class="o">+=</span> <span class="nx">postCodeCaption</span> <span class="o">+</span> <span class="s2">" is required.&lt;br /&gt;"</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="c1">//Phone</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">validatePhone</span><span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#phone"</span><span class="p">).</span><span class="nx">val</span><span class="p">()))</span> <span class="p">{</span>
      <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Phone is not valid.&lt;br /&gt;"</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="c1">// Organization name</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isCorporate"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#organizationName"</span><span class="p">).</span><span class="nx">val</span><span class="p">())</span> <span class="p">{</span>
      <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Company name is required if this donation is on behalf of a company"</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="c1">// No Of Installation</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#number-of-installments"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">errs</span> <span class="o">+=</span> <span class="s2">"Number Of installments should be greater than 1 in case of recurring gift."</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">errs</span> <span class="o">===</span> <span class="s2">""</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">errs</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".validation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="cm">/*************************************** CONSENT VALIDATION FUNCTIONS - SECTION START ***************************************/</span>

      <span class="kd">function</span> <span class="nx">consentValidation</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">".consentValidation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">errs</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
      <span class="c1">// Consent info</span>
      <span class="kd">var</span> <span class="nx">solicitCodeCount</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">).</span><span class="nx">length</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">solicitCodeCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">solicitCodeCount</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"isrequired"</span><span class="p">)</span> <span class="o">==</span> <span class="s2">"true"</span> <span class="o">&amp;&amp;</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">find</span><span class="p">(</span><span class="s1">':checked'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">errs</span> <span class="o">+=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">find</span><span class="p">(</span><span class="s2">"label"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerHTML</span> <span class="o">+</span> <span class="s2">" is required.&lt;br /&gt;"</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">errs</span> <span class="o">===</span> <span class="s2">""</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">setConsentValidationMessage</span><span class="p">(</span><span class="nx">errs</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">setConsentValidationMessage</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">".consentValidation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="cm">/*************************************** CONSENT VALIDATION FUNCTIONS - SECTION END ***************************************/</span>

      <span class="cm">/*------------------------------------------- JAVASCRIPT - VALIDATION FUNCTIONS - SECTION END -------------------------------------------*/</span>

      <span class="cm">/*------------------------------------------- JAVASCRIPT FUNCTIONS - SECTION START -------------------------------------------*/</span>

      <span class="kd">function</span> <span class="nx">convertErrorToString</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">Message</span><span class="p">)</span> <span class="k">return</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Message</span><span class="p">;</span>
      <span class="k">switch</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">ErrorCode</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="mi">101</span><span class="p">:</span>
      <span class="k">return</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Field</span> <span class="o">+</span> <span class="s2">" is required."</span><span class="p">;</span>
      <span class="k">case</span> <span class="mi">105</span><span class="p">:</span>
      <span class="k">return</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Field</span> <span class="o">+</span> <span class="s2">" is not valid."</span><span class="p">;</span>
      <span class="k">case</span> <span class="mi">106</span><span class="p">:</span>
      <span class="k">return</span> <span class="s2">"Record for "</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Field</span> <span class="o">+</span> <span class="s2">" was not found."</span><span class="p">;</span>
      <span class="k">case</span> <span class="mi">203</span><span class="p">:</span>
      <span class="k">return</span> <span class="s2">"Donation not completed on BBSP."</span><span class="p">;</span>
      <span class="k">case</span> <span class="mi">107</span><span class="p">:</span>
      <span class="k">return</span> <span class="s2">"Max length for "</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">Field</span> <span class="o">+</span> <span class="s2">" exceeded."</span><span class="p">;</span>
      <span class="nl">default</span><span class="p">:</span>
      <span class="k">return</span> <span class="s2">"Error code "</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">ErrorCode</span> <span class="o">+</span> <span class="s2">"."</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">errors</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">message</span> <span class="o">=</span> <span class="s2">"Unknown error.&lt;br /&gt;"</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">errors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">message</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">errors</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">message</span> <span class="o">=</span> <span class="nx">message</span> <span class="o">+</span> <span class="nx">convertErrorToString</span><span class="p">(</span><span class="nx">errors</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">+</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">message</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="c1">// Extract the data entered by the user and fill the result object for transaction processing.</span>
      <span class="kd">function</span> <span class="nx">extractDataFromForm</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">paymentMethod</span><span class="p">,</span>
      <span class="nx">result</span><span class="p">,</span>
      <span class="nx">organizationName</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span>
      <span class="nx">consentOptions</span><span class="p">,</span>
      <span class="nx">solicitCodeCount</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isCorporate"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">organizationName</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#organizationName"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="nx">paymentMethod</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[name='paymentMethod']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="p">{};</span>

      <span class="c1">// Consent Information</span>
      <span class="nx">consentOptions</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">solicitCodeCount</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">solicitCodeCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">solicitCodeCount</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">consentOptions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
      <span class="na">SolicitCodeID</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">id</span><span class="p">,</span>
      <span class="na">IsRequired</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">isrequired</span><span class="p">,</span>
      <span class="na">ConsentPreferenceCode</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">)[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">find</span><span class="p">(</span><span class="s1">':checked'</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">});</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">ContactConsents</span> <span class="o">=</span> <span class="p">{</span> <span class="na">ConsentPartId</span><span class="p">:</span> <span class="nx">consentPartId</span><span class="p">,</span> <span class="na">SolicitCodes</span><span class="p">:</span> <span class="nx">consentOptions</span> <span class="p">};</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span> <span class="o">=</span> <span class="p">{</span>      
      <span class="na">PaymentMethod</span><span class="p">:</span> <span class="nx">paymentMethod</span><span class="p">,</span>
      <span class="na">Designations</span><span class="p">:</span> <span class="p">[{</span>
      <span class="na">Amount</span><span class="p">:</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">?</span> <span class="nx">installmentAmt</span> <span class="p">:</span> <span class="nx">getDonationAmount</span><span class="p">(),</span>
      <span class="na">DesignationId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#designation"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">}],</span>
      <span class="na">FinderNumber</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#finderNumber"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>      
      <span class="na">Comments</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#comments"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">CreateGiftAidDeclaration</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#createGiftAidDeclaration"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">),</span>
      <span class="na">IsAnonymous</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isAnonymous"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">),</span>
      <span class="na">IsCorporate</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isCorporate"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span>
      <span class="p">};</span>
      <span class="c1">// Recurring Gift Information</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">DayOfMonth</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#day-of-month'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">Month</span><span class="p">:</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"2"</span> <span class="o">||</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">==</span> <span class="s2">"3"</span><span class="p">)</span> <span class="p">?</span> <span class="s2">""</span> <span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#month'</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">Frequency</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">StartDate</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#start-date"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">EndDate</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#end-date"</span><span class="p">).</span><span class="nx">text</span><span class="p">(),</span>
      <span class="na">DayOfWeek</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#day-of-week"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">};</span>
      <span class="p">}</span>
      <span class="c1">// Tribute Information</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeTribue"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">kind</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[name='radioTribute']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">kind</span> <span class="o">===</span> <span class="s2">"1"</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Tribute</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">TributeId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeID"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">};</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Tribute</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">TributeDefinition</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">Name</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeFirstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeLastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">FirstName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeFirstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">LastName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeLastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">Type</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeType"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">Description</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tributeDescription"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">}</span>
      <span class="p">};</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAcknowledgee"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Tribute</span><span class="p">.</span><span class="nx">Acknowledgee</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">FirstName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeFirstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">LastName</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeLastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">Country</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeCountry"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">AddressLines</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeAddressLines"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">City</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeCity"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">State</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeState"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">PostalCode</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeePostalCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">Phone</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeePhone"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">Email</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgeeEmail"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">};</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="c1">// Attribute Information</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute1"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">)</span> <span class="o">||</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute2"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Attributes</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute1"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Attributes</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">AttributeId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute1ID"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">Value</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute1Value"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">};</span>
      <span class="nx">index</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute2"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Attributes</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">AttributeId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute2ID"</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="na">Value</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute2Value"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">};</span>
      <span class="nx">index</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="p">}</span>

      <span class="nx">result</span><span class="p">.</span><span class="nx">Origin</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">PageId</span><span class="p">:</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">pageInformation</span><span class="p">.</span><span class="nx">pageId</span><span class="p">,</span>
      <span class="na">AppealId</span><span class="p">:</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#appealId"</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">};</span>

      <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="c1">// this function submit Donation using CreateDonation() of donationService</span>
      <span class="kd">function</span> <span class="nx">submitDonationToServer</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// For Pledge, go ahead and show the confirmation.  For credit card, you will be redirected to BBSP already.</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">Donation</span><span class="p">.</span><span class="nx">TransactionStatus</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".form"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="nx">getConfirmationHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">Donation</span><span class="p">.</span><span class="nx">Id</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="p">};</span>

      <span class="nx">onFail</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">));</span>

      <span class="p">};</span>

      <span class="nx">donationService</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFail</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">// Success Callback from Secure Payment Page</span>
      <span class="kd">function</span> <span class="nx">completeBBSPPayment</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="s1">'&lt;%Session["'</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Id</span> <span class="o">+</span> <span class="s1">'"] = "'</span> <span class="o">+</span> <span class="kc">true</span> <span class="o">+</span> <span class="s1">'"; %&gt;'</span><span class="p">;</span>
      <span class="nx">getConfirmationHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">Id</span><span class="p">);</span>
      <span class="p">};</span>
      <span class="nx">onFail</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">));</span>
      <span class="p">};</span>
      <span class="nx">donationService</span><span class="p">.</span><span class="nx">completeBBSPDonation</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFail</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">// Display the Final Confirmation screen after Successful Doantion</span>
      <span class="kd">function</span> <span class="nx">getConfirmationHtml</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">onSuccess</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
      <span class="p">};</span>
      <span class="nx">onFail</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setValidationMessage</span><span class="p">(</span><span class="nx">convertErrorsToHtml</span><span class="p">(</span><span class="nx">d</span><span class="p">));</span>
      <span class="p">};</span>
      <span class="nx">donationService</span><span class="p">.</span><span class="nx">getDonationConfirmationHtml</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onFail</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">// bind the Designation</span>
      <span class="kd">function</span> <span class="nx">bindDesignationDropdown</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">queryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">QueryService</span><span class="p">();</span>
      <span class="nx">statusFilter</span> <span class="o">=</span> <span class="p">{</span> <span class="na">columnName</span><span class="p">:</span> <span class="s1">'Is active'</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="s1">'True'</span> <span class="p">};</span>
      <span class="nx">queryService</span><span class="p">.</span><span class="nx">getResults</span><span class="p">(</span><span class="nx">designationQueryId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Rows</span><span class="p">;</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">rows</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="s1">'Values'</span><span class="p">];</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#designation"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]));</span>
      <span class="p">});</span>
      <span class="p">},</span> <span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="nx">statusFilter</span><span class="p">]);</span>
      <span class="p">}</span>

      <span class="c1">// populate the Title Dropdown with available list of Title</span>
      <span class="kd">function</span> <span class="nx">bindTitleDropdown</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">codeTableService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CodeTableService</span><span class="p">();</span>
      <span class="nx">codeTableService</span><span class="p">.</span><span class="nx">getTitles</span><span class="p">(</span><span class="s1">'456FFD4C-0FBF-49DB-A503-0726F86E2A39'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#title"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]));</span>
      <span class="p">});</span>
      <span class="p">});</span>
      <span class="p">}</span>

      <span class="c1">// bind the Linked user Details to the HTML Controls of Page, when we logged in with Linked User</span>
      <span class="kd">function</span> <span class="nx">bindUserData</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">userService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">UserService</span><span class="p">();</span>
      <span class="nx">userService</span><span class="p">.</span><span class="nx">getProfile</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#firstName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"FirstName"</span><span class="p">]);</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#lastName"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"LastName"</span><span class="p">]);</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#phone"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"Phone"</span><span class="p">]);</span>

      <span class="p">});</span>
      <span class="p">}</span>

      <span class="c1">// change the Address related Label of Page, when change the Country from Country dropdown</span>
      <span class="kd">function</span> <span class="nx">updateAddressLabels</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">countryId</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">":selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">);</span>
      <span class="nx">countryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
      <span class="nx">countryService</span><span class="p">.</span><span class="nx">getAddressCaptions</span><span class="p">(</span><span class="nx">countryId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!!</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">addressLinesCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"AddressLines"</span><span class="p">];</span>
      <span class="nx">cityCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"City"</span><span class="p">];</span>
      <span class="nx">stateCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"State"</span><span class="p">];</span>
      <span class="nx">postCodeCaption</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"PostCode"</span><span class="p">];</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
      <span class="nx">addressLinesCaption</span> <span class="o">=</span> <span class="s2">"Address lines"</span><span class="p">;</span>
      <span class="nx">cityCaption</span> <span class="o">=</span> <span class="s2">"City"</span><span class="p">;</span>
      <span class="nx">stateCaption</span> <span class="o">=</span> <span class="s2">"State/Providence"</span><span class="p">;</span>
      <span class="nx">postCodeCaption</span> <span class="o">=</span> <span class="s2">"Zip/Postal code"</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#streetAddressLabel"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">addressLinesCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#cityLabel"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">cityCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#stateLabel"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">stateCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#postalCodeLabel"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">postCodeCaption</span> <span class="o">+</span> <span class="s2">":"</span><span class="p">);</span>
      <span class="p">},</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

      <span class="p">});</span>
      <span class="p">}</span>


      <span class="cm">/*************************************** RECURRENCE FUNCTIONS - SECTION START ***************************************/</span>

      <span class="kd">function</span> <span class="nx">showHideRecurrenceDiv</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divRecurringGift"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divRecurringGift"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">updateEverythingPossible</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">donationAmount</span> <span class="o">=</span> <span class="nx">getDonationAmount</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">numberOfInstallments</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#number-of-installments"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">installmentAmount</span> <span class="o">=</span> <span class="nx">donationService</span><span class="p">.</span><span class="nx">getRecurringGiftInstallmentAmount</span><span class="p">(</span><span class="nx">donationAmount</span><span class="p">,</span> <span class="nx">numberOfInstallments</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">startDate</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#start-date"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">frequency</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">dayOfMonth</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#day-of-month'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">dayOfWeek</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#day-of-week"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">month</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">'#month'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">numberOfInstallments</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setValidationMessage</span><span class="p">(</span><span class="s2">"Number Of installments should be greater than 1 in case of recurring gift."</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
      <span class="nx">setValidationMessage</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span><span class="c1">//Weekly</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">||</span> <span class="nx">frequency</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span><span class="c1">//Monthly| Quarterly</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span><span class="c1">// Annually</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"inline"</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span>    <span class="c1">//Every4Weeks</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfWeek"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#divDayOfMonth"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#annual-options"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">validateStartDate</span><span class="p">(</span><span class="nx">startDate</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">frequency</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">StartDate1</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">startDate</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">dayOfStartDate</span> <span class="o">=</span> <span class="nx">StartDate1</span><span class="p">.</span><span class="nx">getDay</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">dayOfStartDate</span> <span class="o">!=</span> <span class="nx">dayOfWeek</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">startDateCopy</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">StartDate1</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">firstDayOfCurrentWeek</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">startDate</span><span class="p">);</span>
      <span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">setHours</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="c1">// if start date's day of week is not monday then calculate the first day(i.e. monday) of the week of start date</span>
      <span class="c1">//{0-Sunday,1-Monday,2-Tuesday,3-Wednesday,4-Thursday,5-Friday,6-Saturday}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">dayOfStartDate</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">StartDate1</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">-</span> <span class="nx">dayOfStartDate</span> <span class="o">+</span> <span class="p">(</span><span class="nx">dayOfStartDate</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">?</span> <span class="o">-</span><span class="mi">6</span> <span class="p">:</span> <span class="mi">1</span><span class="p">));</span>
      <span class="p">}</span>
      <span class="c1">// if the installment's day of week is not same as start date's day of week , then adjust the start date.</span>
      <span class="k">while</span> <span class="p">(</span><span class="nx">firstDayOfCurrentWeek</span> <span class="o">&lt;</span> <span class="nx">startDateCopy</span> <span class="o">||</span>
      <span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()</span> <span class="o">!=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">dayOfWeek</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">firstDayOfCurrentWeek</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="c1">// set the start date's to the expected day of week</span>
      <span class="nx">StartDate1</span> <span class="o">=</span> <span class="nx">firstDayOfCurrentWeek</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">endDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">StartDate1</span><span class="p">);</span>
      <span class="nx">endDate</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">StartDate1</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="mi">7</span> <span class="o">*</span> <span class="p">(</span><span class="nx">numberOfInstallments</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)));</span>
      <span class="kd">var</span> <span class="nx">endDateFormatted</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">endDate</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">monthNames</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"January"</span><span class="p">,</span> <span class="s2">"February"</span><span class="p">,</span> <span class="s2">"March"</span><span class="p">,</span> <span class="s2">"April"</span><span class="p">,</span> <span class="s2">"May"</span><span class="p">,</span> <span class="s2">"June"</span><span class="p">,</span> <span class="s2">"July"</span><span class="p">,</span> <span class="s2">"August"</span><span class="p">,</span> <span class="s2">"September"</span><span class="p">,</span> <span class="s2">"October"</span><span class="p">,</span> <span class="s2">"November"</span><span class="p">,</span> <span class="s2">"December"</span><span class="p">];</span>
      <span class="nx">endDateFormatted</span> <span class="o">=</span> <span class="nx">monthNames</span><span class="p">[</span><span class="nx">endDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">endDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="s2">", "</span> <span class="o">+</span> <span class="nx">endDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">endDate</span> <span class="o">=</span> <span class="nx">donationService</span><span class="p">.</span><span class="nx">getRecurringGiftLastPaymentDate</span><span class="p">(</span><span class="nx">numberOfInstallments</span><span class="p">,</span> <span class="nx">frequency</span><span class="p">,</span> <span class="nx">startDate</span><span class="p">,</span> <span class="nx">month</span><span class="p">,</span> <span class="nx">dayOfMonth</span><span class="p">,</span> <span class="nx">dayOfWeek</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">endDateFormatted</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">endDate</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">monthNames</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"January"</span><span class="p">,</span> <span class="s2">"February"</span><span class="p">,</span> <span class="s2">"March"</span><span class="p">,</span> <span class="s2">"April"</span><span class="p">,</span> <span class="s2">"May"</span><span class="p">,</span> <span class="s2">"June"</span><span class="p">,</span> <span class="s2">"July"</span><span class="p">,</span> <span class="s2">"August"</span><span class="p">,</span> <span class="s2">"September"</span><span class="p">,</span> <span class="s2">"October"</span><span class="p">,</span> <span class="s2">"November"</span><span class="p">,</span> <span class="s2">"December"</span><span class="p">];</span>
      <span class="nx">endDateFormatted</span> <span class="o">=</span> <span class="nx">monthNames</span><span class="p">[</span><span class="nx">endDate</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()]</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">endDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="s2">", "</span> <span class="o">+</span> <span class="nx">endDate</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#installment-amount"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">"$"</span> <span class="o">+</span> <span class="nx">installmentAmount</span><span class="p">);</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#end-date"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">endDateFormatted</span><span class="p">);</span>
      <span class="nx">installmentAmt</span> <span class="o">=</span> <span class="nx">installmentAmount</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="p">}</span>

      <span class="cm">/*************************************** RECURRENCE FUNCTIONS - SECTION END ***************************************/</span>

      <span class="cm">/*************************************** CONSENT FUNCTIONS - SECTION START ***************************************/</span>

      <span class="kd">function</span> <span class="nx">bindConsentOption</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">consentOptionService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">ConsentOptionService</span><span class="p">();</span>
      <span class="nx">consentOptionService</span><span class="p">.</span><span class="nx">getConsentOptions</span><span class="p">(</span><span class="nx">consentPartId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">cnstType</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">SolicitCodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span> <span class="p">}</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentTitle"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">"&lt;b&gt;&lt;/b&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"Title"</span><span class="p">]);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMSolicitCode"</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#hdnCRMSolicitCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMSolicitCode"</span><span class="p">]);</span> <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMConsentSolicitCode"</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#hdnCRMConsentSolicitCode"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"hdnCRMConsentSolicitCode"</span><span class="p">]);</span> <span class="p">}</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentStatement"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"ConsentStatement"</span><span class="p">]);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="s2">"PrivacyPolicy"</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#privacylink"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"onclick"</span><span class="p">,</span> <span class="s2">"javascript:window.open('"</span> <span class="o">+</span> <span class="nx">d</span><span class="p">[</span><span class="s2">"PrivacyPolicy"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"', '_blank' ,height=600, width=800, resizable='yes', scrollbars='yes' )"</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#privacylink"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"none"</span><span class="p">);</span> <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">SolicitCodes</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;tr&gt;&lt;/tr&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">])</span>
      <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td colspan='3' style='width:100%;text-align:left; font-weight:bold;'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]))</span>
      <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[id="</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"background-color"</span><span class="p">,</span> <span class="s2">"#efefef"</span><span class="p">);</span> <span class="p">}</span>
      <span class="nx">count</span> <span class="o">=</span> <span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;tr&gt;&lt;/tr&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
      <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td style='width:35%'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
      <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
      <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"1"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)))</span>
      <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[id="</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"background-color"</span><span class="p">,</span> <span class="s2">"#efefef"</span><span class="p">);</span> <span class="p">}</span>
      <span class="nx">count</span> <span class="o">=</span> <span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;tr&gt;&lt;/tr&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
      <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td style='width:35%'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
      <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
      <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"radio"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"1"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)))</span>
      <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[id="</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"background-color"</span><span class="p">,</span> <span class="s2">"#efefef"</span><span class="p">);</span> <span class="p">}</span>
      <span class="nx">count</span> <span class="o">=</span> <span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"ConsentCode"</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;tr&gt;&lt;/tr&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"IsRequired"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"IsRequired"</span><span class="p">])</span>
      <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td style='width:35%'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;label&gt;&lt;/label&gt;"</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">])))</span>
      <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;td colspan='2'&gt;&lt;/td&gt;"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;input&gt;"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"type"</span><span class="p">,</span> <span class="s2">"checkbox"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"radio"</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Caption"</span><span class="p">]).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"ConsentPreferenceCode"</span><span class="p">]</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)))</span>
      <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[id="</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="s2">"SolicitCodeID"</span><span class="p">]</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"background-color"</span><span class="p">,</span> <span class="s2">"#efefef"</span><span class="p">);</span> <span class="p">}</span>
      <span class="nx">count</span> <span class="o">=</span> <span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="p">});</span>

      <span class="p">});</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">cnstType</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span> <span class="s2">"display"</span><span class="p">:</span> <span class="s2">"none"</span><span class="p">,</span> <span class="s2">"align"</span><span class="p">:</span> <span class="s2">"center"</span> <span class="p">});</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"width"</span><span class="p">,</span> <span class="s2">"30%"</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentTitle"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"class"</span><span class="p">,</span> <span class="s2">"BBListingHeading DonationListingHeading"</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"cnstFilled"</span><span class="p">,</span> <span class="s2">"0"</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">//this function open overlay Consent dialog on screen</span>
      <span class="kd">function</span> <span class="nx">openDialog</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption tr[isRequired]"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">"td:first"</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">rows</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">rows</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="s2">"60%"</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">dialog</span><span class="p">({</span>
      <span class="na">dialogClass</span><span class="p">:</span> <span class="s2">"no-close"</span><span class="p">,</span>
      <span class="na">modal</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="na">autoOpen</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="na">maxHeight</span><span class="p">:</span> <span class="mi">393</span><span class="p">,</span>
      <span class="na">maxWidth</span><span class="p">:</span> <span class="mi">474</span>
      <span class="p">});</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">dialog</span><span class="p">(</span><span class="s1">'open'</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span> <span class="s2">"position"</span><span class="p">:</span> <span class="s2">"fixed"</span><span class="p">,</span> <span class="s2">"top"</span><span class="p">:</span> <span class="s2">"25%"</span><span class="p">,</span> <span class="s2">"background-color"</span><span class="p">:</span> <span class="s2">"white"</span><span class="p">,</span> <span class="s2">"overflow"</span><span class="p">:</span> <span class="s2">"auto"</span><span class="p">,</span> <span class="s2">"max-height"</span><span class="p">:</span> <span class="s2">"393px"</span><span class="p">,</span> <span class="s2">"max-width"</span><span class="p">:</span> <span class="s2">"473px"</span><span class="p">,</span> <span class="s2">"z-index"</span><span class="p">:</span> <span class="s2">"101"</span> <span class="p">});</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'.ui-widget-overlay'</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span> <span class="s2">"position"</span><span class="p">:</span> <span class="s2">"fixed"</span><span class="p">,</span> <span class="s2">"width"</span><span class="p">:</span> <span class="s2">"100%"</span><span class="p">,</span> <span class="s2">"height"</span><span class="p">:</span> <span class="s2">"100%"</span><span class="p">,</span> <span class="s2">"background-color"</span><span class="p">:</span> <span class="s2">"gray"</span><span class="p">,</span> <span class="s2">"opacity"</span><span class="p">:</span> <span class="s2">"0.6"</span><span class="p">,</span> <span class="s2">"top"</span><span class="p">:</span> <span class="s2">"0%"</span><span class="p">,</span> <span class="s2">"left"</span><span class="p">:</span> <span class="s2">"0%"</span> <span class="p">});</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"width"</span><span class="p">,</span> <span class="s2">"100%"</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#consentOption th"</span><span class="p">).</span><span class="nx">attr</span><span class="p">({</span> <span class="s2">"border"</span><span class="p">:</span> <span class="s2">"1px solid black"</span><span class="p">,</span> <span class="s2">"border-color"</span><span class="p">:</span> <span class="s2">"#efefef"</span> <span class="p">})</span>
      <span class="p">});</span>
      <span class="p">}</span>

      <span class="cm">/*************************************** CONSENT FUNCTIONS - SECTION END ***************************************/</span>

      <span class="cm">/*************************************** COUNTRY/STATE FUNCTIONS - SECTION START ***************************************/</span>

      <span class="c1">// bind the List of Country to Donor Country &amp; Tribute Acknowledgee Country Dropdown</span>
      <span class="kd">function</span> <span class="nx">bindCountryDropdown</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">countryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
      <span class="nx">countryService</span><span class="p">.</span><span class="nx">getCountries</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="s2">"Id"</span><span class="p">]));</span>
      <span class="p">});</span>

      <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">"option[value='USA']"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"selected"</span><span class="p">,</span> <span class="s2">"selected"</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="nx">bindStateDropdown</span><span class="p">);</span>
      <span class="nx">bindStateDropdown</span><span class="p">();</span>
      <span class="p">});</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">bindStateDropdown</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">$</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">empty</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">countryId</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#country"</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">":selected"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"id"</span><span class="p">);</span>
      <span class="nx">countryService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">CountryService</span><span class="p">();</span>
      <span class="nx">countryService</span><span class="p">.</span><span class="nx">getStates</span><span class="p">(</span><span class="nx">countryId</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#state"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"&lt;option&gt;&lt;/option&gt;"</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Abbreviation"</span><span class="p">]).</span><span class="nx">text</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="s2">"Description"</span><span class="p">]));</span>
      <span class="p">});</span>
      <span class="nx">updateAddressLabels</span><span class="p">();</span>
      <span class="p">});</span>
      <span class="p">}</span>

      <span class="cm">/*************************************** COUNTRY/STATE FUNCTIONS - SECTION END ***************************************/</span>

      <span class="c1">// return the donation amount</span>
      <span class="kd">function</span> <span class="nx">getDonationAmount</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#amtOther"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtAmount"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[name='radioAmount']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="p">}</span>

      <span class="c1">// call submitDonationToServer(data) for further Donation Procesing</span>
      <span class="kd">function</span> <span class="nx">sendData</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">data</span><span class="p">;</span>
      <span class="nx">setValidationMessage</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="nx">extractDataFromForm</span><span class="p">();</span>
      <span class="nx">submitDonationToServer</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">// call when we click on "Donate" button</span>
      <span class="kd">function</span> <span class="nx">onSubmitClick</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">validateFormClientSide</span><span class="p">())</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"table[id='consentOption'] tr[isRequired]"</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">cnstType</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#overlay"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span>
      <span class="nx">openDialog</span><span class="p">();</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal button"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal button"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">consentValidation</span><span class="p">())</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#myModal"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"cnstFilled"</span><span class="p">,</span> <span class="s2">"1"</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">'#myModal'</span><span class="p">).</span><span class="nx">dialog</span><span class="p">(</span><span class="s1">'close'</span><span class="p">);</span>
      <span class="nx">sendData</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="p">});</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="s2">"#inline"</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"display"</span><span class="p">,</span> <span class="s2">"block"</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">validateFormClientSide</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">consentValidation</span><span class="p">())</span> <span class="p">{</span>
      <span class="nx">sendData</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
      <span class="nx">sendData</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="p">}</span>

      <span class="cm">/*************************************** PROCESSING PAYMENT FUNCTIONS - SECTION END ***************************************/</span>

      <span class="cm">/*------------------------------------------- JAVASCRIPT FUNCTIONS - SECTION END -------------------------------------------*/</span>

      <span class="c1">// this function set-up/bind all required controls of Donation Form on Page Load</span>
      <span class="kd">function</span> <span class="nx">setupForm</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">bindDesignationDropdown</span><span class="p">();</span>
      <span class="nx">bindCountryDropdown</span><span class="p">();</span>
      <span class="nx">bindTitleDropdown</span><span class="p">();</span>
      <span class="c1">//bindUserData();</span>
      <span class="nx">bindConsentOption</span><span class="p">();</span>

      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".submit"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">onSubmitClick</span><span class="p">();</span>
      <span class="p">});</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#txtAmount"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#amtOther"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">,</span> <span class="s2">"checked"</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="s2">"checked"</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">updateEverythingPossible</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="p">});</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#isCorporate"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#organizationNameDiv"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
      <span class="p">});</span>

      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeTribue"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#tribute"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
      <span class="p">});</span>

      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAcknowledgee"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#acknowledgee"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
      <span class="p">});</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#number-of-installments"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#start-date"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#frequency"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#day-of-month"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#month"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#day-of-week"</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">updateEverythingPossible</span><span class="p">();</span> <span class="p">});</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recMonthly"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">showHideRecurrenceDiv</span><span class="p">();</span> <span class="p">});</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#recOneTime"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">showHideRecurrenceDiv</span><span class="p">();</span> <span class="p">});</span>

      <span class="kd">function</span> <span class="nx">tributeKindChange</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">kind</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[name='radioTribute']:checked"</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">kind</span> <span class="o">===</span> <span class="s2">"1"</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#specificTribute"</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#generalTribute"</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#generalTribute"</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#specificTribute"</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#kindGeneral"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">tributeKindChange</span><span class="p">);</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#kindSpecific"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="nx">tributeKindChange</span><span class="p">);</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute1"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute1"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
      <span class="p">});</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#includeAttribute2"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"#attribute2"</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"invisible"</span><span class="p">);</span>
      <span class="p">});</span>
      <span class="c1">//Make sure this default HTML is configured for use:</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">designationQueryId</span> <span class="o">===</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span> <span class="o">||</span> <span class="nx">merchantAccountId</span> <span class="o">===</span> <span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setValidationMessage</span><span class="p">(</span><span class="s2">"DesignationQueryId and MerchantAccountId must be configured before this form can be used."</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="p">}</span>

      <span class="cm">/*------------------------------------------- PAGE LOAD METHOD - START -------------------------------------------*/</span>

      <span class="kd">function</span> <span class="nx">PageLoad</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">//Wait until the blockUI script is loaded before we start loading the page.</span>
      <span class="kd">var</span> <span class="nx">t</span><span class="p">;</span>
      <span class="nx">blocked</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">part</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">".donationForm"</span><span class="p">);</span>
      <span class="nx">partInstanceId</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s2">".BBDonationApiContainer"</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"data-partid"</span><span class="p">);</span>
      <span class="nx">donationService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span><span class="nx">partInstanceId</span><span class="p">);</span>

      <span class="nx">t</span> <span class="o">=</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">querystring</span><span class="p">.</span><span class="nx">getQueryStringValue</span><span class="p">(</span><span class="s2">"t"</span><span class="p">)</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".form"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="nx">completeBBSPPayment</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".form"</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="nx">part</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">".confirmation"</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="nx">setupForm</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">PageLoad</span><span class="p">();</span>

      <span class="cm">/*------------------------------------------- PAGE LOAD METHOD - END -------------------------------------------*/</span>

      <span class="p">}());</span></code></pre></div> </div> <div class="tab-pane" id="example-complete-payment2-css"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* Currently using Bootstrap styles and some default style */</span>
    <span class="nc">.no-close</span> <span class="nc">.ui-dialog-titlebar</span> <span class="p">{</span>
            <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="nf">#privacylink</span> <span class="p">{</span>
            <span class="nl">color</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>
            <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="nf">#privacylink</span><span class="nd">:hover</span> <span class="p">{</span>
		<span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="nc">.donationForm</span> <span class="nc">.validation</span> <span class="p">{</span>
            <span class="nl">color</span><span class="p">:</span> <span class="n">Red</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="nc">.consentValidation</span> <span class="p">{</span>
		<span class="nl">color</span><span class="p">:</span> <span class="n">Red</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="nc">.donationForm</span> <span class="nt">ul</span> <span class="p">{</span>
		<span class="nl">list-style-type</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="nc">.donationForm</span> <span class="nc">.DonationListingHeading</span> <span class="p">{</span>
            <span class="nl">font-size</span><span class="p">:</span> <span class="nb">large</span><span class="p">;</span>
            <span class="nl">font-weight</span><span class="p">:</span> <span class="nb">bold</span><span class="p">;</span>
    <span class="p">}</span>
	
    <span class="nc">.donationForm</span> <span class="nc">.confirmation</span> <span class="p">{</span>
            <span class="nl">min-height</span><span class="p">:</span> <span class="m">400px</span><span class="p">;</span>
    <span class="p">}</span>

	<span class="nc">.donationForm</span> <span class="nc">.invisible</span> <span class="p">{</span>
		<span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="nc">.DonationListingHeading</span> <span class="p">{</span>
            <span class="nl">height</span><span class="p">:</span> <span class="m">2.25em</span> <span class="cp">!important</span><span class="p">;</span>
    <span class="p">}</span></code></pre></div> </div> </div> <h3 id="example-complete">Styling + Error Handling + API Integration</h3> <p>This last example is meant to show a more realistic real-world example of the Advanced Donation Form API, including all the necessary error handling and styling. This example also incorporates the use of the <a href="/bbis/reference/javascript/#countryservice">CountryService</a>, which is the javascript wrapper for the <a href="/bbis/reference/rest/#countryapi">Country REST API endpoint</a>.</p> <p>Whereas all the other examples are designed to be inserted into an Advanced Donation Form Part, the complete example is designed to be completely standalone - even on a different server than the one serving your BBIS website.</p> <p>Please note you'll need to update the references in the example below to your BBIS installation.</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-complete-html" data-toggle="tab">HTML</a></li> <li><a href="#example-complete-js" data-toggle="tab">JS</a></li> <li><a href="#example-complete-css" data-toggle="tab">CSS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-complete-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span> <span class="na">ng-app=</span><span class="s">"bbADF"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
  
  <span class="nt">&lt;title&gt;</span>ADF - Complete Example<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="nt">&gt;</span>
  
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"example-complete.css"</span><span class="nt">&gt;</span>
    
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  
  <span class="nt">&lt;form</span> <span class="na">class=</span><span class="s">"form-horizontal"</span> <span class="na">ng-controller=</span><span class="s">"DonationController"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;h1&gt;</span>Advanced Donation Form <span class="nt">&lt;small&gt;</span>Complete Example<span class="nt">&lt;/small&gt;&lt;/h1&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
          
          <span class="nt">&lt;h3&gt;</span>Donor Information<span class="nt">&lt;/h3&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Donor.Firstname"</span> <span class="na">placeholder=</span><span class="s">"Firstname"</span> <span class="na">required</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Donor.Lastname"</span> <span class="na">placeholder=</span><span class="s">"Lastname"</span> <span class="na">required</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>

          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Address"</span> <span class="na">ng-model=</span><span class="s">"Donor.Address.StreetAddress"</span><span class="nt">&gt;&lt;/textarea&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Donor.Address.Country"</span> <span class="na">ng-change=</span><span class="s">"getStates()"</span> <span class="na">ng-options=</span><span class="s">"c.Description for c in countries track by c.Id"</span> <span class="na">ng-change=</span><span class="s">"getStates()"</span> <span class="na">required</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Country<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Donor.Address.State"</span> <span class="na">ng-options=</span><span class="s">"s.Description for s in states track by s.Id"</span> <span class="na">required</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>State<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>

          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-9"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"City"</span> <span class="na">ng-model=</span><span class="s">"Donor.Address.City"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-3"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Zip"</span> <span class="na">ng-model=</span><span class="s">"Donor.Address.PostalCode"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>

          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-8"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Email"</span> <span class="na">ng-model=</span><span class="s">"Donor.EmailAddress"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">placeholder=</span><span class="s">"Phone"</span> <span class="na">ng-model=</span><span class="s">"Donor.Phone"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-model=</span><span class="s">"Gift.IsCorporate"</span> <span class="na">btn-checkbox</span><span class="nt">&gt;</span>
                <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-fw"</span> <span class="na">ng-class=</span><span class="s">"{ 'fa-square-o': !Gift.IsCorporate, 'fa-check-square-o': Gift.IsCorporate }"</span><span class="nt">&gt;&lt;/i&gt;</span> Corporate?
              <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-8"</span> <span class="na">ng-show=</span><span class="s">"Gift.IsCorporate"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Donor.OrganizationName"</span> <span class="na">placeholder=</span><span class="s">"Organization Name"</span> <span class="na">required</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-model=</span><span class="s">"Gift.isAnonymous"</span> <span class="na">btn-checkbox</span><span class="nt">&gt;</span>
                <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-fw"</span> <span class="na">ng-class=</span><span class="s">"{ 'fa-square-o': !Gift.isAnonymous, 'fa-check-square-o': Gift.isAnonymous }"</span><span class="nt">&gt;&lt;/i&gt;</span> Anonymous?
              <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
        
          <span class="nt">&lt;h3&gt;</span>Gift Information<span class="nt">&lt;/h3&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"btn-group"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-repeat=</span><span class="s">"option in amounts"</span> <span class="na">ng-model=</span><span class="s">"defaults.amount"</span> <span class="na">btn-radio=</span><span class="s">"option.amount"</span> <span class="na">required</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">ng-bind=</span><span class="s">"option.label"</span><span class="nt">&gt;&lt;/span&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"btn-group"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-repeat=</span><span class="s">"option in payments"</span> <span class="na">ng-model=</span><span class="s">"defaults.payments"</span> <span class="na">btn-radio=</span><span class="s">"option.id"</span> <span class="na">required</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">ng-bind=</span><span class="s">"option.label"</span><span class="nt">&gt;&lt;/span&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span> <span class="na">ng-show=</span><span class="s">"defaults.amount == 'other'"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group-addon"</span><span class="nt">&gt;</span>$<span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Amount"</span> <span class="na">placeholder=</span><span class="s">"Other Amount"</span> <span class="na">ng-required=</span><span class="s">"Gift.SelectedAmount == 'other'"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Comments"</span> <span class="na">placeholder=</span><span class="s">"Comments"</span><span class="nt">&gt;&lt;/textarea&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"defaults.designation"</span> <span class="na">ng-options=</span><span class="s">"designation.label for designation in designations track by designation.id"</span> <span class="na">required</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Designation<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"btn-group"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-repeat=</span><span class="s">"option in types"</span> <span class="na">ng-model=</span><span class="s">"defaults.type"</span> <span class="na">btn-radio=</span><span class="s">"option.id"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">ng-bind=</span><span class="s">"option.label"</span><span class="nt">&gt;&lt;/span&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">ng-show=</span><span class="s">"defaults.type == 'recurring'"</span><span class="nt">&gt;</span>

            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Recurrence.StartDate"</span> <span class="na">datepicker-popup=</span><span class="s">"MMMM dd, yyyy"</span> <span class="na">is-open=</span><span class="s">"openedStartDate"</span> <span class="na">show-button-bar=</span><span class="s">"false"</span> <span class="na">min-date=</span><span class="s">"minDate"</span> <span class="na">placeholder=</span><span class="s">"Start Date"</span> <span class="na">required</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"input-group-btn"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-click=</span><span class="s">"open($event, 'openedStartDate')"</span><span class="nt">&gt;</span>
                      <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-calendar"</span><span class="nt">&gt;&lt;/i&gt;</span>
                    <span class="nt">&lt;/button&gt;</span>
                  <span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Recurrence.EndDate"</span> <span class="na">datepicker-popup=</span><span class="s">"MMMM dd, yyyy"</span> <span class="na">is-open=</span><span class="s">"openedEndDate"</span> <span class="na">show-button-bar=</span><span class="s">"false"</span> <span class="na">min-date=</span><span class="s">"minDate"</span> <span class="na">placeholder=</span><span class="s">"End Date"</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"input-group-btn"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-click=</span><span class="s">"open($event, 'openedEndDate')"</span><span class="nt">&gt;</span>
                      <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-calendar"</span><span class="nt">&gt;&lt;/i&gt;</span>
                    <span class="nt">&lt;/button&gt;</span>
                  <span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Recurrence.Frequency"</span> <span class="na">required</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Frequency<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Weekly<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>Monthly<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Quarterly<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>Annually<span class="nt">&lt;/option&gt;</span>
				  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7"</span><span class="nt">&gt;</span>Every 4 weeks<span class="nt">&lt;/option&gt;</span>
                <span class="nt">&lt;/select&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">ng-show=</span><span class="s">"Gift.Recurrence.Frequency"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span> <span class="na">ng-show=</span><span class="s">"Gift.Recurrence.Frequency == 1"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Recurrence.Month"</span> <span class="na">required</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Month<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>January<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>February<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>March<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>April<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>May<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6"</span><span class="nt">&gt;</span>June<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7"</span><span class="nt">&gt;</span>July<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"8"</span><span class="nt">&gt;</span>August<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"9"</span><span class="nt">&gt;</span>September<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"10"</span><span class="nt">&gt;</span>October<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"11"</span><span class="nt">&gt;</span>November<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"12"</span><span class="nt">&gt;</span>December<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;/select&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span> <span class="na">ng-show=</span><span class="s">"Gift.Recurrence.Frequency == 1"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Recurrence.DayOfWeek"</span> <span class="na">required</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Day of Week<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"0"</span><span class="nt">&gt;</span>Sunday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>Monday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>Tuesday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>Wednesday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>Thursday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>Friday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6"</span><span class="nt">&gt;</span>Saturday<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;/select&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-4"</span> <span class="na">ng-show=</span><span class="s">"Gift.Recurrence.Frequency != 1"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"Gift.Reccurence.DayOfMonth"</span> <span class="na">required</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Day of Month<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"1"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"2"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"3"</span><span class="nt">&gt;</span>3<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"4"</span><span class="nt">&gt;</span>4<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"5"</span><span class="nt">&gt;</span>5<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"6"</span><span class="nt">&gt;</span>6<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"7"</span><span class="nt">&gt;</span>7<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"8"</span><span class="nt">&gt;</span>8<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"9"</span><span class="nt">&gt;</span>9<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"10"</span><span class="nt">&gt;</span>10<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"11"</span><span class="nt">&gt;</span>11<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"12"</span><span class="nt">&gt;</span>12<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"13"</span><span class="nt">&gt;</span>13<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"14"</span><span class="nt">&gt;</span>14<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"15"</span><span class="nt">&gt;</span>15<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"16"</span><span class="nt">&gt;</span>16<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"17"</span><span class="nt">&gt;</span>17<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"18"</span><span class="nt">&gt;</span>18<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"19"</span><span class="nt">&gt;</span>19<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"20"</span><span class="nt">&gt;</span>20<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"21"</span><span class="nt">&gt;</span>21<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"22"</span><span class="nt">&gt;</span>22<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"23"</span><span class="nt">&gt;</span>23<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"24"</span><span class="nt">&gt;</span>24<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"25"</span><span class="nt">&gt;</span>25<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"26"</span><span class="nt">&gt;</span>26<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"27"</span><span class="nt">&gt;</span>27<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"28"</span><span class="nt">&gt;</span>28<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"29"</span><span class="nt">&gt;</span>29<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"30"</span><span class="nt">&gt;</span>30<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"31"</span><span class="nt">&gt;</span>31<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;/select&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>

          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>

          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
              
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-6"</span><span class="nt">&gt;</span>
          
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;p&gt;</span>
            <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-lg btn-primary btn-donate"</span> <span class="na">ng-click=</span><span class="s">"log()"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-lock"</span><span class="nt">&gt;&lt;/i&gt;</span> Donate
            <span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  
  <span class="nt">&lt;/form&gt;</span>
  
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.11.2/ui-bootstrap-tpls.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//code.jquery.com/jquery-1.11.1.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>  
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//chs6bobbyear02.blackbaud.global/Client/Scripts/easyXDM/easyXDM.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//chs6bobbyear02.blackbaud.global/Client/Scripts/API/BBAPI-min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"example-complete.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-complete-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="s1">'use strict'</span><span class="p">;</span>

<span class="c1">// Create our Angular application</span>
<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'bbADF'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ui.bootstrap'</span><span class="p">])</span>
<span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'DonationController'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">CountryService</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Controls the available donor types</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">defaults</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="c1">// single | recurring</span>
    <span class="na">payments</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="c1">// credit | later</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mi">0</span> <span class="c1">// dollar amount | other</span>
  <span class="p">};</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">types</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="s1">'single'</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'Single Gift'</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="s1">'recurring'</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'Recurring Gift'</span>
    <span class="p">}</span>
  <span class="p">];</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">payments</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="s1">'credit'</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'Credit Card'</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="s1">'later'</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'Bill Me Later'</span>
    <span class="p">}</span>
  <span class="p">];</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">amounts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">amount</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'$5'</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">amount</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'$10'</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">amount</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'$25'</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">amount</span><span class="p">:</span> <span class="s1">'other'</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'Other'</span>
    <span class="p">}</span>
  <span class="p">];</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">designations</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="s1">'0001'</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'Designation 1'</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="s1">'0002'</span><span class="p">,</span>
      <span class="na">label</span><span class="p">:</span> <span class="s1">'Designation 2'</span>
    <span class="p">}</span>
  <span class="p">];</span>

  <span class="c1">// Calendar manipulation</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">minDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">open</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$event</span><span class="p">,</span> <span class="nx">opened</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="nx">$event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
    <span class="nx">$scope</span><span class="p">[</span><span class="nx">opened</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="c1">// Temporarily debugging</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">};</span>
  
  <span class="c1">// Request the states for a particular country</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">getStates</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">CountryService</span><span class="p">.</span><span class="nx">getStates</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">Donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">Country</span><span class="p">.</span><span class="nx">Id</span><span class="p">).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">states</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">}).</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s1">'Error loading states.'</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">CountryService</span><span class="p">.</span><span class="nx">getCountries</span><span class="p">().</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">countries</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
  <span class="p">}).</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">'Error loading countries.'</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">})</span>
<span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">'CountryService'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="c1">// Baseurl when using the Advanced Donation Form API</span>
  <span class="kd">var</span> <span class="nx">baseurl</span> <span class="o">=</span> <span class="s1">'http://chs6bobbyear02.blackbaud.global/Webapi/'</span><span class="p">;</span>

  <span class="c1">// Request countries</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">getCountries</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">$http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">baseurl</span> <span class="o">+</span> <span class="s1">'Country'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// Request states when a country is selected</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">getStates</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">$http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">baseurl</span> <span class="o">+</span> <span class="s1">'Country/'</span> <span class="o">+</span> <span class="nx">id</span> <span class="o">+</span> <span class="s1">'/State'</span><span class="p">);</span>
  <span class="p">};</span>

<span class="p">});</span></code></pre></div> </div> <div class="tab-pane" id="example-complete-css"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* Currently only using Bootstrap styles */</span></code></pre></div> </div> </div> <h3 id="adf-generator">Advanced Donation Form Generator</h3> <h4>Overview:</h4> <p>The ADF form generator is a custom content part to be used as an internal tool to generate a barebones ADF template HTML document that developers can use as a starting point for their ADF work. The workflow for using the generator is outlined below.</p> <ol> <li>Create a new custom content part using the Administration menu in BBIS.</li> <li>Copy and paste the "Editor" and "Web page display" HTML code available on <a href=https://github.com/blackbaud-community/BBIS-Advanced-Donation-Form/tree/master/example-adf-generator>Github</a>.</li> <li>In the initialize javascript function field, put "init_form" as the function name.</li> <li>Fill out the name and description to your liking.</li> <li>Save the content part.</li> <li>Create a new page from Site Explorer. It should be hidden from the public facing site, as it will only be used to host the generator tool for internal access.</li> <li>On the newly created internal page, insert the custom content part created above. Use the edit feature to fill in the options you would like your form to have/not have. Remember to populat your designations list.</li> <li>Select save and the form will be updated with your selections</li> <li>Select "View This Page" in the top left corner of the BBIS site, and then click the "Get HTML" button on the donation form. A modal will appear from which you can copy the code for your own ADF.</li> <li>Paste the code into your favorite text editor. There are some "TODO" tags throughout the code that you must act on prior to the ADF going live. Most just require you to delete leftover code from the generator. Use your editor's "find" feature (Ctrl + F) to find all strings matching "TODO" to make sure you see them all.</li> <li>Uncomment and fill out the data in the first javascript function. Follow the example format to ensure it works correctly. GUID's can be found using the special selectors or querying the appropriate database tables.</li> <li>Copy and paste the completed code to an ADF part. You now have a basic, fully functioning, donation form up and running.</li> </ol> <h4>Known Issues:</h4> <ul> <li>Tributes need tribute definition details / types in order for them to work correctly. This was not implemented in the wizard. In order for tributes to function correctly, you will need to populate the relevant properties yourself. See the <a href="/bbis/reference/rest/#partiddonationcreate">ADF "Create Donation" API</a> for more information.</li> <li>Inputted details such as merchant account ID and BBSPReturnUri do not carry over to the form options. Instead, manually enter the information as outlined in step 11.</li> </ul> <p>The entirety of this code is publicly available on Github. Community input and pull requests are welcome and appreciated.</p> </div> <!-- .col-md-9 --> </div> <!-- .row --> </div> <!-- .container --> </div> <!-- .content --> <div class="footer"> <div class="container"> <div class="row"> <div class="col-xs-6 col-sm-4"> <p> <a href="/bbis"> <img src="/bbis/assets/img/logo-lonely.png" alt="Blackbaud Internet Solutions" class="img-responsive" /> </a> </p> <ul class="list-unstyled"> <li> <a href="/bbis/start/">Getting Started</a> </li> <li> <a href="/bbis/guide/">Developer Guide</a> </li> <li> <a href="/bbis/reference/">Technical Reference</a> </li> <li> <a href="/bbis/code/">Code Samples</a> </li> <li> <a href="/bbis/help/">Help</a> </li> </ul> <!-- .list-unstyled --> </div> <!-- .col-sm-4 --> <div class="col-xs-6 col-sm-4"> <p> <a href="http://www.bbdevnetwork.com" target="_blank"> <img src="/bbis/assets/img/logo-developer-small.png" alt="Blackbaud Developer Network" class="img-responsive" /> </a> </p> <ul class="list-unstyled"> <li> <a href="https://www.blackbaud.com/nonprofit-resources/sdk-resources.aspx" target="_blank"> Blackbaud Infinity SDK </a> </li> <li> <a href="http://open.convio.com/" target="_blank"> Blackbaud Luminate </a> </li> <li> <a href="https://www.blackbaud.com/files/support/netcommunity-developer/netcommunity-developer.htm" target="_blank"> Blackbaud NetCommunity </a> </li> <li> <a href="https://www.blackbaud.com/files/support/guides/re7ent/api.pdf" target="_blank"> Blackbaud Raiser's Edge </a> </li> <li> <a href="http://developer.everydayhero.com" target="_blank"> Everyday Hero </a> </li> </ul> <!-- .list-unstyled --> </div> <!-- .col-sm-4 --> <div class="col-sm-4"> <div class="row"> <div class="col-sm-12"> <ul class="list-inline bb-love"> <li> <a href="http://www.blackbaud.com" target="_blank"> <img src="/bbis/assets/img/logo-bb-white.png" alt="Blackbaud" class="img-responsive" /> </a> </li> <li> <i class="fa fa-lg fa-plus"></i> </li> <li> <a href="http://www.github.com/blackbaud-community" target="_blank"> <img src="/bbis/assets/img/logo-github.png" alt="GitHub" class="img-responsive" /> </a> </li> </ul> <!-- .list-inline --> </div> <!-- .col-sm-12 --> </div> <!-- .row --> <div class="row"> <div class="col-sm-12"> <ul class="list-inline social-icons"> <li> <a href="https://github.com/blackbaud-community" target="_blank"> <i class="fa fa-github"></i> </a> </li> <li> <a href="https://plus.google.com/113382459921828617974" target="_blank"> <i class="fa fa-google-plus"></i> </a> </li> <li> <a href="http://twitter.com/blackbaud" target="_blank"> <i class="fa fa-twitter"></i> </a> </li> <li> <a href="https://www.facebook.com/blackbaud" target="_blank"> <i class="fa fa-facebook"></i> </a> </li> <li> <a href="http://www.youtube.com/user/blackbaudinc" target="_blank"> <i class="fa fa-youtube"></i> </a> </li> </ul> <!-- .list-inline --> </div> <!-- .col-sm-12 --> </div> <!-- .row --> </div> <!-- .col-sm-4 --> </div> <!-- .row --> </div> <!-- .container --> </div> <!-- .footer --> <div class="copyright"> <div class="container"> <div class="row"> <div class="col-sm-6"> <p>&copy; 2014 Blackbaud, Inc. All rights reserved.</p> </div> <div class="col-sm-6"> <p class="feedback-link"> <a href="/bbis/help/">Provide Feedback</a> </p> </div> </div> </div> </div> <!-- .copyright --> <div id="omnibar"> &nbsp; </div> <script src="//code.jquery.com/jquery-1.11.1.min.js"></script> <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script> <script src="/bbis/assets/js/combine.site.js?v=2020-09-02-23:04:16"></script> </body> </html>